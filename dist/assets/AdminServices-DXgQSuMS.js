import{r as l,s as b,j as e}from"./index-CoyIXhTj.js";import{c as v}from"./cacheHelper-BlUM2QW1.js";const M=()=>e.jsx("div",{className:"bg-white dark:bg-slate-800 shadow rounded-lg overflow-hidden",children:e.jsx("div",{className:"p-6 space-y-4",children:[1,2,3,4,5].map(k=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-48 bg-slate-200 dark:bg-slate-600 rounded shimmer"}),e.jsx("div",{className:"h-3 w-32 bg-slate-200 dark:bg-slate-600 rounded shimmer"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-8 w-16 bg-slate-200 dark:bg-slate-600 rounded shimmer"}),e.jsx("div",{className:"h-8 w-16 bg-slate-200 dark:bg-slate-600 rounded shimmer"})]})]},k))})});function z({language:k="en"}){const[u,S]=l.useState([]),[g,r]=l.useState(!0),[C,x]=l.useState(!1),[m,j]=l.useState(null),[n,w]=l.useState("all"),[i,L]=l.useState(""),[a,p]=l.useState({name:"",type:"hospitals",location:"",phone:"",address:"",description:""}),h={hospitals:{label:"Hospital",color:"blue",icon:"ðŸ¥"},ambulance:{label:"Ambulance",color:"red",icon:"ðŸš‘"},fire:{label:"Fire",color:"orange",icon:"ðŸš’"},police:{label:"Police",color:"slate",icon:"ðŸ‘®"},power:{label:"Power",color:"yellow",icon:"âš¡"}};l.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const{data:s,error:t}=await b.from("emergency_services").select("*").order("type",{ascending:!0});if(t)throw t;S(s||[]),v.set("emergency_services",s||[],30)}catch(s){console.error("Error fetching services:",s),alert("Failed to fetch services")}finally{r(!1)}},A=()=>{j(null),p({name:"",type:"hospitals",location:"",phone:"",address:"",description:""}),x(!0)},E=s=>{j(s),p({name:s.name||"",type:s.type||"hospitals",location:s.location||"",phone:s.phone||"",address:s.address||"",description:s.description||""}),x(!0)},o=s=>{const{name:t,value:c}=s.target;p(d=>({...d,[t]:c}))},F=async()=>{if(!a.name||!a.phone){alert("Name and phone are required");return}r(!0);try{if(m){const{error:s}=await b.from("emergency_services").update(a).eq("id",m.id);if(s)throw s;alert("Service updated successfully!")}else{const{error:s}=await b.from("emergency_services").insert([a]);if(s)throw s;alert("Service added successfully!")}v.clear("emergency_services"),x(!1),f()}catch(s){console.error("Error saving service:",s),alert(`Failed to save service: ${s.message}`)}finally{r(!1)}},$=async s=>{if(confirm("Are you sure you want to delete this service?")){r(!0);try{const{error:t}=await b.from("emergency_services").delete().eq("id",s);if(t)throw t;v.clear("emergency_services"),alert("Service deleted successfully!"),f()}catch(t){console.error("Error deleting service:",t),alert(`Failed to delete service: ${t.message}`)}finally{r(!1)}}},y=u.filter(s=>{var d,N;const t=n==="all"||s.type===n,c=!i||((d=s.name)==null?void 0:d.toLowerCase().includes(i.toLowerCase()))||((N=s.location)==null?void 0:N.toLowerCase().includes(i.toLowerCase()));return t&&c});return e.jsx("div",{className:"p-4 sm:p-6 lg:p-8 mb-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Emergency Services Management"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Manage emergency contact information for hospitals, ambulances, fire stations, police, and power department"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsx("div",{className:"flex-1 w-full sm:w-auto",children:e.jsx("input",{type:"text",value:i,onChange:s=>L(s.target.value),placeholder:"Search by name or location...",className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-red-600"})}),e.jsx("button",{onClick:A,className:"px-6 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition-all shadow-lg shadow-red-500/20 whitespace-nowrap",children:"+ Add Service"})]}),e.jsxs("div",{className:"mb-6 flex gap-2 overflow-x-auto pb-2",children:[e.jsxs("button",{onClick:()=>w("all"),className:`px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition-all ${n==="all"?"bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700"}`,children:["All (",u.length,")"]}),Object.entries(h).map(([s,t])=>{const c=u.filter(d=>d.type===s).length;return e.jsxs("button",{onClick:()=>w(s),className:`px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition-all ${n===s?"bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-slate-700"}`,children:[t.icon," ",t.label," (",c,")"]},s)})]}),g?e.jsx(M,{}):y.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“‹"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No Services Found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:i||n!=="all"?"Try adjusting your filters":'Click "Add Service" to get started'})]}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:y.map(s=>{const t=h[s.type]||h.hospitals;return e.jsx("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:s.name}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold bg-${t.color}-100 text-${t.color}-700 dark:bg-${t.color}-900/30 dark:text-${t.color}-400`,children:t.label})]}),e.jsxs("div",{className:"space-y-1 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:s.location||"No location"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("a",{href:`tel:${s.phone}`,className:"text-blue-600 dark:text-blue-400 hover:underline",children:s.phone})]}),s.address&&e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 mt-2",children:s.address})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>E(s),className:"px-3 py-1.5 text-sm font-semibold text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>$(s.id),className:"px-3 py-1.5 text-sm font-semibold text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Delete"})]})]})},s.id)})})}),C&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:m?"Edit Service":"Add New Service"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Service Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:o,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-red-600",placeholder:"e.g., City General Hospital"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Type *"}),e.jsx("select",{name:"type",value:a.type,onChange:o,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-red-600",children:Object.entries(h).map(([s,t])=>e.jsxs("option",{value:s,children:[t.icon," ",t.label]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:o,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-red-600",placeholder:"e.g., +91 1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:a.location,onChange:o,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-red-600",placeholder:"e.g., Kolkata"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Full Address"}),e.jsx("input",{type:"text",name:"address",value:a.address,onChange:o,className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-red-600",placeholder:"e.g., 123 Main Street, City - 700001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Description / Additional Info"}),e.jsx("textarea",{name:"description",value:a.description,onChange:o,rows:"3",className:"w-full px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-red-600",placeholder:"Any additional information..."})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-5 py-2.5 rounded-xl font-bold border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:g,className:"px-5 py-2.5 rounded-xl font-bold bg-red-600 text-white hover:bg-red-700 shadow-lg shadow-red-500/30 transition-all disabled:opacity-50",children:g?"Saving...":m?"Update Service":"Add Service"})]})]})})]})})}export{z as default};
