import{r as d,j as e,s as z,a as Me,R as me,g as Je,c as Xe}from"./index-D1LRGo5t.js";import{c as R}from"./cacheHelper-BlUM2QW1.js";import{a as Ke}from"./html2canvas-BJno_UsQ.js";import{Q as Ze}from"./index-Bg5qXrw2.js";const et=({isOpen:l,onClose:n,onComplete:c,questions:g=[],language:b="en",isPractice:f=!1})=>{const[m,N]=d.useState(0),[h,S]=d.useState({}),[_,E]=d.useState(!1),[M,j]=d.useState(0),[Q,$]=d.useState(!1),[U,ee]=d.useState(!1),x={en:{title:"Chapter Quiz",question:"Question",result:"Quiz Result",completed:"Quiz Completed!",failed:"Pass Mark Not Reached",score:"You scored",outOf:"out of",required:"90% correct answers required to pass.",continue:"Continue to Next Lesson",tryAgain:"Try Again",readAgain:"Read Again",submit:"Submit Quiz",next:"Next Question",loadingText:"Preparing Quiz...",noQuestions:"No quiz questions available.",close:"Close",review:"Review Answers",reviewTitle:"Review Your Answers",correct:"Correct Answer",yourAns:"Your Answer"},bn:{title:"à¦…à¦§à§à¦¯à¦¾à¦¯à¦¼ à¦•à§à¦‡à¦œ",question:"à¦ªà§à¦°à¦¶à§à¦¨",result:"à¦•à§à¦‡à¦œ à¦«à¦²à¦¾à¦«à¦²",completed:"à¦•à§à¦‡à¦œ à¦¸à¦®à§à¦ªà¦¨à§à¦¨!",failed:"à¦ªà¦¾à¦¸ à¦®à¦¾à¦°à§à¦• à¦…à¦°à§à¦œà¦¿à¦¤ à¦¹à¦¯à¦¼à¦¨à¦¿",score:"à¦†à¦ªà¦¨à¦¾à¦° à¦¸à§à¦•à§‹à¦°",outOf:"à¦à¦° à¦®à¦§à§à¦¯à§‡",required:"à¦ªà¦¾à¦¸ à¦•à¦°à¦¾à¦° à¦œà¦¨à§à¦¯ à§¯à§¦% à¦¸à¦ à¦¿à¦• à¦‰à¦¤à§à¦¤à¦° à¦ªà§à¦°à¦¯à¦¼à§‹à¦œà¦¨à¥¤",continue:"à¦ªà¦°à¦¬à¦°à§à¦¤à§€ à¦ªà¦¾à¦ à§‡ à¦¯à¦¾à¦¨",tryAgain:"à¦†à¦¬à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨",readAgain:"à¦†à¦¬à¦¾à¦° à¦ªà§œà§à¦¨",submit:"à¦•à§à¦‡à¦œ à¦œà¦®à¦¾ à¦¦à¦¿à¦¨",next:"à¦ªà¦°à¦¬à¦°à§à¦¤à§€ à¦ªà§à¦°à¦¶à§à¦¨",loadingText:"à¦•à§à¦‡à¦œ à¦ªà§à¦°à¦¸à§à¦¤à§à¦¤ à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡...",noQuestions:"à¦•à§‹à¦¨ à¦•à§à¦‡à¦œ à¦ªà§à¦°à¦¶à§à¦¨ à¦ªà¦¾à¦“à¦¯à¦¼à¦¾ à¦¯à¦¾à¦¯à¦¼à¦¨à¦¿à¥¤",close:"à¦¬à¦¨à§à¦§ à¦•à¦°à§à¦¨",review:"à¦‰à¦¤à§à¦¤à¦°à¦—à§à¦²à§‹ à¦¦à§‡à¦–à§à¦¨",reviewTitle:"à¦†à¦ªà¦¨à¦¾à¦° à¦‰à¦¤à§à¦¤à¦°à¦—à§à¦²à§‹ à¦¦à§‡à¦–à§à¦¨",correct:"à¦¸à¦ à¦¿à¦• à¦‰à¦¤à§à¦¤à¦°",yourAns:"à¦†à¦ªà¦¨à¦¾à¦° à¦‰à¦¤à§à¦¤à¦°"}}[b]||{},[F,y]=d.useState([]);if(d.useEffect(()=>{if(l){$(!0),E(!1),N(0),S({}),j(0),ee(!1);const v=setTimeout(()=>{if(g.length>0){const p=g.map(w=>{const D=[...w.options.map((C,H)=>({text:C,isCorrect:H===w.correctAnswerIndex}))].sort(()=>.5-Math.random()),k=D.findIndex(C=>C.isCorrect);return{...w,options:D.map(C=>C.text),correctAnswerIndex:k}});y(p)}else y([]);$(!1)},500);return()=>clearTimeout(v)}},[l,g]),!l)return null;const L=F[m],G=F.length,he=Math.ceil(G*.9),T=M>=he,te=v=>{S(p=>({...p,[m]:v}))},V=()=>{m<G-1?N(v=>v+1):se()},se=()=>{let v=0;F.forEach((p,w)=>{h[w]===p.correctAnswerIndex&&v++}),j(v),E(!0)},be=()=>{T&&c(M)},W=()=>{$(!0),setTimeout(()=>{const v=F.map(p=>{const A=[...p.options.map((k,C)=>({text:k,isCorrect:C===p.correctAnswerIndex}))].sort(()=>.5-Math.random()),D=A.findIndex(k=>k.isCorrect);return{...p,options:A.map(k=>k.text),correctAnswerIndex:D}});y(v),N(0),S({}),E(!1),j(0),$(!1),ee(!1)},500)};return e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border border-slate-200 dark:border-slate-700 flex flex-col max-h-[90vh]",children:Q?e.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4",children:[e.jsx("svg",{className:"w-12 h-12 text-blue-500 animate-pulse",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:x.loadingText})]}):G===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:x.noQuestions}),e.jsx("button",{onClick:n,className:"px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl transition-all hover:bg-slate-300 dark:hover:bg-slate-600",children:x.close})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:U?x.reviewTitle:_?x.result:`${x.question} ${m+1}/${G}`}),(!_||U)&&e.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:U?e.jsxs("div",{className:"space-y-8",children:[F.map((v,p)=>{const w=h[p],A=w===v.correctAnswerIndex;return e.jsxs("div",{className:`p-4 rounded-xl border-2 ${A?"border-green-100 bg-green-50/50 dark:border-green-900 dark:bg-green-900/10":"border-red-100 bg-red-50/50 dark:border-red-900 dark:bg-red-900/10"}`,children:[e.jsxs("div",{className:"flex gap-3 mb-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${A?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:p+1}),e.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:v.questionText})]}),e.jsx("div",{className:"space-y-2 pl-9",children:v.options.map((D,k)=>{const C=w===k,H=v.correctAnswerIndex===k;let Y="text-slate-500 dark:text-slate-400";return H?Y="text-green-600 dark:text-green-400 font-bold":C&&!A&&(Y="text-red-500 dark:text-red-400 line-through"),e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"mt-1",children:H?"âœ…":C?"âŒ":"âšª"}),e.jsx("span",{className:Y,children:D})]},k)})})]},p)}),e.jsx("button",{onClick:n,className:"w-full py-3 bg-slate-800 text-white font-bold rounded-xl transition-all hover:bg-slate-700",children:x.close})]}):_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-4xl ${T?"bg-green-100 dark:bg-green-900/30 text-green-600":"bg-amber-100 dark:bg-amber-900/30 text-amber-600"}`,children:T?"ðŸ†":"âš ï¸"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:T?x.completed:x.failed}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:[x.score," ",e.jsx("span",{className:`font-bold text-xl ${T?"text-green-600":"text-amber-600"}`,children:M})," ",x.outOf," ",G]}),!T&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:x.required}),e.jsx("div",{className:"space-y-3 mt-6",children:f?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ee(!0),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-indigo-600/20",children:x.review}),e.jsx("button",{onClick:W,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-600/20",children:x.tryAgain}),e.jsx("button",{onClick:n,className:"w-full py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl transition-all hover:bg-slate-200 dark:hover:bg-slate-600",children:x.close})]}):T?e.jsx("button",{onClick:be,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-green-600/20",children:x.continue}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:W,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-600/20",children:x.tryAgain}),e.jsx("button",{onClick:n,className:"w-full py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl transition-all hover:bg-slate-200 dark:hover:bg-slate-600",children:x.readAgain})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 leading-relaxed",children:L==null?void 0:L.questionText}),e.jsx("div",{className:"space-y-3",children:L==null?void 0:L.options.map((v,p)=>e.jsx("button",{onClick:()=>te(p),className:`w-full p-4 rounded-xl text-left transition-all border-2 ${h[m]===p?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-slate-100 dark:border-slate-700 hover:border-blue-200 dark:hover:border-blue-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 text-slate-600 dark:text-slate-400"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${h[m]===p?"border-blue-500 bg-blue-500 text-white":"border-slate-300 dark:border-slate-600"}`,children:h[m]===p&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{children:v})]})},p))})]})}),!_&&!U&&e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:e.jsx("button",{onClick:V,disabled:h[m]===void 0,className:`w-full py-3 rounded-xl font-bold transition-all ${h[m]!==void 0?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-600/20":"bg-slate-200 dark:bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:m===G-1?x.submit:x.next})})]})})})},tt=({isOpen:l,onClose:n,userName:c,level:g,badgeName:b,date:f,certificateId:m})=>{const N=d.useRef(null),[h,S]=d.useState(!1);if(!l)return null;const _=`${window.location.origin}/#/verify/${m}`,E=async()=>{if(N.current)try{S(!0);const Q=(await Ke(N.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",width:1123,height:794})).toDataURL("image/png",1),$=document.createElement("a");$.download=`Certificate_${(c==null?void 0:c.replace(/\s+/g,"_"))||"Learner"}.png`,$.href=Q,$.click()}catch(j){console.error("Error generating PNG:",j),alert("Failed to generate PNG. Please try again.")}finally{S(!1)}},M=()=>{const j=window.open("","_blank");j.document.write(`
            <html>
                <head>
                    <title>Certificate of Achievement</title>
                    <style>
                        @page { 
                            size: A4 landscape; 
                            margin: 0; 
                        }
                        body { 
                            margin: 0; 
                            padding: 0; 
                            -webkit-print-color-adjust: exact; 
                            background: white;
                            overflow: hidden;
                        }
                        .certificate-container {
                            width: 296mm;
                            height: 209mm;
                            padding: 10mm;
                            box-sizing: border-box;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            font-family: 'Times New Roman', serif;
                            background: white;
                            page-break-inside: avoid;
                            overflow: hidden;
                        }
                        .certificate-border {
                            width: 100%;
                            height: 100%;
                            padding: 8mm;
                            border: 10px double #1e293b;
                            box-sizing: border-box;
                            position: relative;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            text-align: center;
                        }
                        .corner {
                            position: absolute;
                            width: 15mm;
                            height: 15mm;
                            border-color: #1e293b;
                            border-style: solid;
                        }
                        .top-left { top: 4mm; left: 4mm; border-width: 1.5mm 0 0 1.5mm; }
                        .top-right { top: 4mm; right: 4mm; border-width: 1.5mm 1.5mm 0 0; }
                        .bottom-left { bottom: 4mm; left: 4mm; border-width: 0 0 1.5mm 1.5mm; }
                        .bottom-right { bottom: 4mm; right: 4mm; border-width: 0 1.5mm 1.5mm 0; }

                        .header {
                            font-size: 52pt;
                            font-weight: bold;
                            color: #1e293b;
                            margin-bottom: 4mm;
                            text-transform: uppercase;
                            letter-spacing: 6pt;
                        }
                        .sub-header {
                            font-size: 24pt;
                            color: #64748b;
                            margin-bottom: 12mm;
                            font-style: italic;
                        }
                        .certify-text {
                            font-size: 18pt;
                            color: #64748b;
                            margin-bottom: 6mm;
                        }
                        .recipient-name {
                            font-size: 56pt;
                            font-weight: bold;
                            color: #0f172a;
                            margin-bottom: 10mm;
                            border-bottom: 2pt solid #e2e8f0;
                            padding: 0 15mm 4mm 15mm;
                            font-style: italic;
                        }
                        .description {
                            font-size: 18pt;
                            color: #475569;
                            max-width: 85%;
                            line-height: 1.4;
                            margin-bottom: 12mm;
                        }
                        .badge-level {
                            font-size: 36pt;
                            font-weight: bold;
                            color: #1e40af;
                            margin-bottom: 2mm;
                            text-transform: uppercase;
                            letter-spacing: 3pt;
                        }
                        .level-text {
                            font-size: 18pt;
                            color: #64748b;
                            margin-bottom: 15mm;
                        }
                        .footer {
                            width: 90%;
                            display: flex;
                            justify-content: space-between;
                            align-items: flex-end;
                            margin-top: auto;
                            padding-bottom: 5mm;
                        }
                        .signature-block {
                            text-align: center;
                            border-top: 1.5pt solid #94a3b8;
                            padding-top: 3mm;
                            width: 50mm;
                        }
                        .signature-text {
                            font-size: 16pt;
                            color: #1e293b;
                            font-weight: bold;
                        }
                        .signature-label {
                            font-size: 12pt;
                            color: #64748b;
                            margin-top: 1mm;
                            text-transform: uppercase;
                            letter-spacing: 1pt;
                        }
                        .seal-container {
                            position: relative;
                            width: 35mm;
                            height: 35mm;
                        }
                        .seal {
                            width: 35mm;
                            height: 35mm;
                            border-radius: 50%;
                            background: linear-gradient(135deg, #fde047, #eab308, #ca8a04);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            border: 3pt solid #a16207;
                            box-shadow: 0 3pt 6pt rgba(0,0,0,0.2);
                            transform: rotate(-12deg);
                        }
                        .seal-inner {
                            width: 30mm;
                            height: 30mm;
                            border: 1.5pt dashed rgba(161, 98, 7, 0.4);
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            text-align: center;
                            font-size: 8pt;
                            font-weight: bold;
                            color: #713f12;
                        }
                        .ribbon {
                            position: absolute;
                            bottom: -8mm;
                            left: 50%;
                            transform: translateX(-50%);
                            display: flex;
                            gap: 1.5mm;
                        }
                        .ribbon-tail {
                            width: 5mm;
                            height: 12mm;
                            background: #dc2626;
                            clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 50% 85%, 0% 100%);
                        }
                        .verification-block {
                            position: absolute;
                            bottom: 8mm;
                            left: 8mm;
                            display: flex;
                            flex-direction: column;
                            align-items: flex-start;
                            gap: 2mm;
                        }
                        .qr-code {
                            width: 25mm;
                            height: 25mm;
                            background: white;
                            padding: 1mm;
                            border: 1pt solid #e2e8f0;
                        }
                        .cert-id {
                            font-size: 10pt;
                            color: #94a3b8;
                            font-family: monospace;
                        }
                    </style>
                </head>
                <body>
                    <div class="certificate-container">
                        <div class="certificate-border">
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                            
                            <div class="header">Certificate</div>
                            <div class="sub-header">of Achievement</div>
                            
                            <div class="certify-text">This is to certify that</div>
                            <div class="recipient-name">${c||"Valued Learner"}</div>
                            
                            <div class="description">
                                Has successfully demonstrated exceptional dedication to safety SOPs and professional development by achieving the distinguished level of
                            </div>
                            
                            <div class="badge-level">${b||"Safety Trainee"}</div>
                            <div class="level-text">Training Level ${g||1}</div>
                            
                            <div class="verification-block">
                                <div class="qr-code">
                                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(_)}" style="width: 100%; height: 100%;" />
                                </div>
                                <div class="cert-id">ID: ${m}</div>
                            </div>

                            <div class="footer">
                                <div class="signature-block">
                                    <div class="signature-text">${f}</div>
                                    <div class="signature-label">Date of Issue</div>
                                </div>
                                
                                <div class="seal-container">
                                    <div class="seal">
                                        <div class="seal-inner">
                                            OFFICIAL<br>SMART LINEMAN<br>CERTIFIED
                                        </div>
                                    </div>
                                    <div class="ribbon">
                                        <div class="ribbon-tail"></div>
                                        <div class="ribbon-tail"></div>
                                    </div>
                                </div>
                                
                                <div class="signature-block">
                                    <div class="signature-text">Smart Lineman</div>
                                    <div class="signature-label">Authorized Signature</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </body>
            </html>
        `),j.document.close(),j.focus(),setTimeout(()=>{j.print(),j.close()},500)};return e.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ“"})," Professional Certificate"]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full transition-colors text-slate-500 dark:text-slate-400",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 sm:p-8 bg-slate-100 dark:bg-slate-950 flex justify-start sm:justify-center items-start sm:items-center",children:e.jsxs("div",{ref:N,className:"bg-white text-slate-900 p-12 shadow-2xl border-[16px] border-double border-slate-800 relative flex flex-col items-center justify-center text-center select-none shrink-0",style:{width:"1123px",height:"794px",fontFamily:"'Times New Roman', serif"},children:[e.jsx("div",{className:"absolute top-6 left-6 w-24 h-24 border-t-8 border-l-8 border-slate-800"}),e.jsx("div",{className:"absolute top-6 right-6 w-24 h-24 border-t-8 border-r-8 border-slate-800"}),e.jsx("div",{className:"absolute bottom-6 left-6 w-24 h-24 border-b-8 border-l-8 border-slate-800"}),e.jsx("div",{className:"absolute bottom-6 right-6 w-24 h-24 border-b-8 border-r-8 border-slate-800"}),e.jsxs("div",{className:"absolute bottom-10 left-10 flex flex-col items-start gap-2",children:[e.jsx("div",{className:"bg-white p-2 border border-slate-200 shadow-sm rounded-lg",children:e.jsx(Ze,{value:_,size:100})}),e.jsxs("div",{className:"text-[10px] text-slate-400 font-mono tracking-tighter",children:["VERIFY ID: ",m]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-7xl font-bold text-slate-800 mb-4 uppercase tracking-[0.2em]",children:"Certificate"}),e.jsx("h2",{className:"text-3xl text-slate-600 italic font-serif",children:"of Achievement"})]}),e.jsxs("div",{className:"space-y-6 mb-12",children:[e.jsx("p",{className:"text-2xl text-slate-500",children:"This is to certify that"}),e.jsx("div",{className:"text-7xl font-bold text-slate-900 border-b-4 border-slate-300 pb-4 px-12 inline-block min-w-[600px] font-serif italic",children:c||"Valued Learner"})]}),e.jsx("div",{className:"max-w-3xl mb-12",children:e.jsx("p",{className:"text-2xl text-slate-600 leading-relaxed",children:"Has successfully demonstrated exceptional dedication to safety SOPs and professional development by achieving the distinguished level of"})}),e.jsxs("div",{className:"mb-16",children:[e.jsx("div",{className:"text-5xl font-bold text-blue-800 mb-2 uppercase tracking-widest",children:b||"Safety Trainee"}),e.jsxs("div",{className:"text-2xl text-slate-500 font-medium",children:["Training Level ",g||1]})]}),e.jsxs("div",{className:"w-full flex justify-between items-end px-20 mt-auto pb-10",children:[e.jsxs("div",{className:"text-center w-64",children:[e.jsx("div",{className:"text-2xl font-serif text-slate-800 border-t-2 border-slate-400 pt-4",children:f}),e.jsx("div",{className:"text-lg text-slate-500 mt-2 uppercase tracking-wider",children:"Date of Issue"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-yellow-300 via-yellow-500 to-yellow-600 rounded-full flex items-center justify-center shadow-xl border-4 border-yellow-700/50",children:e.jsx("div",{className:"w-28 h-28 border-2 border-dashed border-yellow-800/30 rounded-full flex items-center justify-center text-center",children:e.jsxs("div",{className:"text-yellow-900 font-bold text-xs leading-tight transform -rotate-12",children:["OFFICIAL",e.jsx("br",{}),e.jsx("span",{className:"text-[10px]",children:"SMART LINEMAN"}),e.jsx("br",{}),"CERTIFIED"]})})}),e.jsxs("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 flex gap-1",children:[e.jsx("div",{className:"w-4 h-12 bg-red-600 shadow-lg",style:{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 50% 85%, 0% 100%)"}}),e.jsx("div",{className:"w-4 h-12 bg-red-600 shadow-lg",style:{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 50% 85%, 0% 100%)"}})]})]}),e.jsxs("div",{className:"text-center w-64",children:[e.jsx("div",{className:"text-2xl font-serif text-slate-800 border-t-2 border-slate-400 pt-4",children:"Smart Lineman"}),e.jsx("div",{className:"text-lg text-slate-500 mt-2 uppercase tracking-wider",children:"Authorized Signature"})]})]})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 flex flex-wrap justify-end gap-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Close"}),e.jsxs("button",{onClick:E,disabled:h,className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 text-white rounded-lg shadow-lg shadow-emerald-500/30 flex items-center gap-2 transition-all hover:scale-105 active:scale-95",children:[h?e.jsx("div",{className:"h-5 w-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h?"Generating...":"Download PNG"]}),e.jsxs("button",{onClick:M,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg shadow-blue-500/30 flex items-center gap-2 transition-all hover:scale-105 active:scale-95",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print / PDF"]})]})]})})},ze=me.memo(({level:l,index:n,onClick:c})=>e.jsxs("div",{onClick:()=>c(l),className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:border-orange-300 dark:hover:border-orange-700 hover:shadow-md transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-600 text-white flex items-center justify-center text-lg font-bold shadow-md shadow-orange-500/20 group-hover:scale-110 transition-transform",children:n+1}),e.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"â†’"})]}),e.jsx("h3",{className:"font-bold text-base text-slate-900 dark:text-slate-100 mb-0.5",children:l.level_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:l.focus})]})),st=me.memo(({levels:l,onClick:n,language:c})=>{const[g,b]=d.useState(!0);return e.jsxs("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>b(!g),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-orange-600 text-white flex items-center justify-center text-2xl shadow-lg shadow-orange-500/20",children:"ðŸ“‹"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-slate-900 dark:text-slate-100",children:c==="bn"?"à¦¸à¦¬ à¦•à¦¾à¦œà§‡à¦° à¦¸à¦¾à¦§à¦¾à¦°à¦£ à¦¨à¦¿à§Ÿà¦®":"General Rules for All Work"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:c==="bn"?"à¦§à¦¾à¦ª à§§ à¦¥à§‡à¦•à§‡ à§«":"Steps 1 to 5"})]})]}),e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center bg-slate-50 dark:bg-slate-900/50 text-slate-400 transition-transform duration-300 ${g?"":"rotate-180"}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M19 9l-7 7-7-7"})})})]}),!g&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6 animate-fade-in",children:l.map((f,m)=>e.jsxs("div",{onClick:()=>n(f),className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-700 hover:border-orange-300 dark:hover:border-orange-700 cursor-pointer group transition-all",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 flex items-center justify-center text-sm font-bold group-hover:bg-orange-600 group-hover:text-white transition-colors",children:m+1}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors line-clamp-1",children:f.level_name})]},m))})]})}),at=me.memo(({chapter:l,completedLessons:n,language:c,onClick:g})=>{const b=l.number===10,f=n.filter(N=>N&&N.toString().startsWith(`${l.number}.`)).length,m=l.count>0?Math.min(100,Math.round(f/l.count*100)):0;return e.jsxs("div",{onClick:()=>g(l),className:`p-5 rounded-xl border transition-all cursor-pointer group relative overflow-hidden ${b?"bg-gradient-to-br from-violet-50 to-fuchsia-50 dark:from-violet-900/20 dark:to-fuchsia-900/20 border-violet-200 dark:border-violet-700 hover:border-violet-400 dark:hover:border-violet-500 shadow-sm hover:shadow-md":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-orange-400 dark:hover:border-orange-600 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg font-bold border ${b?"bg-violet-100 dark:bg-violet-900/40 text-violet-600 dark:text-violet-300 border-violet-200 dark:border-violet-800":"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-900/50"}`,children:b?"?":l.number}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold leading-tight transition-colors ${b?"text-violet-900 dark:text-violet-100 group-hover:text-violet-700 dark:group-hover:text-violet-300":"text-slate-900 dark:text-slate-100 group-hover:text-orange-600 dark:group-hover:text-orange-400"}`,children:l.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5 flex items-center gap-1.5",children:b?c==="en"?"Always Unlocked":"à¦¸à¦¬à¦¾à¦° à¦œà¦¨à§à¦¯ à¦‰à¦¨à§à¦®à§à¦•à§à¦¤":c==="en"?`${l.count} Days â€¢ ${l.count} Lessons`:`${l.count===10?"à§§à§¦":l.count} à¦¦à¦¿à¦¨ - ${l.count===10?"à§§à§¦":l.count} à¦ªà¦¾à¦ `})]})]}),!b&&m===100&&e.jsx("div",{className:"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider",children:c==="en"?"Done":"à¦¸à¦®à§à¦ªà¦¨à§à¦¨"}),b&&e.jsx("div",{className:"text-violet-500 bg-violet-50 dark:bg-violet-900/20 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider",children:"FAQ"})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${m===100?"bg-emerald-500":"bg-orange-500"}`,style:{width:`${m}%`}})}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5 text-right",children:[m,"% ",c==="en"?"Complete":"à¦¸à¦®à§à¦ªà¦¨à§à¦¨"]})]}),b&&e.jsx("p",{className:"text-[10px] text-violet-400 dark:text-violet-500 mt-2 italic",children:c==="en"?"Reference Guide":"à¦°à§‡à¦«à¦¾à¦°à§‡à¦¨à§à¦¸ à¦—à¦¾à¦‡à¦¡"})]})}),rt=({user:l,userProfile:n,language:c,setActiveTab:g,completedLessons:b,t:f,setCurrentView:m})=>{var _,E;[1,2,3,4,5,6,7,8,9].filter(M=>b.filter(Q=>Q&&Q.toString().startsWith(`${M}.`)).length>0).length;const N=Math.floor((new Date-new Date(new Date().getFullYear(),0,0))/1e3/60/60/24),h={en:["Always inspect your PPE before use.","Treat every wire as live until proven otherwise.","Communication is key during maintenance work.","Stay hydrated and take breaks in hot weather.","Never compromise on safety for speed."],bn:["à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à§‡à¦° à¦†à¦—à§‡ à¦¸à¦°à§à¦¬à¦¦à¦¾ à¦†à¦ªà¦¨à¦¾à¦° à¦ªà¦¿à¦ªà¦¿à¦‡ à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦•à¦°à§à¦¨à¥¤","à¦ªà§à¦°à¦®à¦¾à¦£à¦¿à¦¤ à¦¨à¦¾ à¦¹à¦“à¦¯à¦¼à¦¾ à¦ªà¦°à§à¦¯à¦¨à§à¦¤ à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦¤à¦¾à¦°à¦•à§‡ à¦œà§€à¦¬à¦¨à§à¦¤ à¦®à¦¨à§‡ à¦•à¦°à§à¦¨à¥¤","à¦°à¦•à§à¦·à¦£à¦¾à¦¬à§‡à¦•à§à¦·à¦£ à¦•à¦¾à¦œà§‡à¦° à¦¸à¦®à¦¯à¦¼ à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦— à¦…à¦¤à§à¦¯à¦¨à§à¦¤ à¦—à§à¦°à§à¦¤à§à¦¬à¦ªà§‚à¦°à§à¦£à¥¤","à¦—à¦°à¦® à¦†à¦¬à¦¹à¦¾à¦“à¦¯à¦¼à¦¾à¦¯à¦¼ à¦œà¦² à¦ªà¦¾à¦¨ à¦•à¦°à§à¦¨ à¦à¦¬à¦‚ à¦¬à¦¿à¦°à¦¤à¦¿ à¦¨à¦¿à¦¨à¥¤","à¦—à¦¤à¦¿à¦° à¦œà¦¨à§à¦¯ à¦¸à§à¦°à¦•à§à¦·à¦¾à¦° à¦¸à¦¾à¦¥à§‡ à¦†à¦ªà¦¸ à¦•à¦°à¦¬à§‡à¦¨ à¦¨à¦¾à¥¤"]},S=h[c][N%h[c].length];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl p-6 text-white shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:c==="en"?`Safety First, ${((_=n==null?void 0:n.full_name)==null?void 0:_.split(" ")[0])||"Hero"}!`:`à¦¸à§à¦°à¦•à§à¦·à¦¾à¦‡ à¦ªà§à¦°à¦¥à¦®, ${((E=n==null?void 0:n.full_name)==null?void 0:E.split(" ")[0])||"à¦¹à¦¿à¦°à§‹"}!`}),e.jsxs("p",{className:"text-slate-300 text-sm mb-4 max-w-lg leading-relaxed",children:['"',S,'"']}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-orange-400 bg-orange-400/10 px-3 py-1.5 rounded-full w-fit border border-orange-400/20",children:[e.jsx("span",{className:"animate-pulse",children:"ðŸ’¡"})," ",c==="en"?"Daily Safety Tip":"à¦¦à§ˆà¦¨à¦¿à¦• à¦¸à§à¦°à¦•à§à¦·à¦¾ à¦Ÿà¦¿à¦ª"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>m("training"),className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-blue-400 dark:hover:border-blue-600 transition-all group text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 flex items-center justify-center text-xl mb-3 group-hover:scale-110 transition-transform",children:"ðŸŽ“"}),e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100 text-sm",children:c==="en"?"Training":"à¦ªà§à¦°à¦¶à¦¿à¦•à§à¦·à¦£"})]}),e.jsxs("button",{onClick:()=>g("sops"),className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-orange-400 dark:hover:border-orange-600 transition-all group text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 flex items-center justify-center text-xl mb-3 group-hover:scale-110 transition-transform",children:"ðŸ“‹"}),e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100 text-sm",children:f.tabs.sops})]}),e.jsxs("button",{onClick:()=>{l?g("my_ppe"):m("login")},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-emerald-400 dark:hover:border-emerald-600 transition-all group text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center text-xl mb-3 group-hover:scale-110 transition-transform",children:"ðŸ¦º"}),e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100 text-sm",children:f.tabs.my_ppe})]}),e.jsxs("button",{onClick:()=>{l?g("my_tools"):m("login")},className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md hover:border-indigo-400 dark:hover:border-indigo-600 transition-all group text-left",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center text-xl mb-3 group-hover:scale-110 transition-transform",children:"ðŸ› ï¸"}),e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100 text-sm",children:f.tabs.my_tools})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:c==="en"?"Your Progress":"à¦†à¦ªà¦¨à¦¾à¦° à¦…à¦—à§à¦°à¦—à¦¤à¦¿"}),e.jsx("button",{onClick:()=>m("training"),className:"text-xs font-bold text-blue-600 hover:underline",children:c==="en"?"View All":"à¦¸à¦¬ à¦¦à§‡à¦–à§à¦¨"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[e.jsx("span",{className:"text-slate-500",children:c==="en"?"Overall Completion":"à¦®à§‹à¦Ÿ à¦¸à¦®à§à¦ªà¦¨à§à¦¨"}),e.jsxs("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:[Math.round(b.length/45*100),"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full transition-all duration-1000",style:{width:`${Math.min(100,b.length/45*100)}%`}})})]})})]})]})};function ht({language:l="en",user:n,userProfile:c,setCurrentView:g,onProgressUpdate:b,mode:f="safety"}){var ye,Ce,Se,_e,Le,Te,Pe,Ee;const m=()=>{const s=window.location.hash.match(/[?&]tab=([^&]*)/);return s&&s[1]?decodeURIComponent(s[1]):null},N=m()||(f==="training"?"training":"dashboard"),[h,S]=d.useState(N),[_,E]=d.useState([]),[M,j]=d.useState(!1),[Q,$]=d.useState(!1),[U,ee]=d.useState(null),[x,F]=d.useState(c),[y,L]=d.useState(!1);d.useEffect(()=>{c&&F(c)},[c]),d.useEffect(()=>{f==="training"?S("training"):f==="safety"&&h==="training"&&S("sops")},[f]),d.useEffect(()=>{const t=()=>{const s=m();s&&S(s)};return t(),window.addEventListener("hashchange",t),()=>window.removeEventListener("hashchange",t)},[]),d.useEffect(()=>{(async()=>{if(!(!n||x!=null&&x.full_name))try{const{data:s,error:r}=await z.from("profiles").select("full_name").eq("id",n.id).single();if(r)throw r;s&&F(a=>({...a,...s}))}catch(s){console.error("Error fetching user profile in SafetyHub:",s)}})()},[n,x]);const[G,he]=d.useState({name:"",age_months:"",condition:"Good",details:"",count:1}),[T,te]=d.useState([]),[V,se]=d.useState([]),[be,W]=d.useState(!1),[v,p]=d.useState(0),[w,A]=d.useState(null),[D,k]=d.useState(null),[C,H]=d.useState(null),[Y,ne]=d.useState(!1),[$e,de]=d.useState(!1),[Ae,Re]=d.useState([]),[ae,ge]=d.useState(null),[ot,Fe]=d.useState({}),[ue,De]=d.useState([]),[I,ie]=d.useState(null),[nt,dt]=d.useState(null),[u,re]=d.useState(null),[Ie,J]=d.useState(!1),[B,le]=d.useState([]),[X,Be]=d.useState(""),[Qe,pe]=d.useState(!1);d.useEffect(()=>(u?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[u]),d.useEffect(()=>{(async()=>{if(!n)return;let s=[];const r=localStorage.getItem(`training_progress_${n.id}`);r&&(s=JSON.parse(r));try{const{data:a,error:i}=await z.from("profiles").select("completed_lessons").eq("id",n.id).single();if(a&&a.completed_lessons){const o=Array.isArray(a.completed_lessons)?a.completed_lessons:[],P=[...new Set([...s,...o])];le(P),P.length!==s.length&&localStorage.setItem(`training_progress_${n.id}`,JSON.stringify(P))}else le(s)}catch(a){console.error("Error syncing progress:",a),le(s)}})()},[n]);const Ge=(t,s)=>{if(s===1)return!0;const r=`${t}.${s-1}`;return B.includes(r)},[ce,fe]=d.useState(null),oe=async t=>{if(!B.includes(t)){if(n)try{await z.rpc("submit_quiz_result",{p_quiz_id:`lesson_bonus_${t}`,p_score:20}),R.clear("leaderboard_top_10_v3"),R.clear("leaderboard_full_v3"),R.clear(`user_rank_${n.id}`),fe(20),setTimeout(()=>fe(null),5e3)}catch(i){console.error("Error awarding lesson bonus:",i)}const a=[...B,t];if(le(a),n){localStorage.setItem(`training_progress_${n.id}`,JSON.stringify(a));const i=Xe(a,ue);z.from("profiles").update({training_level:i,completed_lessons:a}).eq("id",n.id).then(({error:o})=>{o&&console.error("Error syncing training progress:",o)})}b&&b(a)}de(!1),ge(null)},ve=async t=>{const s=`questions_${t.replace(".","_")}.json`;try{const r=await fetch(`/quizzes/${s}`);if(!r.ok){oe(t);return}const a=await r.json();if(a&&a.length>0){let i=[...a].sort(()=>.5-Math.random());i=i.slice(0,10),Fe(o=>({...o,[t]:i.map(P=>P.questionText)})),Re(i),ge(t),de(!0)}else oe(t)}catch(r){console.error("Error loading quiz:",r),oe(t)}},We=t=>{ae&&oe(ae)},Oe=[{rule:l==="en"?"Min. Ground Clearance for LT line is 15 ft./ 4.6 meter.":"à¦à¦²à¦Ÿà¦¿ à¦²à¦¾à¦‡à¦¨à§‡à¦° à¦œà¦¨à§à¦¯ à¦¨à§à¦¯à§‚à¦¨à¦¤à¦® à¦—à§à¦°à¦¾à¦‰à¦¨à§à¦¡ à¦•à§à¦²à¦¿à¦¯à¦¼à¦¾à¦°à§‡à¦¨à§à¦¸ à¦¹à¦² à§§à§« à¦«à§à¦Ÿ/ à§ª.à§¬ à¦®à¦¿à¦Ÿà¦¾à¦°à¥¤",icon:"ðŸ“",color:"from-blue-600 to-indigo-600"},{rule:l==="en"?"Wear PPE -> Shut down -> Earthing -> Discharge -> Work.":"à¦ªà¦¿à¦ªà¦¿à¦‡ à¦ªà¦°à§à¦¨ -> à¦¶à¦¾à¦Ÿ à¦¡à¦¾à¦‰à¦¨ -> à¦†à¦°à§à¦¥à¦¿à¦‚ -> à¦¡à¦¿à¦¸à¦šà¦¾à¦°à§à¦œ -> à¦•à¦¾à¦œ à¦•à¦°à§à¦¨à¥¤",icon:"âš¡",color:"from-orange-600 to-red-600"},{rule:l==="en"?"Always use a safety belt and helmet while working at height.":"à¦‰à¦šà§à¦šà¦¤à¦¾à¦¯à¦¼ à¦•à¦¾à¦œ à¦•à¦°à¦¾à¦° à¦¸à¦®à¦¯à¦¼ à¦¸à¦°à§à¦¬à¦¦à¦¾ à¦¸à§à¦°à¦•à§à¦·à¦¾ à¦¬à§‡à¦²à§à¦Ÿ à¦à¦¬à¦‚ à¦¹à§‡à¦²à¦®à§‡à¦Ÿ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§à¦¨à¥¤",icon:"ðŸ§—",color:"from-emerald-600 to-teal-600"},{rule:l==="en"?"Check tools for damage before starting any maintenance work.":"à¦¯à§‡à¦•à§‹à¦¨à§‹ à¦°à¦•à§à¦·à¦£à¦¾à¦¬à§‡à¦•à§à¦·à¦£à§‡à¦° à¦•à¦¾à¦œ à¦¶à§à¦°à§ à¦•à¦°à¦¾à¦° à¦†à¦—à§‡ à¦¸à¦°à¦žà§à¦œà¦¾à¦®à¦—à§à¦²à¦¿ à¦•à§à¦·à¦¤à¦¿à¦° à¦œà¦¨à§à¦¯ à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦•à¦°à§à¦¨à¥¤",icon:"ðŸ”§",color:"from-slate-700 to-slate-900"}],O=(C==null?void 0:C.rules)||Oe.map(t=>t.rule);d.useEffect(()=>{const t=setInterval(()=>{p(s=>(s+1)%O.length)},5e3);return()=>clearInterval(t)},[O.length]),d.useEffect(()=>{const t=async()=>{ne(!1);try{const i=await fetch(`/quizzes/${l==="en"?"protocol_en.json":"protocol.json"}`);if(!i.ok)throw new Error("Failed to fetch SOP");const o=await i.json();A(o)}catch(a){console.error("Error fetching SOP:",a),ne(!0)}},s=async()=>{try{const i=await fetch(`/quizzes/${l==="en"?"carousol_en.json":"carousol.json"}`);if(!i.ok)throw new Error("Failed to fetch carousel");const o=await i.json();H(o)}catch(a){console.error("Error fetching carousel data:",a)}},r=async()=>{try{J(!0);const a=await fetch("/quizzes/training_manifest.json");if(a.ok){const i=await a.json();De(i)}else throw new Error("Manifest not found")}catch(a){console.error("Error fetching training chapters:",a),ne(!0)}finally{J(!1)}};t(),s(),r()},[l]);const qe=async t=>{if(J(!0),t.number===10){try{const s=await fetch("/quizzes/chapter_10_qa.json");if(s.ok){const r=await s.json();ie({...t,isFAQ:!0,content:r})}}catch(s){console.error("Error loading FAQ chapter:",s)}finally{J(!1)}return}try{const s=[];for(let i=1;i<=t.count;i++)s.push(fetch(`/quizzes/chapter_${t.number}_${i}.json`).then(o=>o.ok?o.json():null).catch(()=>null));const a=(await Promise.all(s)).map((i,o)=>i?{...i,chapterNum:t.number,subchapterNum:o+1}:null).filter(Boolean);ie({...t,subchapters:a})}catch(s){console.error("Error loading chapter:",s)}finally{J(!1)}},je=()=>{p(t=>(t+1)%O.length)},we=()=>{p(t=>(t-1+O.length)%O.length)},He=[{name:"Safety Helmet",icon:"ðŸª–"},{name:"Safety Shoes/Boots",icon:"ðŸ¥¾"},{name:"Insulated Gloves",icon:"ðŸ§¤"},{name:"Reflective Jacket",icon:"ðŸ¦º"},{name:"Safety Belt",icon:"ðŸ§—"},{name:"Full Body Harness",icon:"ðŸ§—â€â™‚ï¸"},{name:"Voltage Detector",icon:"ðŸ”Œ"},{name:"Discharge Rod",icon:"ðŸ¦¯"},{name:"Safety Goggles",icon:"ðŸ¥½"},{name:"Raincoat",icon:"ðŸ§¥"},{name:"Torch/Emergency Light",icon:"ðŸ”¦"}],Ue=[{name:"Pliers",icon:"ðŸ”§"},{name:"Screwdriver Set",icon:"ðŸª›"},{name:"Wrench",icon:"ðŸ”§"},{name:"Hammer",icon:"ðŸ”¨"},{name:"Tester",icon:"âš¡"},{name:"Multimeter",icon:"ðŸ“Ÿ"},{name:"Wire Stripper",icon:"âœ‚ï¸"},{name:"Drill Machine",icon:"ðŸ”«"},{name:"Ladder",icon:"ðŸªœ"},{name:"Rope",icon:"ðŸª¢"}];d.useEffect(()=>{h==="my_ppe"&&n&&ke()},[h,n]),d.useEffect(()=>{h==="my_tools"&&n&&Ne()},[h,n]);const ke=async()=>{if(!n)return;const t=`user_ppe_${n.id}`;let r=R.get(t);if(!r){j(!0);try{const{data:i,error:o}=await z.from("user_ppe").select("*").order("created_at",{ascending:!1});if(o)throw o;r=i||[],R.set(t,r,10)}catch(i){console.error("Error fetching PPE:",i),r=[]}finally{j(!1)}}E(r);const a=He.map(i=>{var P;const o=r.find(xe=>xe.name===i.name);return{...i,available:!!o,id:(o==null?void 0:o.id)||null,count:(o==null?void 0:o.count)||1,condition:(o==null?void 0:o.condition)||"Good",age:o!=null&&o.age_months?o.age_months<=6?"<6m":o.age_months<=12?"6-12m":o.age_months<=24?"1-2y":">2y":"<6m",usage:(P=o==null?void 0:o.details)!=null&&P.includes("Usage:")?o.details.split("Usage:")[1].trim():"Personal"}});te(a)},Ne=async()=>{if(!n)return;const t=`user_tools_${n.id}`;let r=R.get(t);if(!r){j(!0);try{const{data:i,error:o}=await z.from("user_tools").select("*").order("created_at",{ascending:!1});if(o)throw o;r=i||[],R.set(t,r,10)}catch(i){console.error("Error fetching Tools:",i),r=[]}finally{j(!1)}}const a=Ue.map(i=>{var P;const o=r.find(xe=>xe.name===i.name);return{...i,available:!!o,id:(o==null?void 0:o.id)||null,count:(o==null?void 0:o.count)||1,condition:(o==null?void 0:o.condition)||"Good",age:o!=null&&o.age_months?o.age_months<=6?"<6m":o.age_months<=12?"6-12m":o.age_months<=24?"1-2y":">2y":"<6m",usage:(P=o==null?void 0:o.details)!=null&&P.includes("Usage:")?o.details.split("Usage:")[1].trim():"Personal"}});se(a)},Ve=async()=>{if(!n){g("login");return}W(!0);try{const t=[],s=[];for(const a of T){const i=a.age==="<6m"?3:a.age==="6-12m"?9:a.age==="1-2y"?18:36,o=`Usage: ${a.usage}`;a.available?t.push({id:a.id||void 0,user_id:n.id,name:a.name,count:parseInt(a.count),condition:a.condition,age_months:i,details:o}):a.id&&s.push(a.id)}const r=[];t.length>0&&r.push(z.from("user_ppe").upsert(t,{onConflict:"id",ignoreDuplicates:!1})),s.length>0&&r.push(z.from("user_ppe").delete().in("id",s)),await Promise.all(r),R.clear(`user_ppe_${n.id}`),await ke(),L(!1),alert("PPE Status updated successfully!")}catch(t){console.error("Error saving PPE:",t),alert("Failed to save PPE status")}finally{W(!1)}},Ye=async()=>{if(!n){g("login");return}W(!0);try{const t=[],s=[];for(const a of V){const i=a.age==="<6m"?3:a.age==="6-12m"?9:a.age==="1-2y"?18:36,o=`Usage: ${a.usage}`;a.available?t.push({id:a.id||void 0,user_id:n.id,name:a.name,count:parseInt(a.count),condition:a.condition,age_months:i,details:o}):a.id&&s.push(a.id)}const r=[];t.length>0&&r.push(z.from("user_tools").upsert(t,{onConflict:"id",ignoreDuplicates:!1})),s.length>0&&r.push(z.from("user_tools").delete().in("id",s)),await Promise.all(r),R.clear(`user_tools_${n.id}`),await Ne(),L(!1),alert("Tools Status updated successfully!")}catch(t){console.error("Error saving Tools:",t),alert("Failed to save Tools status")}finally{W(!1)}},K=(t,s,r)=>{const a=[...T];a[t]={...a[t],[s]:r},te(a)},Z=(t,s,r)=>{const a=[...V];a[t]={...a[t],[s]:r},se(a)},q={en:{title:"Safety",tabs:{sops:"SOP",training:"90 Days Training",my_ppe:"My PPE",my_tools:"My Tools",report:"Report Incident"},sops:{title:"Standard Operating Procedures",categories:["High Voltage","Maintenance","Storm Safety","First Aid"]},training:{title:"90 Days Training Program",watch:"Watch Now"},my_ppe:{title:"My Personal Protective Equipment",addBtn:"Add New PPE",editBtn:"Edit PPE",empty:"No PPE items added yet.",fields:{name:"Item Name",count:"Quantity",age:"Age (Months)",condition:"Condition",details:"Details / Specs"},conditions:{Good:"Good",Fair:"Fair",Damaged:"Damaged",Expired:"Expired"},items:{"Safety Helmet":"Safety Helmet","Safety Shoes/Boots":"Safety Shoes/Boots","Insulated Gloves":"Insulated Gloves","Reflective Jacket":"Reflective Jacket","Safety Belt":"Safety Belt","Full Body Harness":"Full Body Harness","Voltage Detector":"Voltage Detector","Discharge Rod":"Discharge Rod","Safety Goggles":"Safety Goggles",Raincoat:"Raincoat","Torch/Emergency Light":"Torch/Emergency Light"}},my_tools:{title:"My Tools Checklist",addBtn:"Add New Tool",editBtn:"Edit Tool",empty:"No tools added yet.",fields:{name:"Tool Name",count:"Quantity",age:"Age (Months)",condition:"Condition",details:"Details / Specs"},items:{Pliers:"Pliers","Screwdriver Set":"Screwdriver Set",Wrench:"Wrench",Hammer:"Hammer",Tester:"Tester",Multimeter:"Multimeter","Wire Stripper":"Wire Stripper","Drill Machine":"Drill Machine",Ladder:"Ladder",Rope:"Rope"}},report:{title:"Report a Hazard",form:{location:"Location",type:"Hazard Type",desc:"Description",photo:"Upload Photo",submit:"Submit Report"}}},bn:{title:"à¦¸à§‡à¦«à¦Ÿà¦¿",tabs:{sops:"SOP",training:"à§¯à§¦ à¦¦à¦¿à¦¨à§‡à¦° à¦ªà§à¦°à¦¶à¦¿à¦•à§à¦·à¦£",my_ppe:"à¦†à¦®à¦¾à¦° à¦ªà¦¿à¦ªà¦¿à¦‡",my_tools:"à¦†à¦®à¦¾à¦° à¦Ÿà§à¦²à¦¸",report:"à¦°à¦¿à¦ªà§‹à¦°à§à¦Ÿ à¦•à¦°à§à¦¨"},sops:{title:"à¦¸à§à¦Ÿà§à¦¯à¦¾à¦¨à§à¦¡à¦¾à¦°à§à¦¡ à¦…à¦ªà¦¾à¦°à§‡à¦Ÿà¦¿à¦‚ à¦ªà§à¦°à¦¸à¦¿à¦¡à¦¿à¦‰à¦° (SOP)",categories:["à¦‰à¦šà§à¦š à¦­à§‹à¦²à§à¦Ÿà§‡à¦œ","à¦°à¦•à§à¦·à¦£à¦¾à¦¬à§‡à¦•à§à¦·à¦£","à¦à¦¡à¦¼ à¦¨à¦¿à¦°à¦¾à¦ªà¦¤à§à¦¤à¦¾","à¦ªà§à¦°à¦¾à¦¥à¦®à¦¿à¦• à¦šà¦¿à¦•à¦¿à§Žà¦¸à¦¾"]},training:{title:"à§¯à§¦ à¦¦à¦¿à¦¨à§‡à¦° à¦ªà§à¦°à¦¶à¦¿à¦•à§à¦·à¦£ à¦•à¦°à§à¦®à¦¸à§‚à¦šà¦¿",watch:"à¦à¦–à¦¨ à¦¦à§‡à¦–à§à¦¨"},my_ppe:{title:"à¦†à¦®à¦¾à¦° à¦¬à§à¦¯à¦•à§à¦¤à¦¿à¦—à¦¤ à¦¸à§à¦°à¦•à§à¦·à¦¾ à¦¸à¦°à¦žà§à¦œà¦¾à¦®",addBtn:"à¦¨à¦¤à§à¦¨ à¦ªà¦¿à¦ªà¦¿à¦‡ à¦¯à§‹à¦— à¦•à¦°à§à¦¨",editBtn:"à¦ªà¦¿à¦ªà¦¿à¦‡ à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨à¦¾ à¦•à¦°à§à¦¨",empty:"à¦à¦–à¦¨à¦“ à¦•à§‹à¦¨ à¦ªà¦¿à¦ªà¦¿à¦‡ à¦¯à§‹à¦— à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à¦¨à¦¿à¥¤",fields:{name:"à¦†à¦‡à¦Ÿà§‡à¦®à§‡à¦° à¦¨à¦¾à¦®",count:"à¦ªà¦°à¦¿à¦®à¦¾à¦£",age:"à¦¬à¦¯à¦¼à¦¸ (à¦®à¦¾à¦¸)",condition:"à¦…à¦¬à¦¸à§à¦¥à¦¾",details:"à¦¬à¦¿à¦¬à¦°à¦£"},conditions:{Good:"à¦­à¦¾à¦²à§‹",Fair:"à¦®à§‹à¦Ÿà¦¾à¦®à§à¦Ÿà¦¿",Damaged:"à¦•à§à¦·à¦¤à¦¿à¦—à§à¦°à¦¸à§à¦¤",Expired:"à¦®à§‡à¦¯à¦¼à¦¾à¦¦à§‹à¦¤à§à¦¤à§€à¦°à§à¦£"},items:{"Safety Helmet":"à¦¸à§‡à¦«à¦Ÿà¦¿ à¦¹à§‡à¦²à¦®à§‡à¦Ÿ","Safety Shoes/Boots":"à¦¸à§‡à¦«à¦Ÿà¦¿ à¦œà§à¦¤à§‹/à¦¬à§à¦Ÿ","Insulated Gloves":"à¦‡à¦¨à¦¸à§à¦²à§‡à¦Ÿà§‡à¦¡ à¦—à§à¦²à¦¾à¦­à¦¸","Reflective Jacket":"à¦°à¦¿à¦«à§à¦²à§‡à¦•à§à¦Ÿà¦¿à¦­ à¦œà§à¦¯à¦¾à¦•à§‡à¦Ÿ","Safety Belt":"à¦¸à§‡à¦«à¦Ÿà¦¿ à¦¬à§‡à¦²à§à¦Ÿ","Full Body Harness":"à¦«à§à¦² à¦¬à¦¡à¦¿ à¦¹à¦¾à¦°à¦¨à§‡à¦¸","Voltage Detector":"à¦­à§‹à¦²à§à¦Ÿà§‡à¦œ à¦¡à¦¿à¦Ÿà§‡à¦•à§à¦Ÿà¦°","Discharge Rod":"à¦¡à¦¿à¦¸à¦šà¦¾à¦°à§à¦œ à¦°à¦¡","Safety Goggles":"à¦¸à§‡à¦«à¦Ÿà¦¿ à¦—à¦—à¦²à¦¸",Raincoat:"à¦°à§‡à¦‡à¦¨à¦•à§‹à¦Ÿ","Torch/Emergency Light":"à¦Ÿà¦°à§à¦š/à¦œà¦°à§à¦°à§€ à¦†à¦²à§‹"}},my_tools:{title:"à¦†à¦®à¦¾à¦° à¦Ÿà§à¦²à¦¸ à¦šà§‡à¦•à¦²à¦¿à¦¸à§à¦Ÿ",addBtn:"à¦¨à¦¤à§à¦¨ à¦Ÿà§à¦² à¦¯à§‹à¦— à¦•à¦°à§à¦¨",editBtn:"à¦Ÿà§à¦² à¦¸à¦®à§à¦ªà¦¾à¦¦à¦¨à¦¾ à¦•à¦°à§à¦¨",empty:"à¦à¦–à¦¨à¦“ à¦•à§‹à¦¨ à¦Ÿà§à¦² à¦¯à§‹à¦— à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à¦¨à¦¿à¥¤",fields:{name:"à¦Ÿà§à¦²à§‡à¦° à¦¨à¦¾à¦®",count:"à¦ªà¦°à¦¿à¦®à¦¾à¦£",age:"à¦¬à¦¯à¦¼à¦¸ (à¦®à¦¾à¦¸)",condition:"à¦…à¦¬à¦¸à§à¦¥à¦¾",details:"à¦¬à¦¿à¦¬à¦°à¦£"},items:{Pliers:"à¦ªà§à¦²à¦¾à¦¯à¦¼à¦¾à¦°à§à¦¸","Screwdriver Set":"à¦¸à§à¦•à§à¦°à§ à¦¡à§à¦°à¦¾à¦‡à¦­à¦¾à¦° à¦¸à§‡à¦Ÿ",Wrench:"à¦°à§‡à¦žà§à¦š",Hammer:"à¦¹à¦¾à¦¤à§à¦¡à¦¼à¦¿",Tester:"à¦Ÿà§‡à¦¸à§à¦Ÿà¦¾à¦°",Multimeter:"à¦®à¦¾à¦²à§à¦Ÿà¦¿à¦®à¦¿à¦Ÿà¦¾à¦°","Wire Stripper":"à¦“à¦¯à¦¼à§à¦¯à¦¾à¦° à¦¸à§à¦Ÿà§à¦°à¦¿à¦ªà¦¾à¦°","Drill Machine":"à¦¡à§à¦°à¦¿à¦² à¦®à§‡à¦¶à¦¿à¦¨",Ladder:"à¦®à¦‡",Rope:"à¦¦à¦¡à¦¼à¦¿"}},report:{title:"à¦¬à¦¿à¦ªà¦¦ à¦°à¦¿à¦ªà§‹à¦°à§à¦Ÿ à¦•à¦°à§à¦¨",form:{location:"à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨",type:"à¦¬à¦¿à¦ªà¦¦à§‡à¦° à¦§à¦°à¦¨",desc:"à¦¬à¦¿à¦¬à¦°à¦£",photo:"à¦›à¦¬à¦¿ à¦†à¦ªà¦²à§‹à¦¡ à¦•à¦°à§à¦¨",submit:"à¦°à¦¿à¦ªà§‹à¦°à§à¦Ÿ à¦œà¦®à¦¾ à¦¦à¦¿à¦¨"}}}}[l];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`${h==="dashboard"?"compact-container":"max-w-7xl mx-auto px-4 sm:px-6"} py-6 sm:py-10 md:mb-6 transition-all duration-500`,children:[e.jsx("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsx("div",{children:e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900 dark:text-slate-100 tracking-tight",children:h==="dashboard"?l==="en"?f==="training"?"90 Days Training":"Safety":f==="training"?"à§¯à§¦ à¦¦à¦¿à¦¨à§‡à¦° à¦ªà§à¦°à¦¶à¦¿à¦•à§à¦·à¦£":q.title:((ye=q[h])==null?void 0:ye.title)||(h==="training"?l==="en"?"Training Program":"à¦ªà§à¦°à¦¶à¦¿à¦•à§à¦·à¦£ à¦•à¦°à§à¦®à¦¸à§‚à¦šà¦¿":"")})})}),Y&&e.jsxs("div",{className:"max-w-md mx-auto mb-8 p-6 bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-800 rounded-2xl text-center animate-fade-in",children:[e.jsx("div",{className:"text-3xl mb-3",children:"ðŸ“¡"}),e.jsx("h3",{className:"text-red-800 dark:text-red-400 font-bold mb-2",children:l==="en"?"Connection Error":"à¦•à¦¾à¦¨à§‡à¦•à¦¶à¦¨ à¦à¦°à¦°"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-500 mb-4",children:l==="en"?"Unable to load safety data. Please check your internet connection.":"à¦¸à§‡à¦«à¦Ÿà¦¿ à¦¡à¦¾à¦Ÿà¦¾ à¦²à§‹à¦¡ à¦•à¦°à¦¾ à¦¸à¦®à§à¦­à¦¬ à¦¹à¦¯à¦¼à¦¨à¦¿à¥¤ à¦†à¦ªà¦¨à¦¾à¦° à¦‡à¦¨à§à¦Ÿà¦¾à¦°à¦¨à§‡à¦Ÿ à¦•à¦¾à¦¨à§‡à¦•à¦¶à¦¨ à¦šà§‡à¦• à¦•à¦°à§à¦¨à¥¤"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-all shadow-lg shadow-red-600/20",children:l==="en"?"Retry":"à¦†à¦¬à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨"})]}),e.jsxs("div",{className:"animate-slide-down",children:[f!=="training"&&h==="dashboard"&&e.jsx(rt,{user:n,userProfile:x,language:l,setActiveTab:S,completedLessons:B,t:q,setCurrentView:g}),h==="sops"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-br from-orange-50 to-orange-100/50 dark:from-orange-900/10 dark:to-orange-900/5 rounded-2xl p-6 border border-orange-100 dark:border-orange-800/50 shadow-sm min-h-[220px] flex flex-col justify-center relative overflow-hidden group touch-pan-y",onTouchStart:t=>{const s=t.touches[0];t.currentTarget.dataset.touchStartX=s.clientX},onTouchEnd:t=>{const s=t.changedTouches[0],r=parseFloat(t.currentTarget.dataset.touchStartX),a=s.clientX;r-a>50&&je(),a-r>50&&we()},children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-200/20 dark:bg-orange-600/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-orange-200/20 dark:bg-orange-600/10 rounded-full blur-xl -ml-8 -mb-8 pointer-events-none"}),e.jsx("button",{onClick:we,className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/80 dark:bg-slate-800/80 hover:bg-white dark:hover:bg-slate-700 flex items-center justify-center border border-white/50 dark:border-slate-700 shadow-sm backdrop-blur-sm transition-all active:scale-95 z-20 opacity-60 hover:opacity-100 sm:opacity-0 sm:group-hover:opacity-100","aria-label":"Previous rule",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:je,className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/80 dark:bg-slate-800/80 hover:bg-white dark:hover:bg-slate-700 flex items-center justify-center border border-white/50 dark:border-slate-700 shadow-sm backdrop-blur-sm transition-all active:scale-95 z-20 opacity-60 hover:opacity-100 sm:opacity-0 sm:group-hover:opacity-100","aria-label":"Next rule",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center h-full px-8 sm:px-12 py-2",children:e.jsxs("div",{className:"max-w-xl text-center animate-fade-in-up",children:[e.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-900/30 text-2xl shadow-inner",children:"ðŸ’¡"}),e.jsx("p",{className:"text-slate-800 dark:text-slate-100 text-base sm:text-xl font-bold leading-relaxed tracking-tight",children:O[v]})]},v)}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 z-20",children:O.map((t,s)=>e.jsx("button",{onClick:()=>p(s),className:`h-1.5 rounded-full transition-all duration-300 ${s===v?"w-6 bg-orange-500 shadow-sm":"w-1.5 bg-orange-200 dark:bg-orange-800/50 hover:bg-orange-300"}`,"aria-label":`Go to rule ${s+1}`},s))})]}),(w==null?void 0:w.levels)&&e.jsx(e.Fragment,{children:w.levels.length>=5?e.jsxs(e.Fragment,{children:[e.jsx(st,{levels:w.levels.slice(0,5),onClick:k,language:l}),w.levels.slice(5).map((t,s)=>e.jsx(ze,{level:t,index:s+5,onClick:k},s+5))]}):w.levels.map((t,s)=>e.jsx(ze,{level:t,index:s,onClick:k},s))})]}),h==="training"&&e.jsx("div",{children:Ie?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-orange-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-slate-500",children:"Loading training content..."})]}):!I&&!u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ue.map(t=>e.jsx(at,{chapter:t,completedLessons:B,language:l,onClick:qe},t.number))}),n&&e.jsx("div",{className:"mt-12 flex justify-center pb-8",children:e.jsx("button",{onClick:()=>pe(!0),className:"group relative inline-flex items-center justify-center px-8 py-3.5 font-bold text-white transition-all duration-300 bg-slate-900 dark:bg-white dark:text-slate-900 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 dark:focus:ring-white shadow-xl hover:shadow-2xl hover:scale-[1.02] active:scale-95 border border-slate-800 dark:border-slate-200",children:e.jsxs("span",{className:"relative flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2 .712V17a1 1 0 001 1z"})}),e.jsx("span",{className:"text-lg tracking-tight",children:"View Achievement Certificate"})]})})})]}):I&&!u?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ie(null),className:"mb-6 flex items-center gap-2 text-orange-600 hover:text-orange-700 font-bold",children:["â† ",l==="en"?"Back to Chapters":"à¦…à¦§à§à¦¯à¦¾à¦¯à¦¼à§‡ à¦«à¦¿à¦°à§‡ à¦¯à¦¾à¦¨"]}),I.isFAQ?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-100 to-fuchsia-100 dark:from-violet-900/30 dark:to-fuchsia-900/30 p-6 rounded-2xl mb-6 border border-violet-200 dark:border-violet-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-violet-900 dark:text-violet-100 mb-2",children:I.content.title}),e.jsx("p",{className:"text-violet-700 dark:text-violet-300 mb-4",children:I.content.subtitle}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:l==="en"?"Search questions, answers, or tags...":"à¦ªà§à¦°à¦¶à§à¦¨, à¦‰à¦¤à§à¦¤à¦° à¦¬à¦¾ à¦Ÿà§à¦¯à¦¾à¦— à¦–à§à¦à¦œà§à¦¨...",value:X,onChange:t=>Be(t.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-violet-200 dark:border-violet-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-violet-500 focus:border-transparent outline-none shadow-sm"}),e.jsx("div",{className:"absolute left-3 top-3.5 text-violet-400",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),I.content.questions.filter(t=>{if(!X)return!0;const s=X.toLowerCase();return t.question.toLowerCase().includes(s)||t.answer.toLowerCase().includes(s)||t.tags.some(r=>r.toLowerCase().includes(s))}).map((t,s)=>e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-all",children:e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between p-4 cursor-pointer list-none",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-violet-100 dark:bg-violet-900/50 text-violet-600 dark:text-violet-400 flex items-center justify-center font-bold text-sm shrink-0",children:t.id.replace("q","")}),e.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:t.question})]}),e.jsx("span",{className:"transition group-open:rotate-180",children:e.jsx("svg",{fill:"none",height:"24",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",width:"24",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),e.jsxs("div",{className:"px-4 pb-4 pl-[3.25rem] text-slate-600 dark:text-slate-400 text-sm leading-relaxed border-t border-slate-100 dark:border-slate-700 pt-4 bg-slate-50/50 dark:bg-slate-900/30",children:[e.jsx("p",{children:t.answer}),t.image&&e.jsx("div",{className:"mt-4 rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700 shadow-sm max-w-md",children:e.jsx("img",{src:`/quizzes/faq_images/${t.image}`,alt:t.question,className:"w-full h-auto object-cover",loading:"lazy"})}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t.tags.map(r=>e.jsxs("span",{className:"px-2 py-1 rounded-md bg-slate-200 dark:bg-slate-700 text-xs text-slate-600 dark:text-slate-400 font-medium",children:["#",r]},r))})]})]})},t.id)),I.content.questions.filter(t=>{if(!X)return!0;const s=X.toLowerCase();return t.question.toLowerCase().includes(s)||t.answer.toLowerCase().includes(s)||t.tags.some(r=>r.toLowerCase().includes(s))}).length===0&&e.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ”"}),e.jsx("p",{children:l==="en"?"No results found":"à¦•à§‹à¦¨ à¦«à¦²à¦¾à¦«à¦² à¦ªà¦¾à¦“à¦¯à¦¼à¦¾ à¦¯à¦¾à¦¯à¦¼à¦¨à¦¿"})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.subchapters.map((t,s)=>{const r=Ge(t.chapterNum,t.subchapterNum),a=B.includes(t.level_id);return e.jsxs("div",{onClick:()=>{if(!n){g("login");return}r&&re(t)},className:`bg-white dark:bg-slate-800 p-3 rounded-lg border transition-all flex items-center gap-3 ${r?"border-slate-200 dark:border-slate-700 hover:border-orange-400 dark:hover:border-orange-600 hover:shadow-sm cursor-pointer":"border-slate-100 dark:border-slate-800 opacity-60 cursor-not-allowed"} ${a?"bg-emerald-50/30 dark:bg-emerald-900/10":""} group`,children:[e.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center text-sm font-bold flex-shrink-0 border ${a?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800":r?"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-900/30":"bg-slate-50 dark:bg-slate-800/50 text-slate-400 border-slate-100 dark:border-slate-700"}`,children:t.level_id}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider",children:t.badge_name}),a&&e.jsx("span",{className:"w-4 h-4 rounded-full bg-emerald-500 text-white flex items-center justify-center text-[10px]",children:"âœ“"}),!r&&e.jsx("span",{className:"text-[10px] text-slate-400",children:"ðŸ”’"})]}),e.jsx("h4",{className:`font-bold text-sm truncate ${r?"text-slate-900 dark:text-slate-100":"text-slate-400"}`,children:t.level_title})]}),r&&e.jsx("div",{className:"text-slate-300 dark:text-slate-600 group-hover:text-orange-500 transition-colors",children:"â†’"})]},t.level_id)})})]}):null}),h==="my_ppe"&&e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:q.my_ppe.title}),e.jsx("button",{onClick:()=>{y?Ve():L(!0)},className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all ${y?"bg-orange-100 text-orange-700 border border-orange-200":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600 hover:border-orange-300"}`,children:y?l==="en"?"Done":"à¦¸à¦®à§à¦ªà¦¨à§à¦¨":l==="en"?"Manage":"à¦®à§à¦¯à¦¾à¦¨à§‡à¦œ"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:M?e.jsx("div",{className:"p-8 text-center text-slate-400",children:"Loading PPE list..."}):T.map((t,s)=>e.jsx("div",{className:`p-3 sm:p-4 transition-colors ${t.available?"bg-orange-50/30 dark:bg-orange-900/10":""}`,children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[y&&e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:t.available,onChange:r=>K(s,"available",r.target.checked),className:"w-5 h-5 rounded border-slate-300 text-orange-600 focus:ring-orange-500"})}),e.jsxs("div",{className:"flex items-center gap-2 min-w-[140px] flex-1",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsx("span",{className:`text-sm font-bold ${t.available?"text-slate-900 dark:text-slate-100":"text-slate-400"}`,children:l==="bn"?q.my_ppe.items[t.name]:t.name})]}),t.available&&e.jsx("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto mt-2 sm:mt-0 ml-8 sm:ml-0",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:t.count,onChange:r=>K(s,"count",r.target.value),className:"w-12 px-1 py-1 text-xs border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900"})]}),e.jsxs("select",{value:t.condition,onChange:r=>K(s,"condition",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Damaged",children:"Damaged"})]}),e.jsxs("select",{value:t.age,onChange:r=>K(s,"age",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"<6m",children:"<6m"}),e.jsx("option",{value:"6-12m",children:"6-12m"}),e.jsx("option",{value:"1-2y",children:"1-2y"}),e.jsx("option",{value:">2y",children:">2y"})]}),e.jsxs("select",{value:t.usage,onChange:r=>K(s,"usage",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"Personal",children:"Personal"}),e.jsx("option",{value:"Shared",children:"Shared"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-500 dark:text-slate-400 bg-slate-100/50 dark:bg-slate-700/50 px-3 py-1 rounded-full",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase text-slate-400",children:"Qty:"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:t.count})]}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-600"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase text-slate-400",children:"Cond:"}),e.jsx("span",{className:`${t.condition==="Good"?"text-emerald-600":t.condition==="Fair"?"text-amber-600":"text-red-600"}`,children:t.condition})]}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-600"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase text-slate-400",children:"Age:"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:t.age})]})]})})]})},t.name))})]})}),h==="my_tools"&&e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:q.my_tools.title}),e.jsx("button",{onClick:()=>{y?Ye():L(!0)},className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all ${y?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600 hover:border-indigo-300"}`,children:y?l==="en"?"Done":"à¦¸à¦®à§à¦ªà¦¨à§à¦¨":l==="en"?"Manage":"à¦®à§à¦¯à¦¾à¦¨à§‡à¦œ"})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:M?e.jsx("div",{className:"p-8 text-center text-slate-400",children:"Loading Tools list..."}):V.map((t,s)=>e.jsx("div",{className:`p-3 sm:p-4 transition-colors ${t.available?"bg-indigo-50/30 dark:bg-indigo-900/10":""}`,children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[y&&e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:t.available,onChange:r=>Z(s,"available",r.target.checked),className:"w-5 h-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500"})}),e.jsxs("div",{className:"flex items-center gap-2 min-w-[140px] flex-1",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsx("span",{className:`text-sm font-bold ${t.available?"text-slate-900 dark:text-slate-100":"text-slate-400"}`,children:l==="bn"?q.my_tools.items[t.name]:t.name})]}),t.available&&e.jsx("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto mt-2 sm:mt-0 ml-8 sm:ml-0",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:t.count,onChange:r=>Z(s,"count",r.target.value),className:"w-12 px-1 py-1 text-xs border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900"})]}),e.jsxs("select",{value:t.condition,onChange:r=>Z(s,"condition",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Damaged",children:"Damaged"})]}),e.jsxs("select",{value:t.age,onChange:r=>Z(s,"age",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"<6m",children:"<6m"}),e.jsx("option",{value:"6-12m",children:"6-12m"}),e.jsx("option",{value:"1-2y",children:"1-2y"}),e.jsx("option",{value:">2y",children:">2y"})]}),e.jsxs("select",{value:t.usage,onChange:r=>Z(s,"usage",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"Personal",children:"Personal"}),e.jsx("option",{value:"Shared",children:"Shared"})]})]}):e.jsxs("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-500 dark:text-slate-400 bg-slate-100/50 dark:bg-slate-700/50 px-3 py-1 rounded-full",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase text-slate-400",children:"Qty:"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:t.count})]}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-600"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase text-slate-400",children:"Cond:"}),e.jsx("span",{className:`${t.condition==="Good"?"text-emerald-600":t.condition==="Fair"?"text-amber-600":"text-red-600"}`,children:t.condition})]}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-600"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase text-slate-400",children:"Age:"}),e.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:t.age})]})]})})]})},t.name))})]})})]})," "]})," ",u&&Me.createPortal(e.jsxs("div",{className:"fixed inset-0 top-14 md:bottom-0 z-[75] bg-slate-50 dark:bg-slate-900 overflow-y-auto animate-slide-up w-full",children:[e.jsxs("div",{className:"sticky top-0 z-50 bg-white/90 dark:bg-slate-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 px-4 py-3 flex items-center justify-between shadow-sm gap-3",children:[e.jsx("button",{onClick:()=>{re(null),window.scrollTo({top:0,behavior:"smooth"})},className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-600 dark:text-slate-400 hover:text-orange-600 dark:hover:text-orange-500 flex-shrink-0",title:l==="en"?"Back to Lessons":"à¦ªà¦¾à¦ à§‡ à¦«à¦¿à¦°à§‡ à¦¯à¦¾à¦¨",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex-1 text-center min-w-0",children:e.jsxs("h2",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 truncate",children:[u.level_id&&`${u.level_id}. `,u.level_title]})}),e.jsx("div",{className:"w-9 flex-shrink-0"})," "]}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 sm:py-8 pb-16",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-3xl p-6 sm:p-10 text-white mb-10 shadow-xl shadow-orange-500/20",children:[e.jsx("div",{className:"inline-block px-4 py-1.5 rounded-full bg-white/25 backdrop-blur-sm text-[11px] uppercase tracking-wider font-bold mb-5 border border-white/30",children:u.badge_name}),e.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 reading-content leading-snug",children:u.level_title}),e.jsxs("p",{className:"text-orange-100 text-sm sm:text-base font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-200"}),"Level ",u.level_id]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-50/50 dark:from-blue-950/30 dark:to-blue-900/20 border-l-4 border-blue-500 p-6 sm:p-8 rounded-r-2xl mb-10 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 dark:bg-blue-800 flex items-center justify-center text-2xl flex-shrink-0",children:"ðŸŽ¯"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-3 uppercase tracking-wider text-xs",children:l==="en"?"Mission Briefing":"à¦®à¦¿à¦¶à¦¨ à¦¬à§à¦°à¦¿à¦«à¦¿à¦‚"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 reading-content leading-relaxed text-base whitespace-pre-line",children:u.mission_briefing})]})]})}),e.jsx("div",{className:"space-y-10",children:(Ce=u.sections)==null?void 0:Ce.map((t,s)=>{var r;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 sm:p-10 shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition-shadow",children:[e.jsxs("h3",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-8 reading-content flex items-center gap-4",children:[e.jsx("span",{className:"w-2 h-8 bg-gradient-to-b from-orange-500 to-orange-400 rounded-full flex-shrink-0"}),t.title]}),e.jsx("div",{className:"space-y-10",children:(r=t.points)==null?void 0:r.map((a,i)=>e.jsxs("div",{className:"relative pl-7 border-l-2 border-orange-200 dark:border-orange-900/30",children:[e.jsx("div",{className:"absolute left-[-7px] top-1 w-3.5 h-3.5 rounded-full bg-orange-500 border-2 border-white dark:border-slate-800 shadow-sm"}),e.jsx("h4",{className:"font-bold text-slate-900 dark:text-slate-100 mb-4 reading-content text-lg sm:text-xl",children:a.item_name}),a.image_name&&e.jsxs("div",{className:"mb-6 rounded-2xl overflow-hidden border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("img",{src:`/quizzes/${a.image_name}`,alt:a.item_name,className:"w-full h-auto object-cover max-h-80",loading:"lazy"}),a.image_caption&&e.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 px-4 sm:px-5 py-3 border-t border-slate-100 dark:border-slate-700",children:e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 italic text-center font-medium",children:a.image_caption})})]}),e.jsxs("div",{className:"space-y-5",children:[a.specifications&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-50/50 dark:from-blue-950/20 dark:to-blue-900/10 p-5 rounded-2xl border border-blue-100 dark:border-blue-900/30 hover:border-blue-200 dark:hover:border-blue-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-blue-500 text-lg",children:"ðŸ“‹"}),e.jsx("p",{className:"text-[11px] font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider",children:l==="en"?"Details":"à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤"})]}),e.jsx("p",{className:"text-base text-slate-700 dark:text-slate-300 reading-content leading-relaxed whitespace-pre-line",children:a.specifications})]}),a.importance&&e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-50/50 dark:from-amber-950/20 dark:to-amber-900/10 p-5 rounded-2xl border-2 border-amber-200 dark:border-amber-900/30 hover:border-amber-300 dark:hover:border-amber-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-amber-500 text-lg",children:"ðŸ’¡"}),e.jsx("p",{className:"text-[11px] font-bold text-amber-700 dark:text-amber-400 uppercase tracking-wider",children:l==="en"?"Key Point":"à¦®à§‚à¦² à¦¬à¦¿à¦·à¦¯à¦¼"})]}),e.jsx("p",{className:"text-base text-slate-800 dark:text-slate-200 reading-content leading-relaxed font-semibold whitespace-pre-line",children:a.importance})]}),a.daily_check&&e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-50/50 dark:from-emerald-950/20 dark:to-emerald-900/10 p-5 rounded-2xl border border-emerald-100 dark:border-emerald-900/30 hover:border-emerald-200 dark:hover:border-emerald-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-emerald-500 text-lg",children:"âœ“"}),e.jsx("p",{className:"text-[11px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:l==="en"?"Quick Tip":"à¦ªà¦°à¦¾à¦®à¦°à§à¦¶"})]}),e.jsx("p",{className:"text-base text-slate-700 dark:text-slate-300 reading-content leading-relaxed whitespace-pre-line",children:a.daily_check})]})]})]},i))})]},s)})}),u.pro_tip&&e.jsxs("div",{className:"mt-12 bg-gradient-to-br from-emerald-500 via-emerald-500 to-teal-600 rounded-3xl p-8 sm:p-10 text-white shadow-lg shadow-emerald-500/25",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/25 backdrop-blur-sm flex items-center justify-center text-2xl",children:"ðŸ’¡"}),e.jsx("h3",{className:"text-2xl sm:text-3xl font-bold reading-content",children:u.pro_tip.title})]}),e.jsx("ul",{className:"space-y-5",children:(Se=u.pro_tip.content)==null?void 0:Se.map((t,s)=>e.jsxs("li",{className:"flex items-start gap-4 text-emerald-50 reading-content leading-relaxed text-base",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-white/25 flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"âœ“"}),e.jsx("span",{children:t})]},s))})]}),u.myth_buster&&e.jsxs("div",{className:"mt-12 bg-white dark:bg-slate-800 rounded-3xl p-6 sm:p-10 border-2 border-red-100 dark:border-red-900/30 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center text-2xl",children:"âš ï¸"}),e.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-red-700 dark:text-red-400 reading-content",children:u.myth_buster.title})]}),e.jsx("div",{className:"grid grid-cols-1 gap-5",children:(_e=u.myth_buster.myths)==null?void 0:_e.map((t,s)=>e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-50/50 dark:from-slate-900/50 dark:to-slate-900/30 rounded-2xl p-6 border border-slate-100 dark:border-slate-700 hover:border-red-200 dark:hover:border-red-800 transition-colors",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("p",{className:"text-[11px] font-bold text-red-600 dark:text-red-400 uppercase tracking-wider mb-2",children:l==="en"?"Myth":"à¦®à¦¿à¦¥"}),e.jsxs("p",{className:"text-base text-slate-700 dark:text-slate-300 italic reading-content leading-relaxed font-medium whitespace-pre-line",children:['"',t.myth,'"']})]}),e.jsxs("div",{className:"pt-5 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-[11px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider mb-2",children:l==="en"?"Reality":"à¦¬à¦¾à¦¸à§à¦¤à¦¬à¦¤à¦¾"}),e.jsx("p",{className:"text-base text-slate-700 dark:text-slate-300 reading-content leading-relaxed whitespace-pre-line",children:t.reality||t.fact})]})]},s))})]}),u.advanced_section&&e.jsxs("div",{className:"mt-12 bg-slate-900 rounded-3xl p-8 sm:p-10 text-white shadow-xl hover:shadow-2xl transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500 flex items-center justify-center text-2xl",children:"ðŸ”¬"}),e.jsx("h3",{className:"text-2xl sm:text-3xl font-bold reading-content",children:u.advanced_section.title})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:(Le=u.advanced_section.facts)==null?void 0:Le.map((t,s)=>e.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 sm:p-8 border border-white/10 hover:border-white/20 hover:bg-white/8 transition-all",children:[e.jsx("h4",{className:"font-bold text-indigo-300 mb-4 reading-content text-lg sm:text-xl",children:t.title}),e.jsx("p",{className:"text-slate-200 reading-content leading-relaxed text-base whitespace-pre-line",children:t.content})]},s))})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-slate-200 dark:border-slate-700",children:B.includes(u.level_id)?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"w-full px-8 py-4 rounded-2xl font-bold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 flex items-center justify-center gap-3 text-lg border border-emerald-200 dark:border-emerald-800",children:[e.jsx("span",{className:"text-xl",children:"âœ“"}),l==="en"?"Lesson Completed!":"à¦ªà¦¾à¦  à¦¸à¦®à§à¦ªà¦¨à§à¦¨!"]}),ce&&e.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border-2 border-yellow-200 dark:border-yellow-800 rounded-2xl flex items-center justify-center gap-3 animate-bounce shadow-lg shadow-yellow-500/10",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ†"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-black text-yellow-800 dark:text-yellow-400 leading-tight",children:l==="en"?`+${ce} Competition Points Earned!`:`+${ce} à¦•à¦®à§à¦ªà¦¿à¦Ÿà¦¿à¦¶à¦¨ à¦ªà¦¯à¦¼à§‡à¦¨à§à¦Ÿ à¦…à¦°à§à¦œà¦¿à¦¤ à¦¹à¦¯à¦¼à§‡à¦›à§‡!`}),e.jsx("p",{className:"text-[10px] font-bold text-yellow-600/70 dark:text-yellow-500/50 uppercase tracking-wider",children:l==="en"?"First Completion Bonus":"à¦ªà§à¦°à¦¥à¦® à¦¸à¦®à¦¾à¦ªà§à¦¤à¦¿ à¦¬à§‹à¦¨à¦¾à¦¸"})]})]}),e.jsxs("button",{onClick:()=>ve(u.level_id),className:"w-full px-8 py-4 rounded-2xl font-bold transition-all bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-500/20 flex items-center justify-center gap-3 text-lg active:scale-95",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“"}),l==="en"?"Practice Quiz":"à¦ªà§à¦°à§à¦¯à¦¾à¦•à¦Ÿà¦¿à¦¸ à¦•à§à¦‡à¦œ"]}),e.jsxs("button",{onClick:()=>{re(null),window.scrollTo({top:0,behavior:"smooth"})},className:"w-full px-8 py-4 rounded-2xl font-bold transition-all bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 hover:opacity-90 flex items-center justify-center gap-3 text-lg active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})}),l==="en"?"Back to Lessons":"à¦ªà¦¾à¦ à§‡ à¦«à¦¿à¦°à§‡ à¦¯à¦¾à¦¨"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>ve(u.level_id),className:"w-full px-8 py-4 rounded-2xl font-bold transition-all bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-3 text-lg active:scale-95",children:[e.jsx("span",{className:"text-xl",children:"âœ“"}),l==="en"?"Mark as Complete":"à¦¸à¦®à§à¦ªà¦¨à§à¦¨ à¦¹à¦¿à¦¸à¦¾à¦¬à§‡ à¦šà¦¿à¦¹à§à¦¨à¦¿à¦¤ à¦•à¦°à§à¦¨"]}),e.jsxs("button",{onClick:()=>{re(null),window.scrollTo({top:0,behavior:"smooth"})},className:"w-full mt-4 px-8 py-4 rounded-2xl font-bold transition-all bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 flex items-center justify-center gap-3 text-lg active:scale-95",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})}),l==="en"?"Back to Lessons":"à¦ªà¦¾à¦ à§‡ à¦«à¦¿à¦°à§‡ à¦¯à¦¾à¦¨"]})]})})]})]}),document.body),Me.createPortal(e.jsxs(e.Fragment,{children:[e.jsx(lt,{level:D,onClose:()=>k(null),language:l}),e.jsx(et,{isOpen:$e,onClose:()=>de(!1),onComplete:We,questions:Ae,language:l,isPractice:ae&&B.includes(ae)}),e.jsx(tt,{isOpen:Qe,onClose:()=>pe(!1),userName:(x==null?void 0:x.full_name)||((Te=n==null?void 0:n.user_metadata)==null?void 0:Te.full_name)||((Pe=n==null?void 0:n.email)==null?void 0:Pe.split("@")[0]),level:(x==null?void 0:x.training_level)||1,badgeName:(Ee=Je((x==null?void 0:x.training_level)||1))==null?void 0:Ee[l==="en"?"en":"bn"],date:new Date().toLocaleDateString(),certificateId:n==null?void 0:n.id})]}),document.body)]})}const lt=({level:l,onClose:n,language:c})=>l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-slate-100 dark:border-slate-700 animate-scale-in",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 p-4 sm:p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 flex items-center justify-center text-xl font-bold",children:l.level_number}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100 leading-tight",children:l.level_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:l.focus})]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/30",children:e.jsx("p",{className:`reading-content font-medium ${c==="bn"?"font-bengali":""}`,children:l.content.summary})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’¡"})," ",c==="en"?"Practical Tips":"à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à¦¿à¦• à¦Ÿà¦¿à¦ªà¦¸"]}),e.jsx("div",{className:"space-y-3",children:l.content.practical_tips.map((g,b)=>e.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 dark:bg-slate-900/30 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("span",{className:"text-orange-500 font-bold",children:"â€¢"}),e.jsx("p",{className:`reading-content text-sm ${c==="bn"?"font-bengali":""}`,children:g})]},b))})]}),l.content.myths_vs_facts&&l.content.myths_vs_facts.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"âš–ï¸"})," ",c==="en"?"Myths vs Facts":"à¦­à§à¦² à¦§à¦¾à¦°à¦£à¦¾ à¦¬à¦¨à¦¾à¦® à¦¬à¦¾à¦¸à§à¦¤à¦¬à¦¤à¦¾"]}),e.jsx("div",{className:"space-y-4",children:l.content.myths_vs_facts.map((g,b)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/20",children:[e.jsx("span",{className:"text-[10px] font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Myth"}),e.jsx("p",{className:`reading-content text-xs ${c==="bn"?"font-bengali":""}`,children:g.myth})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/10 rounded-lg border border-green-100 dark:border-green-900/20",children:[e.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-green-400 uppercase tracking-wider block mb-1",children:"Fact"}),e.jsx("p",{className:`reading-content text-xs font-medium ${c==="bn"?"font-bengali":""}`,children:g.fact})]})]},b))})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:e.jsx("button",{onClick:n,className:"w-full py-3 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-xl font-bold hover:bg-slate-800 dark:hover:bg-white transition-colors",children:c==="en"?"Got it":"à¦¬à§à¦à§‡à¦›à¦¿"})})]})}):null;export{ht as default};
