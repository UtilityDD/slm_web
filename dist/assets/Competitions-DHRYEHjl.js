import{r as o,s as w,j as e,g as j}from"./index-4ZAhsq7y.js";import{c as u}from"./cacheHelper-BlUM2QW1.js";function $e({language:d="en",user:n,setCurrentView:H}){var oe,ie;const[B,W]=o.useState(!0),[m,y]=o.useState(null),[b,R]=o.useState([]),[g,S]=o.useState(0),[z,F]=o.useState({}),[de,L]=o.useState(!1),[ce,Q]=o.useState(0),[T,J]=o.useState([]),[c,U]=o.useState(null),[ze,xe]=o.useState(""),[K,q]=o.useState(null),[v,Y]=o.useState(!1),[A,V]=o.useState(null),[ue,G]=o.useState(!1),[me,X]=o.useState([]),[be,I]=o.useState(!1),[Z,O]=o.useState(0),[he,ee]=o.useState(!1),[fe,te]=o.useState(navigator.onLine),[P,N]=o.useState(!1),[h,p]=o.useState(null),[k,C]=o.useState(null),[Le,ge]=o.useState(0),se=()=>new Date(Date.now()+Z),i={en:{title:"Competitions",weekly:"Weekly Challenge",hourly:"Hourly Quiz",play:"Play Now",questions:"Questions",mins:"Mins",points:"Pts",leaderboard:"Leaderboard",completed:"Quiz Completed!",score:"Your Score",close:"Close",loginReq:"Please login to participate",syncing:"Syncing your score...",waitingNetwork:"Waiting for network connection...",autoRetry:"Auto-retry enabled",previousPending:"Previous attempt pending sync",retryNow:"Retry Now",syncSuccess:"Score synced successfully!",syncFailed:"Sync failed. Please retry."},bn:{title:"à¦ªà§à¦°à¦¤à¦¿à¦¯à§‹à¦—à¦¿à¦¤à¦¾",weekly:"à¦¸à¦¾à¦ªà§à¦¤à¦¾à¦¹à¦¿à¦• à¦šà§à¦¯à¦¾à¦²à§‡à¦žà§à¦œ",hourly:"à¦˜à¦¨à§à¦Ÿà¦¾à¦­à¦¿à¦¤à§à¦¤à¦¿à¦• à¦•à§à¦‡à¦œ",play:"à¦–à§‡à¦²à§à¦¨",questions:"à¦ªà§à¦°à¦¶à§à¦¨",mins:"à¦®à¦¿à¦¨à¦¿à¦Ÿ",points:"à¦ªà¦¯à¦¼à§‡à¦¨à§à¦Ÿ",leaderboard:"à¦²à¦¿à¦¡à¦¾à¦°à¦¬à§‹à¦°à§à¦¡",completed:"à¦•à§à¦‡à¦œ à¦¸à¦®à§à¦ªà¦¨à§à¦¨!",score:"à¦†à¦ªà¦¨à¦¾à¦° à¦¸à§à¦•à§‹à¦°",close:"à¦¬à¦¨à§à¦§ à¦•à¦°à§à¦¨",loginReq:"à¦…à¦‚à¦¶à¦—à§à¦°à¦¹à¦£ à¦•à¦°à¦¤à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨",syncing:"à¦†à¦ªà¦¨à¦¾à¦° à¦¸à§à¦•à§‹à¦° à¦¸à¦¿à¦™à§à¦• à¦¹à¦šà§à¦›à§‡...",waitingNetwork:"à¦¨à§‡à¦Ÿà¦“à¦¯à¦¼à¦¾à¦°à§à¦• à¦¸à¦‚à¦¯à§‹à¦—à§‡à¦° à¦œà¦¨à§à¦¯ à¦…à¦ªà§‡à¦•à§à¦·à¦¾ à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡...",autoRetry:"à¦¸à§à¦¬à¦¯à¦¼à¦‚à¦•à§à¦°à¦¿à¦¯à¦¼ à¦ªà§à¦¨à¦ƒà¦šà§‡à¦·à§à¦Ÿà¦¾ à¦¸à¦•à§à¦°à¦¿à¦¯à¦¼",previousPending:"à¦ªà§‚à¦°à§à¦¬à¦¬à¦°à§à¦¤à§€ à¦ªà§à¦°à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦¸à¦¿à¦™à§à¦•à§‡à¦° à¦œà¦¨à§à¦¯ à¦…à¦ªà§‡à¦•à§à¦·à¦®à¦¾à¦£",retryNow:"à¦à¦–à¦¨à¦‡ à¦ªà§à¦¨à¦ƒà¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨",syncSuccess:"à¦¸à§à¦•à§‹à¦° à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ à¦¸à¦¿à¦™à§à¦• à¦¹à¦¯à¦¼à§‡à¦›à§‡!",syncFailed:"à¦¸à¦¿à¦™à§à¦• à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤ à¦…à¦¨à§à¦—à§à¦°à¦¹ à¦•à¦°à§‡ à¦ªà§à¦¨à¦ƒà¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨à¥¤"}}[d];o.useEffect(()=>{(async()=>{W(!0),ee(!1);try{await ke();const s=[ye()];n&&s.push($()),await Promise.all(s)}catch(s){console.error("Error loading competition data:",s)}finally{W(!1)}})()},[d,n]),o.useEffect(()=>{const t=()=>{const a=se(),r=59-a.getMinutes(),l=59-a.getSeconds();xe(`${r}:${l<10?"0":""}${l}`)};t();const s=setInterval(t,1e3);return()=>clearInterval(s)},[Z]),o.useEffect(()=>{const t=()=>{te(!0),console.log("Network restored, checking pending submissions..."),D()},s=()=>{te(!1),console.log("Network offline")};return window.addEventListener("online",t),window.addEventListener("offline",s),pe(),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}},[]);const pe=()=>{try{const t=localStorage.getItem("pending_quiz_submissions");if(t){const s=JSON.parse(t);s&&s.length>0&&(C(s[0]),navigator.onLine&&D())}}catch(t){console.error("Error checking pending submissions:",t)}},ve=t=>{try{const s=localStorage.getItem("pending_quiz_submissions"),a=s?JSON.parse(s):[];a.some(l=>l.quiz_id===t.quiz_id&&l.timestamp===t.timestamp)||(a.push(t),localStorage.setItem("pending_quiz_submissions",JSON.stringify(a)),C(t),console.log("Saved pending submission:",t))}catch(s){console.error("Error saving pending submission:",s)}},D=async()=>{try{const t=localStorage.getItem("pending_quiz_submissions");if(!t)return;const s=JSON.parse(t);if(s.length===0)return;N(!0),p("syncing");for(let a=0;a<s.length;a++){const r=s[a];await we(r,a)}}catch(t){console.error("Error processing pending queue:",t),p("failed")}finally{N(!1)}},we=async(t,s=0)=>{try{console.log(`Retrying submission ${s+1}:`,t),p("syncing");const{error:a}=await w.rpc("submit_quiz_result",{p_quiz_id:t.quiz_id,p_score:t.score});if(a)throw a;if(await je(t),p("success"),await $(!0),t.quiz_id===(c==null?void 0:c.id)){q(t.timestamp);const r=`last_attempt_${n.id}_${t.quiz_id}`;u.set(r,t.timestamp,5)}console.log("Successfully synced submission:",t)}catch(a){throw console.error("Retry failed:",a),p("failed"),ge(r=>r+1),a}},je=async t=>{try{const s=localStorage.getItem("pending_quiz_submissions");if(!s)return;const r=JSON.parse(s).filter(l=>!(l.quiz_id===t.quiz_id&&l.timestamp===t.timestamp));r.length>0?(localStorage.setItem("pending_quiz_submissions",JSON.stringify(r)),C(r[0]||null)):(localStorage.removeItem("pending_quiz_submissions"),C(null))}catch(s){console.error("Error clearing pending submission:",s)}},ke=async()=>{const t=u.get("server_time_offset");if(t!==null){O(t);return}try{const{data:s,error:a}=await w.rpc("get_server_time");if(s){const r=new Date(s).getTime(),l=Date.now(),x=r-l;O(x),u.set("server_time_offset",x,30)}else{const r=await fetch("https://worldtimeapi.org/api/timezone/Etc/UTC");if(r.ok){const l=await r.json(),x=new Date(l.datetime).getTime(),f=Date.now(),E=x-f;O(E),u.set("server_time_offset",E,30)}}}catch(s){console.error("Error fetching server time:",s)}},ye=async()=>{const t=`hourly_quiz_v2_${d}`,s=u.get(t);if(s){U(s);return}try{const r=await fetch(`/quizzes/${d==="en"?"hourly_challenge_en.json":"hourly_challenge.json"}`);if(r.ok){const l=await r.json();let x;Array.isArray(l)?x={id:"hourly-challenge",title:d==="en"?"Hourly Safety Challenge":"à¦ªà§à¦°à¦¤à¦¿ à¦˜à¦¨à§à¦Ÿà¦¾à¦¯à¦¼ à¦¸à§à¦°à¦•à§à¦·à¦¾ à¦šà§à¦¯à¦¾à¦²à§‡à¦žà§à¦œ",description:d==="en"?"Test your safety knowledge! New questions every hour.":"à¦†à¦ªà¦¨à¦¾à¦° à¦¸à§à¦°à¦•à§à¦·à¦¾ à¦œà§à¦žà¦¾à¦¨ à¦ªà¦°à§€à¦•à§à¦·à¦¾ à¦•à¦°à§à¦¨! à¦ªà§à¦°à¦¤à¦¿ à¦˜à¦¨à§à¦Ÿà¦¾à¦¯à¦¼ à¦¨à¦¤à§à¦¨ à¦ªà§à¦°à¦¶à§à¦¨à¥¤",duration_minutes:5,points_reward:50,questions:l.map((f,E)=>({id:`q-${E}`,question_text:f.questionText,options:f.options,correct_option_index:f.correctAnswerIndex})),isLocal:!0}:x={...l,isLocal:!0},U(x),u.set(t,x,10)}else console.error("Failed to fetch hourly quiz:",r.status)}catch(a){console.error("Error fetching hourly quiz:",a)}},re=async t=>{if(!n)return;const s=`last_attempt_${n.id}_${t}`,a=u.get(s);if(a){q(a);return}try{const{data:r,error:l}=await w.from("quiz_attempts").select("created_at").eq("user_id",n.id).eq("quiz_id",t).order("created_at",{ascending:!1}).limit(1);r&&r.length>0&&(q(r[0].created_at),u.set(s,r[0].created_at,5))}catch(r){console.error("Error fetching last attempt:",r)}};o.useEffect(()=>{n&&c&&re(c.id)},[n,c]);const M=async(t=!1)=>{if(!n)return;const s=`user_rank_${n.id}`;if(!t){const a=u.get(s);if(a){V(a);return}}try{const{data:a,error:r}=await w.from("leaderboard_view").select("score").eq("user_id",n.id).single();if(r||!a)return;const{count:l,error:x}=await w.from("leaderboard_view").select("*",{count:"exact",head:!0}).gt("score",a.score);if(!x){const f={rank:l+1,score:a.score};V(f),u.set(s,f,5)}}catch(a){console.error("Error fetching rank:",a)}},$=async(t=!1)=>{if(!t){const s=u.get("leaderboard_top_10_v2");if(s){J(s),n&&M();return}}try{const{data:s,error:a}=await w.from("leaderboard_view").select("*").order("score",{ascending:!1}).limit(10);if(a)throw a;const r=s.map(l=>({...l,points:l.score}));J(r||[]),u.set("leaderboard_top_10_v2",r||[],5),n&&M(t)}catch(s){console.error("Error fetching leaderboard:",s),ee(!0)}},ae=async()=>{I(!0),G(!0);const t=u.get("leaderboard_full_v2");if(t){X(t),I(!1);return}try{const{data:s,error:a}=await w.from("leaderboard_view").select("*").order("score",{ascending:!1}).limit(50);if(a)throw a;const r=s.map(l=>({...l,points:l.score}));X(r||[]),u.set("leaderboard_full_v2",r||[],5)}catch(s){console.error("Error fetching full leaderboard:",s)}finally{I(!1)}},le=async t=>{if(!n){H("login");return}if(k&&k.quiz_id===t.id){alert(i.previousPending+". "+(fe?i.retryNow:i.waitingNetwork));return}if(y(t),t.questions&&t.questions.length>0){const a=[...t.questions].sort(()=>.5-Math.random()).slice(0,5).map(r=>{if(!r.options||r.options.length===0)return r;const l=r.options[r.correct_option_index],x=[...r.options].sort(()=>.5-Math.random()),f=x.indexOf(l);return{...r,options:x,correct_option_index:f!==-1?f:r.correct_option_index}});R(a)}else R([]);S(0),F({}),L(!1),Q(0),Y(!1)},ne=()=>{const t=localStorage.getItem(`review_${c.id}`);if(!t)return;const s=JSON.parse(t);y(c),R(s.questions),F(s.answers),Q(s.score),Y(!0),L(!1),S(0)},Ne=(t,s)=>{F(a=>({...a,[t]:s}))},_e=async()=>{let t=0,s=0;b.forEach(r=>{z[r.id]===r.correct_option_index&&s++}),b.length>0&&(t=s*10),Q(t),L(!0);const a={timestamp:new Date().toISOString(),questions:b,answers:z,score:t};if(localStorage.setItem(`review_${m.id}`,JSON.stringify(a)),m&&m.id===(c==null?void 0:c.id)){q(a.timestamp);const r=`last_attempt_${n.id}_${m.id}`;u.set(r,a.timestamp,5)}N(!0),p("syncing");try{const{error:r}=await w.rpc("submit_quiz_result",{p_quiz_id:m.id||"unknown_quiz",p_score:t});if(r)throw r;p("success"),N(!1),await $(!0),await M(!0),m&&m.id&&(u.clear(`last_attempt_${n.id}_${m.id}`),re(m.id))}catch(r){console.error("Error saving result:",r),N(!1);const l={quiz_id:m.id||"unknown_quiz",user_id:n.id,score:t,timestamp:a.timestamp,questions:b,answers:z,retry_count:0};ve(l),navigator.onLine?(p("failed"),alert(i.syncFailed+" "+r.message)):(p("waiting"),alert(i.waitingNetwork+" "+i.autoRetry))}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"inline-block p-2.5 rounded-full bg-blue-100 text-blue-600 text-2xl mb-3",children:"ðŸ†"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-0.5",children:i.title})]}),e.jsx("div",{className:"max-w-md mx-auto mb-12",children:B?e.jsx(Se,{}):c&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-blue-200 dark:border-blue-800 shadow-sm text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-slate-900 dark:text-slate-100 mb-6 tracking-tight",children:["5 ",d==="en"?"Quizzes Every Hour!":"à¦•à§à¦‡à¦œ à¦ªà§à¦°à¦¤à¦¿ à¦˜à¦¨à§à¦Ÿà¦¾à¦¯à¦¼!"]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-slate-500 dark:text-slate-400",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-xl mb-1",children:"ðŸ“"}),e.jsxs("span",{className:"font-bold",children:["5 ",i.questions]})]}),e.jsx("div",{className:"w-px h-8 bg-slate-100 dark:bg-slate-700"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-xl mb-1",children:"ðŸ’Ž"}),e.jsxs("span",{className:"font-bold",children:["50 ",i.points]})]})]})]}),(P||k)&&e.jsx("div",{className:`mb-3 p-3 rounded-lg border ${h==="success"?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":h==="failed"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":h==="waiting"?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[P&&e.jsxs("svg",{className:"animate-spin h-4 w-4 text-blue-600 dark:text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsxs("div",{children:[e.jsx("div",{className:`text-xs font-medium ${h==="success"?"text-green-700 dark:text-green-300":h==="failed"?"text-red-700 dark:text-red-300":h==="waiting"?"text-yellow-700 dark:text-yellow-300":"text-blue-700 dark:text-blue-300"}`,children:h==="syncing"?i.syncing:h==="waiting"?i.waitingNetwork:h==="success"?i.syncSuccess:h==="failed"?i.syncFailed:i.syncing}),h==="waiting"&&e.jsx("div",{className:"text-[10px] text-yellow-600 dark:text-yellow-400 mt-0.5",children:i.autoRetry})]})]}),h==="failed"&&!P&&e.jsx("button",{onClick:D,className:"px-3 py-1 text-xs font-medium text-red-700 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/40 rounded transition-colors",children:i.retryNow})]})}),(()=>{if(!K)return e.jsxs("button",{onClick:()=>le(c),disabled:k&&k.quiz_id===c.id,className:`w-full py-3 ${k&&k.quiz_id===c.id?"bg-slate-300 dark:bg-slate-700 cursor-not-allowed text-slate-500 dark:text-slate-400":"bg-blue-600 hover:bg-blue-700 text-white"} font-bold rounded-lg transition-colors flex items-center justify-center gap-2`,children:[e.jsx("span",{children:i.play}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]});const t=new Date(K),s=se();if(t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()&&t.getHours()===s.getHours()){const r=59-s.getMinutes(),l=59-s.getSeconds(),x=`${r}:${l<10?"0":""}${l}`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Next Quiz In"}),e.jsx("div",{className:"text-2xl font-mono font-bold text-slate-700 dark:text-slate-300",children:x})]}),e.jsxs("button",{onClick:ne,className:"w-full py-3 rounded-lg font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-all text-sm flex items-center justify-center gap-2",children:[e.jsx("span",{children:"Review Last Attempt"}),e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]})]})}return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>le(c),className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx("span",{children:i.play}),e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),e.jsx("button",{onClick:ne,className:"w-full py-2 rounded-lg font-bold text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 transition-all text-xs",children:"Review Last Attempt"})]})})()]})}),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("h3",{className:"text-center font-bold text-slate-800 dark:text-slate-200 mb-6 flex items-center justify-center gap-2 text-sm",children:[e.jsx("span",{children:"ðŸ…"})," ",i.leaderboard]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden divide-y divide-slate-100 dark:divide-slate-700",children:B?e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(_,{}),e.jsx(_,{}),e.jsx(_,{}),e.jsx(_,{})]}):n?e.jsxs(e.Fragment,{children:[T.map((t,s)=>{var a;return e.jsxs("div",{className:"flex items-center p-3 sm:p-4 hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-colors",children:[e.jsxs("div",{className:"font-bold text-slate-300 w-6 text-sm",children:["#",s+1]}),e.jsx("div",{className:"flex-shrink-0 mr-3",children:e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-sm font-bold text-slate-600 dark:text-slate-400 overflow-hidden",children:t.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"",className:"w-full h-full object-cover"}):((a=t.full_name)==null?void 0:a[0])||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 truncate",children:t.full_name||"Anonymous"}),j(t.training_level)&&e.jsx("div",{className:`px-1.5 py-0.5 rounded-full text-[8px] font-bold border uppercase tracking-tight ${j(t.training_level).color}`,children:d==="en"?j(t.training_level).en:j(t.training_level).bn})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 truncate",children:t.district||"West Bengal"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm sm:text-base font-bold text-blue-600 dark:text-blue-400",children:t.points}),e.jsx("div",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:i.points})]})]},s)}),T.length===0&&e.jsx("div",{className:"p-8 text-center text-slate-400",children:he?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“¡"}),e.jsx("p",{className:"text-sm font-medium",children:d==="en"?"Unable to load leaderboard. Please check your connection.":"à¦²à¦¿à¦¡à¦¾à¦°à¦¬à§‹à¦°à§à¦¡ à¦²à§‹à¦¡ à¦•à¦°à¦¾ à¦¸à¦®à§à¦­à¦¬ à¦¹à¦¯à¦¼à¦¨à¦¿à¥¤ à¦†à¦ªà¦¨à¦¾à¦° à¦‡à¦¨à§à¦Ÿà¦¾à¦°à¦¨à§‡à¦Ÿ à¦•à¦¾à¦¨à§‡à¦•à¦¶à¦¨ à¦šà§‡à¦• à¦•à¦°à§à¦¨à¥¤"}),e.jsx("button",{onClick:()=>$(!0),className:"mt-2 text-xs text-blue-600 font-bold hover:underline",children:d==="en"?"Try Again":"à¦†à¦¬à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨"})]}):d==="en"?"No participants yet. Be the first!":"à¦à¦–à¦¨à¦“ à¦•à§‡à¦‰ à¦…à¦‚à¦¶à¦—à§à¦°à¦¹à¦£ à¦•à¦°à§‡à¦¨à¦¿à¥¤ à¦†à¦ªà¦¨à¦¿à¦‡ à¦ªà§à¦°à¦¥à¦® à¦¹à§‹à¦¨!"}),T.length>0&&e.jsx("div",{className:"p-3 text-center bg-slate-50 dark:bg-slate-900/30",children:e.jsx("button",{onClick:ae,className:"text-blue-600 dark:text-blue-400 font-bold hover:underline text-sm",children:"View Full Leaderboard"})})]}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-300 mb-2",children:d==="en"?"Login Required":"à¦²à¦—à¦‡à¦¨ à¦ªà§à¦°à¦¯à¦¼à§‹à¦œà¦¨"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:d==="en"?"Please login to view the leaderboard and compete with others.":"à¦²à¦¿à¦¡à¦¾à¦°à¦¬à§‹à¦°à§à¦¡ à¦¦à§‡à¦–à¦¤à§‡ à¦à¦¬à¦‚ à¦…à¦¨à§à¦¯à¦¦à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦ªà§à¦°à¦¤à¦¿à¦¯à§‹à¦—à¦¿à¦¤à¦¾ à¦•à¦°à¦¤à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨à¥¤"}),e.jsx("button",{onClick:()=>H("login"),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors text-sm",children:d==="en"?"Login Now":"à¦à¦–à¦¨à¦‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§à¦¨"})]})}),n&&A&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 p-4 shadow-2xl transform transition-transform duration-300 z-40 sm:hidden",children:e.jsxs("div",{className:"flex items-center justify-between max-w-sm mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xl font-bold text-slate-400",children:["#",A.rank]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:"You"}),e.jsxs("div",{className:"text-slate-500 text-xs",children:[A.score," pts"]})]})]}),e.jsx("button",{onClick:ae,className:"text-blue-600 text-sm font-bold",children:"View All"})]})})]}),ue&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-2xl rounded-xl max-h-[85vh] flex flex-col shadow-xl overflow-hidden border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Leaderboard"}),e.jsx("button",{onClick:()=>G(!1),className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"âœ•"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:be?e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading..."}):e.jsx("div",{className:"space-y-2",children:me.map((t,s)=>{var a;return e.jsxs("div",{className:`flex items-center p-3 rounded-lg border transition-all ${t.user_id===(n==null?void 0:n.id)?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700"}`,children:[e.jsxs("div",{className:`font-bold w-10 text-base ${s<3?"text-yellow-500":"text-slate-400"}`,children:["#",s+1]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-700 mr-3 overflow-hidden flex-shrink-0",children:t.avatar_url?e.jsx("img",{src:t.avatar_url,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400 font-bold",children:(a=t.full_name)==null?void 0:a[0]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`font-bold truncate text-sm ${t.user_id===(n==null?void 0:n.id)?"text-blue-700 dark:text-blue-400":"text-slate-800 dark:text-slate-200"}`,children:t.user_id===(n==null?void 0:n.id)?"You":t.full_name}),j(t.training_level)&&e.jsx("div",{className:`px-1.5 py-0.5 rounded-full text-[8px] font-bold border uppercase tracking-tight ${j(t.training_level).color}`,children:d==="en"?j(t.training_level).en:j(t.training_level).bn})]}),e.jsx("div",{className:"text-[10px] text-slate-500",children:t.district})]}),e.jsx("div",{className:`font-bold text-sm ${t.user_id===(n==null?void 0:n.id)?"text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400"}`,children:t.points})]},s)})})})]})}),m&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl w-full max-w-2xl p-6 sm:p-8 max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-700",children:de?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 rounded-full flex items-center justify-center text-4xl mx-auto mb-6",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:i.completed}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-8",children:i.score}),e.jsx("div",{className:"text-5xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:ce}),e.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-10",children:"Total Points Earned"}),e.jsx("button",{onClick:()=>{y(null),L(!1)},className:"w-full py-3 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-lg font-bold hover:bg-slate-800 dark:hover:bg-white transition-colors",children:i.close})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:m.title}),e.jsxs("p",{className:"text-xs text-slate-500",children:[i.questions," ",g+1," / ",b.length]})]}),e.jsx("button",{onClick:()=>y(null),className:"w-8 h-8 flex items-center justify-center rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"âœ•"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 h-1.5 rounded-full mb-6",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${(g+1)/b.length*100}%`}})}),e.jsx("h2",{className:`reading-content text-lg sm:text-xl font-bold mb-6 ${d==="bn"?"font-bengali":""}`,children:(oe=b[g])==null?void 0:oe.question_text}),e.jsx("div",{className:"space-y-2.5",children:(ie=b[g])==null?void 0:ie.options.map((t,s)=>{const a=z[b[g].id]===s,r=s===b[g].correct_option_index;let l="border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700 hover:bg-slate-50 dark:hover:bg-slate-900/50 text-slate-600 dark:text-slate-400";return v?r?l="border-green-500 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 font-bold":a&&!r?l="border-red-500 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400":l="border-slate-100 dark:border-slate-800 opacity-60":a&&(l="border-blue-600 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-bold"),e.jsxs("button",{onClick:()=>!v&&Ne(b[g].id,s),disabled:v,className:`w-full text-left p-3.5 rounded-lg border transition-all duration-200 ${l}`,children:[e.jsxs("span",{className:"mr-3 text-slate-400 font-mono",children:[String.fromCharCode(65+s),"."]}),e.jsx("span",{className:`reading-content text-sm sm:text-base ${d==="bn"?"font-bengali":""}`,children:t}),v&&r&&e.jsx("span",{className:"float-right text-green-600",children:"âœ“"}),v&&a&&!r&&e.jsx("span",{className:"float-right text-red-600",children:"âœ—"})]},s)})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{disabled:g===0,onClick:()=>S(t=>t-1),className:"text-slate-500 hover:text-slate-800 dark:text-slate-200 font-bold text-sm disabled:opacity-30 px-4",children:"â† Prev"}),g===b.length-1?e.jsx("button",{onClick:v?()=>y(null):_e,className:`px-6 py-2.5 rounded-lg font-bold text-sm transition-colors ${v?"bg-slate-800 dark:bg-slate-700 text-white hover:bg-slate-900 dark:hover:bg-slate-600":"bg-green-600 text-white hover:bg-green-700"}`,children:v?"Close Review":"Finish Quiz"}):e.jsx("button",{onClick:()=>S(t=>t+1),className:"px-6 py-2.5 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 transition-colors",children:"Next â†’"})]})]})})})]})}const Se=()=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-100 dark:border-slate-700 shadow-sm relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-slate-700 rounded-lg shimmer"}),e.jsx("div",{className:"h-6 w-32 bg-slate-100 dark:bg-slate-700 rounded shimmer"})]}),e.jsx("div",{className:"h-8 w-3/4 bg-slate-100 dark:bg-slate-700 rounded mb-6 shimmer"}),e.jsxs("div",{className:"flex justify-center gap-8 mb-8",children:[e.jsx("div",{className:"h-4 w-16 bg-slate-100 dark:bg-slate-700 rounded shimmer"}),e.jsx("div",{className:"h-4 w-16 bg-slate-100 dark:bg-slate-700 rounded shimmer"})]}),e.jsx("div",{className:"h-12 w-full bg-slate-100 dark:bg-slate-700 rounded-lg shimmer"})]}),_=()=>e.jsxs("div",{className:"flex items-center p-4 border-b border-slate-50 dark:border-slate-700 last:border-0",children:[e.jsx("div",{className:"w-6 h-4 bg-slate-100 dark:bg-slate-700 rounded shimmer mr-4"}),e.jsx("div",{className:"w-10 h-10 bg-slate-100 dark:bg-slate-700 rounded-full shimmer mr-4"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 w-32 bg-slate-100 dark:bg-slate-700 rounded shimmer"}),e.jsx("div",{className:"h-3 w-20 bg-slate-100 dark:bg-slate-700 rounded shimmer"})]}),e.jsx("div",{className:"h-6 w-12 bg-slate-100 dark:bg-slate-700 rounded shimmer"})]});export{$e as default};
