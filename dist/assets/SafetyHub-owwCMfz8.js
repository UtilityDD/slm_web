import{r as d,j as e,s as X,R as ve,g as je,c as Ie}from"./index-D1orBmBS.js";import{c as re}from"./cacheHelper-BlUM2QW1.js";const De=({isOpen:a,onClose:o,onComplete:x,questions:g=[],language:c="en"})=>{const[m,u]=d.useState(0),[p,L]=d.useState({}),[S,A]=d.useState(!1),[k,V]=d.useState(0),v={en:{title:"Chapter Quiz",question:"Question",result:"Quiz Result",completed:"Quiz Completed!",failed:"Pass Mark Not Reached",score:"You scored",outOf:"out of",required:"90% correct answers required to pass.",continue:"Continue to Next Lesson",tryAgain:"Try Again",readAgain:"Read Again",submit:"Submit Quiz",next:"Next Question"},bn:{title:"‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶ï‡ßÅ‡¶á‡¶ú",question:"‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®",result:"‡¶ï‡ßÅ‡¶á‡¶ú ‡¶´‡¶≤‡¶æ‡¶´‡¶≤",completed:"‡¶ï‡ßÅ‡¶á‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!",failed:"‡¶™‡¶æ‡¶∏ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶Ö‡¶∞‡ßç‡¶ú‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø",score:"‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞",outOf:"‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá",required:"‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ßØ‡ß¶% ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§",continue:"‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶™‡¶æ‡¶†‡ßá ‡¶Ø‡¶æ‡¶®",tryAgain:"‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®",readAgain:"‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶™‡ßú‡ßÅ‡¶®",submit:"‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®",next:"‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®"}}[c]||{},[T,J]=d.useState([]);if(d.useEffect(()=>{if(a&&g.length>0){const f=g.map(h=>{const N=[...h.options.map((j,M)=>({text:j,isCorrect:M===h.correctAnswerIndex}))].sort(()=>.5-Math.random()),W=N.findIndex(j=>j.isCorrect);return{...h,options:N.map(j=>j.text),correctAnswerIndex:W}});J(f),u(0),L({}),A(!1),V(0)}},[a,g]),!a||T.length===0)return null;const E=T[m],Q=T.length,D=Math.ceil(Q*.9),w=k>=D,R=f=>{L(h=>({...h,[m]:f}))},K=()=>{m<Q-1?u(f=>f+1):q()},q=()=>{let f=0;T.forEach((h,I)=>{p[I]===h.correctAnswerIndex&&f++}),V(f),A(!0)},F=()=>{w&&x(k)},B=()=>{const f=T.map(h=>{const N=[...h.options.map((j,M)=>({text:j,isCorrect:M===h.correctAnswerIndex}))].sort(()=>.5-Math.random()),W=N.findIndex(j=>j.isCorrect);return{...h,options:N.map(j=>j.text),correctAnswerIndex:W}});J(f),u(0),L({}),A(!1),V(0)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border border-slate-200 dark:border-slate-700 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:S?v.result:`${v.question} ${m+1}/${Q}`}),!S&&e.jsx("button",{onClick:o,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-4xl ${w?"bg-green-100 dark:bg-green-900/30 text-green-600":"bg-amber-100 dark:bg-amber-900/30 text-amber-600"}`,children:w?"üèÜ":"‚ö†Ô∏è"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:w?v.completed:v.failed}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:[v.score," ",e.jsx("span",{className:`font-bold text-xl ${w?"text-green-600":"text-amber-600"}`,children:k})," ",v.outOf," ",Q]}),!w&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:v.required}),e.jsx("div",{className:"space-y-3 mt-6",children:w?e.jsx("button",{onClick:F,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-green-600/20",children:v.continue}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:B,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-600/20",children:v.tryAgain}),e.jsx("button",{onClick:o,className:"w-full py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl transition-all hover:bg-slate-200 dark:hover:bg-slate-600",children:v.readAgain})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 leading-relaxed",children:E==null?void 0:E.questionText}),e.jsx("div",{className:"space-y-3",children:E==null?void 0:E.options.map((f,h)=>e.jsx("button",{onClick:()=>R(h),className:`w-full p-4 rounded-xl text-left transition-all border-2 ${p[m]===h?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-slate-100 dark:border-slate-700 hover:border-blue-200 dark:hover:border-blue-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 text-slate-600 dark:text-slate-400"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${p[m]===h?"border-blue-500 bg-blue-500 text-white":"border-slate-300 dark:border-slate-600"}`,children:p[m]===h&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{children:f})]})},h))})]})}),!S&&e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:e.jsx("button",{onClick:K,disabled:p[m]===void 0,className:`w-full py-3 rounded-xl font-bold transition-all ${p[m]!==void 0?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-600/20":"bg-slate-200 dark:bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:m===Q-1?v.submit:v.next})})]})})},ke=({isOpen:a,onClose:o,userName:x,level:g,badgeName:c,date:m})=>{const u=d.useRef(null);if(!a)return null;const p=()=>{u.current;const L="about:blank",A="Print"+new Date().getTime(),k=window.open(L,A,"left=50000,top=50000,width=0,height=0");k.document.write(`
            <html>
                <head>
                    <title>Certificate of Achievement</title>
                    <style>
                        @page { size: landscape; margin: 0; }
                        body { margin: 0; padding: 0; -webkit-print-color-adjust: exact; }
                        .certificate-container {
                            width: 100%;
                            height: 100vh;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            background-color: #f8fafc;
                            font-family: 'Times New Roman', serif;
                        }
                        .certificate-border {
                            width: 90%;
                            height: 85%;
                            padding: 20px;
                            border: 10px solid #1e293b;
                            position: relative;
                            background-color: white;
                            box-shadow: 0 0 20px rgba(0,0,0,0.1);
                        }
                        .certificate-inner-border {
                            width: 100%;
                            height: 100%;
                            border: 2px solid #cbd5e1;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            position: relative;
                        }
                        .header {
                            font-size: 48px;
                            font-weight: bold;
                            color: #1e293b;
                            margin-bottom: 20px;
                            text-transform: uppercase;
                            letter-spacing: 4px;
                        }
                        .sub-header {
                            font-size: 24px;
                            color: #64748b;
                            margin-bottom: 40px;
                            font-style: italic;
                        }
                        .recipient-name {
                            font-size: 56px;
                            font-weight: bold;
                            color: #0f172a;
                            margin: 20px 0;
                            border-bottom: 2px solid #e2e8f0;
                            padding: 0 40px 10px 40px;
                            font-family: 'Great Vibes', cursive, serif;
                        }
                        .description {
                            font-size: 20px;
                            color: #475569;
                            text-align: center;
                            max-width: 80%;
                            line-height: 1.6;
                            margin-bottom: 40px;
                        }
                        .badge-level {
                            font-size: 32px;
                            font-weight: bold;
                            color: #2563eb;
                            margin-bottom: 10px;
                        }
                        .footer {
                            width: 80%;
                            display: flex;
                            justify-content: space-between;
                            margin-top: 60px;
                        }
                        .signature-block {
                            text-align: center;
                            border-top: 1px solid #94a3b8;
                            padding-top: 10px;
                            width: 200px;
                        }
                        .signature-text {
                            font-size: 16px;
                            color: #64748b;
                        }
                        .seal {
                            position: absolute;
                            bottom: 40px;
                            right: 40px;
                            width: 100px;
                            height: 100px;
                            border-radius: 50%;
                            background: #e2e8f0;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            color: #1e293b;
                            font-weight: bold;
                            border: 4px double #1e293b;
                            transform: rotate(-15deg);
                        }
                    </style>
                </head>
                <body>
                    <div class="certificate-container">
                        <div class="certificate-border">
                            <div class="certificate-inner-border">
                                <div class="header">Certificate of Achievement</div>
                                <div class="sub-header">This is to certify that</div>
                                <div class="recipient-name">${x||"Valued Learner"}</div>
                                <div class="description">
                                    Has successfully demonstrated dedication to safety and professional development by achieving the level of
                                </div>
                                <div class="badge-level">${c||"Safety Trainee"}</div>
                                <div class="description">
                                    Level ${g||1}
                                </div>
                                <div class="footer">
                                    <div class="signature-block">
                                        <div class="signature-text">Date: ${m}</div>
                                    </div>
                                    <div class="signature-block">
                                        <div class="signature-text">Authorized Signature</div>
                                    </div>
                                </div>
                                <div class="seal">OFFICIAL</div>
                            </div>
                        </div>
                    </div>
                </body>
            </html>
        `),k.document.close(),k.focus(),setTimeout(()=>{k.print(),k.close()},250)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-800",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üéì"})," Professional Certificate"]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full transition-colors text-slate-500 dark:text-slate-400",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-950 flex justify-center",children:e.jsxs("div",{ref:u,className:"bg-white text-slate-900 p-8 shadow-lg border-8 border-double border-slate-800 w-full max-w-3xl aspect-[1.414/1] relative flex flex-col items-center justify-center text-center select-none transform transition-transform hover:scale-[1.01] duration-300",children:[e.jsx("div",{className:"absolute top-4 left-4 w-16 h-16 border-t-4 border-l-4 border-slate-800"}),e.jsx("div",{className:"absolute top-4 right-4 w-16 h-16 border-t-4 border-r-4 border-slate-800"}),e.jsx("div",{className:"absolute bottom-4 left-4 w-16 h-16 border-b-4 border-l-4 border-slate-800"}),e.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 border-b-4 border-r-4 border-slate-800"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-slate-800 mb-2 uppercase tracking-widest",children:"Certificate"}),e.jsx("h2",{className:"text-xl md:text-2xl font-serif text-slate-600 mb-8 italic",children:"of Achievement"}),e.jsx("p",{className:"text-lg text-slate-500 mb-4",children:"This is to certify that"}),e.jsx("div",{className:"text-3xl md:text-5xl font-serif font-bold text-slate-900 mb-6 border-b-2 border-slate-300 pb-2 px-8 min-w-[300px]",children:x||"Valued Learner"}),e.jsx("p",{className:"text-lg text-slate-500 mb-6 max-w-xl",children:"Has successfully demonstrated dedication to safety and professional development by achieving the level of"}),e.jsx("div",{className:"text-2xl md:text-4xl font-bold text-blue-700 mb-2 uppercase tracking-wide",children:c||"Safety Trainee"}),e.jsxs("div",{className:"text-lg text-slate-600 mb-12",children:["Level ",g||1]}),e.jsxs("div",{className:"w-full flex justify-between items-end px-12 mt-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-serif text-slate-700 border-t border-slate-400 pt-2 px-4 min-w-[150px]",children:m}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Date"})]}),e.jsx("div",{className:"w-24 h-24 bg-yellow-400 rounded-full flex items-center justify-center shadow-inner border-4 border-yellow-600 relative",children:e.jsx("div",{className:"w-20 h-20 border-2 border-dashed border-yellow-700 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-yellow-800 font-bold text-xs transform -rotate-12",children:["OFFICIAL",e.jsx("br",{}),"CERTIFIED"]})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-serif text-slate-700 border-t border-slate-400 pt-2 px-4 min-w-[150px]",children:"Safety Hub"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Authorized Signature"})]})]})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 flex justify-end gap-3",children:[e.jsx("button",{onClick:o,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Close"}),e.jsxs("button",{onClick:p,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg shadow-blue-500/30 flex items-center gap-2 transition-all hover:scale-105 active:scale-95",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download / Print"]})]})]})})},Re=ve.memo(({level:a,index:o,onClick:x})=>e.jsxs("div",{onClick:()=>x(a),className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:border-orange-300 dark:hover:border-orange-700 hover:shadow-md transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-600 text-white flex items-center justify-center text-lg font-bold shadow-md shadow-orange-500/20 group-hover:scale-110 transition-transform",children:o+1}),e.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"‚Üí"})]}),e.jsx("h3",{className:"font-bold text-base text-slate-900 dark:text-slate-100 mb-0.5",children:a.level_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.focus})]})),qe=ve.memo(({chapter:a,completedLessons:o,language:x,onClick:g})=>{const c=a.number===10,m=o.filter(p=>p&&p.toString().startsWith(`${a.number}.`)).length,u=a.count>0?Math.min(100,Math.round(m/a.count*100)):0;return e.jsxs("div",{onClick:()=>g(a),className:`p-5 rounded-xl border transition-all cursor-pointer group relative overflow-hidden ${c?"bg-gradient-to-br from-violet-50 to-fuchsia-50 dark:from-violet-900/20 dark:to-fuchsia-900/20 border-violet-200 dark:border-violet-700 hover:border-violet-400 dark:hover:border-violet-500 shadow-sm hover:shadow-md":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-orange-400 dark:hover:border-orange-600 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg font-bold border ${c?"bg-violet-100 dark:bg-violet-900/40 text-violet-600 dark:text-violet-300 border-violet-200 dark:border-violet-800":"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-900/50"}`,children:c?"?":a.number}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold leading-tight transition-colors ${c?"text-violet-900 dark:text-violet-100 group-hover:text-violet-700 dark:group-hover:text-violet-300":"text-slate-900 dark:text-slate-100 group-hover:text-orange-600 dark:group-hover:text-orange-400"}`,children:a.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:c?x==="en"?"Always Unlocked":"‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶®‡ßç‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§":`${a.count} ${x==="en"?"Lessons":"‡¶™‡¶æ‡¶†"}`})]})]}),!c&&u===100&&e.jsx("div",{className:"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider",children:x==="en"?"Done":"‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®"}),c&&e.jsx("div",{className:"text-violet-500 bg-violet-50 dark:bg-violet-900/20 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider",children:"FAQ"})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${u===100?"bg-emerald-500":"bg-orange-500"}`,style:{width:`${u}%`}})}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5 text-right",children:[u,"% ",x==="en"?"Complete":"‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®"]})]}),c&&e.jsx("p",{className:"text-[10px] text-violet-400 dark:text-violet-500 mt-2 italic",children:x==="en"?"Reference Guide":"‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ó‡¶æ‡¶á‡¶°"})]})});function He({language:a="en",user:o,setCurrentView:x,onProgressUpdate:g}){var me,he,be,ue,pe,ge,fe;const[c,m]=d.useState("protocols"),[u,p]=d.useState([]),[L,S]=d.useState(!1),[A,k]=d.useState(!1),[V,v]=d.useState(null),[T,J]=d.useState(null);d.useEffect(()=>{(async()=>{if(o)try{const{data:s,error:r}=await X.from("profiles").select("full_name").eq("id",o.id).single();if(r)throw r;s&&J(s)}catch(s){console.error("Error fetching user profile:",s)}})()},[o]);const[E,Q]=d.useState({name:"",age_months:"",condition:"Good",details:"",count:1}),[D,w]=d.useState([]),[R,K]=d.useState(!1),[q,F]=d.useState(0),[B,f]=d.useState(null),[h,I]=d.useState(null),[N,W]=d.useState(null),[j,M]=d.useState(!1),[we,Z]=d.useState(!1),[Ne,ye]=d.useState([]),[ae,le]=d.useState(null),[Ce,Se]=d.useState({}),[oe,_e]=d.useState([]),[_,ee]=d.useState(null),[We,Oe]=d.useState(null),[b,te]=d.useState(null),[Pe,O]=d.useState(!1),[$,ne]=d.useState([]),[G,Le]=d.useState(""),[Ee,de]=d.useState(!1);d.useEffect(()=>{if(o){const t=localStorage.getItem(`training_progress_${o.id}`);t&&ne(JSON.parse(t))}},[o]);const Me=(t,s)=>{if(s===1)return!0;const r=`${t}.${s-1}`;return $.includes(r)},Y=t=>{if(!$.includes(t)){const s=[...$,t];if(ne(s),o){localStorage.setItem(`training_progress_${o.id}`,JSON.stringify(s));const r=Ie(s,oe);X.from("profiles").update({training_level:r}).eq("id",o.id).then(({error:l})=>{l&&console.error("Error syncing training level:",l)})}g&&g(s)}Z(!1),le(null)},$e=async t=>{if($.includes(t))return;const s=`questions_${t.replace(".","_")}.json`;try{const r=await fetch(`/quizzes/${s}`);if(!r.ok){Y(t);return}const l=await r.json();if(l&&l.length>0){const i=Ce[t]||[],n=l.filter(C=>!i.includes(C.questionText)),H=l.filter(C=>i.includes(C.questionText));let P=[];if(n.length>=8){const C=[...n].sort(()=>.5-Math.random()),se=[...H].sort(()=>.5-Math.random());P=[...C.slice(0,8),...se.slice(0,2)]}else{const C=[...H].sort(()=>.5-Math.random());P=[...n,...C.slice(0,Math.max(0,10-n.length))]}P=P.sort(()=>.5-Math.random()).slice(0,10),Se(C=>({...C,[t]:P.map(se=>se.questionText)})),ye(P),le(t),Z(!0)}else Y(t)}catch(r){console.error("Error loading quiz:",r),Y(t)}},ze=t=>{ae&&Y(ae)},Ae=[{rule:a==="en"?"Min. Ground Clearance for LT line is 15 ft./ 4.6 meter.":"‡¶è‡¶≤‡¶ü‡¶ø ‡¶≤‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡ßç‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶π‡¶≤ ‡ßß‡ß´ ‡¶´‡ßÅ‡¶ü/ ‡ß™.‡ß¨ ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡•§",icon:"üìè",color:"from-blue-600 to-indigo-600"},{rule:a==="en"?"Wear PPE -> Shut down -> Earthing -> Discharge -> Work.":"‡¶™‡¶ø‡¶™‡¶ø‡¶á ‡¶™‡¶∞‡ßÅ‡¶® -> ‡¶∂‡¶æ‡¶ü ‡¶°‡¶æ‡¶â‡¶® -> ‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶Ç -> ‡¶°‡¶ø‡¶∏‡¶ö‡¶æ‡¶∞‡ßç‡¶ú -> ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",icon:"‚ö°",color:"from-orange-600 to-red-600"},{rule:a==="en"?"Always use a safety belt and helmet while working at height.":"‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ‡¶Ø‡¶º ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡¶∞‡ßç‡¶¨‡¶¶‡¶æ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶¨‡ßá‡¶≤‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶π‡ßá‡¶≤‡¶Æ‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",icon:"üßó",color:"from-emerald-600 to-teal-600"},{rule:a==="en"?"Check tools for damage before starting any maintenance work.":"‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡¶æ‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶∏‡¶∞‡¶û‡ßç‡¶ú‡¶æ‡¶Æ‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶ï‡ßç‡¶∑‡¶§‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",icon:"üîß",color:"from-slate-700 to-slate-900"}],z=(N==null?void 0:N.rules)||Ae.map(t=>t.rule);d.useEffect(()=>{const t=setInterval(()=>{F(s=>(s+1)%z.length)},5e3);return()=>clearInterval(t)},[z.length]),d.useEffect(()=>{const t=async()=>{M(!1);try{const i=await fetch(`/quizzes/${a==="en"?"protocol_en.json":"protocol.json"}`);if(!i.ok)throw new Error("Failed to fetch protocols");const n=await i.json();f(n)}catch(l){console.error("Error fetching protocols:",l),M(!0)}},s=async()=>{try{const i=await fetch(`/quizzes/${a==="en"?"carousol_en.json":"carousol.json"}`);if(!i.ok)throw new Error("Failed to fetch carousel");const n=await i.json();W(n)}catch(l){console.error("Error fetching carousel data:",l)}},r=async()=>{try{O(!0);const l=await fetch("/quizzes/training_manifest.json");if(l.ok){const i=await l.json();_e(i)}else throw new Error("Manifest not found")}catch(l){console.error("Error fetching training chapters:",l),M(!0)}finally{O(!1)}};t(),s(),r()},[a]);const Te=async t=>{if(O(!0),t.number===10){try{const s=await fetch("/quizzes/chapter_10_qa.json");if(s.ok){const r=await s.json();ee({...t,isFAQ:!0,content:r})}}catch(s){console.error("Error loading FAQ chapter:",s)}finally{O(!1)}return}try{const s=[];for(let i=1;i<=t.count;i++)s.push(fetch(`/quizzes/chapter_${t.number}_${i}.json`).then(n=>n.ok?n.json():null).catch(()=>null));const l=(await Promise.all(s)).map((i,n)=>i?{...i,chapterNum:t.number,subchapterNum:n+1}:null).filter(Boolean);ee({...t,subchapters:l})}catch(s){console.error("Error loading chapter:",s)}finally{O(!1)}},ie=()=>{F(t=>(t+1)%z.length)},ce=()=>{F(t=>(t-1+z.length)%z.length)},Qe=[{name:"Safety Helmet",icon:"ü™ñ"},{name:"Safety Shoes/Boots",icon:"ü•æ"},{name:"Insulated Gloves",icon:"üß§"},{name:"Reflective Jacket",icon:"ü¶∫"},{name:"Safety Belt",icon:"üßó"},{name:"Full Body Harness",icon:"üßó‚Äç‚ôÇÔ∏è"},{name:"Voltage Detector",icon:"üîå"},{name:"Discharge Rod",icon:"ü¶Ø"},{name:"Safety Goggles",icon:"ü•Ω"},{name:"Raincoat",icon:"üß•"},{name:"Torch/Emergency Light",icon:"üî¶"}];d.useEffect(()=>{c==="my_ppe"&&o&&xe()},[c,o]);const xe=async()=>{if(!o)return;const t=`user_ppe_${o.id}`;let r=re.get(t);if(!r){S(!0);try{const{data:i,error:n}=await X.from("user_ppe").select("*").order("created_at",{ascending:!1});if(n)throw n;r=i||[],re.set(t,r,10)}catch(i){console.error("Error fetching PPE:",i),r=[]}finally{S(!1)}}p(r);const l=Qe.map(i=>{var H;const n=r.find(P=>P.name===i.name);return{...i,available:!!n,id:(n==null?void 0:n.id)||null,count:(n==null?void 0:n.count)||1,condition:(n==null?void 0:n.condition)||"Good",age:n!=null&&n.age_months?n.age_months<=6?"<6m":n.age_months<=12?"6-12m":n.age_months<=24?"1-2y":">2y":"<6m",usage:(H=n==null?void 0:n.details)!=null&&H.includes("Usage:")?n.details.split("Usage:")[1].trim():"Personal"}});w(l)},Fe=async()=>{if(!o){x("login");return}K(!0);try{const t=[],s=[];for(const l of D){const i=l.age==="<6m"?3:l.age==="6-12m"?9:l.age==="1-2y"?18:36,n=`Usage: ${l.usage}`;l.available?t.push({id:l.id||void 0,user_id:o.id,name:l.name,count:parseInt(l.count),condition:l.condition,age_months:i,details:n}):l.id&&s.push(l.id)}const r=[];t.length>0&&r.push(X.from("user_ppe").upsert(t,{onConflict:"id",ignoreDuplicates:!1})),s.length>0&&r.push(X.from("user_ppe").delete().in("id",s)),await Promise.all(r),re.clear(`user_ppe_${o.id}`),await xe(),alert("PPE Status updated successfully!")}catch(t){console.error("Error saving PPE:",t),alert("Failed to save PPE status")}finally{K(!1)}},U=(t,s,r)=>{const l=[...D];l[t]={...l[t],[s]:r},w(l)},y={en:{title:"Safety Hub",tabs:{protocols:"Protocols",training:"90 Days Training",my_ppe:"My PPE",report:"Report Incident"},protocols:{title:"Standard Operating Procedures",categories:["High Voltage","Maintenance","Storm Safety","First Aid"]},training:{title:"90 Days Training Program",watch:"Watch Now"},my_ppe:{title:"My Personal Protective Equipment",addBtn:"Add New PPE",editBtn:"Edit PPE",empty:"No PPE items added yet.",fields:{name:"Item Name",count:"Quantity",age:"Age (Months)",condition:"Condition",details:"Details / Specs"},conditions:{Good:"Good",Fair:"Fair",Damaged:"Damaged",Expired:"Expired"}},report:{title:"Report a Hazard",form:{location:"Location",type:"Hazard Type",desc:"Description",photo:"Upload Photo",submit:"Submit Report"}}},bn:{title:"‡¶∏‡ßá‡¶´‡¶ü‡¶ø ‡¶π‡¶æ‡¶¨",tabs:{protocols:"‡¶™‡ßç‡¶∞‡ßã‡¶ü‡ßã‡¶ï‡¶≤",training:"‡ßØ‡ß¶ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶£",my_ppe:"‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶ø‡¶™‡¶ø‡¶á",report:"‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®"},protocols:{title:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶° ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶™‡ßç‡¶∞‡¶∏‡¶ø‡¶°‡¶ø‡¶â‡¶∞ (SOP)",categories:["‡¶â‡¶ö‡ßç‡¶ö ‡¶≠‡ßã‡¶≤‡ßç‡¶ü‡ßá‡¶ú","‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡¶æ‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£","‡¶ù‡¶°‡¶º ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ","‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ"]},training:{title:"‡ßØ‡ß¶ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßç‡¶Æ‡¶∏‡ßÇ‡¶ö‡¶ø",watch:"‡¶è‡¶ñ‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®"},my_ppe:{title:"‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶∞‡¶û‡ßç‡¶ú‡¶æ‡¶Æ",addBtn:"‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶ø‡¶™‡¶ø‡¶á ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®",editBtn:"‡¶™‡¶ø‡¶™‡¶ø‡¶á ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®",empty:"‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶® ‡¶™‡¶ø‡¶™‡¶ø‡¶á ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§",fields:{name:"‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ",count:"‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£",age:"‡¶¨‡¶Ø‡¶º‡¶∏ (‡¶Æ‡¶æ‡¶∏)",condition:"‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ",details:"‡¶¨‡¶ø‡¶¨‡¶∞‡¶£"},conditions:{Good:"‡¶≠‡¶æ‡¶≤‡ßã",Fair:"‡¶Æ‡ßã‡¶ü‡¶æ‡¶Æ‡ßÅ‡¶ü‡¶ø",Damaged:"‡¶ï‡ßç‡¶∑‡¶§‡¶ø‡¶ó‡ßç‡¶∞‡¶∏‡ßç‡¶§",Expired:"‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£"}},report:{title:"‡¶¨‡¶ø‡¶™‡¶¶ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®",form:{location:"‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®",type:"‡¶¨‡¶ø‡¶™‡¶¶‡ßá‡¶∞ ‡¶ß‡¶∞‡¶®",desc:"‡¶¨‡¶ø‡¶¨‡¶∞‡¶£",photo:"‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®",submit:"‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®"}}}}[a];return e.jsxs("div",{className:"compact-container py-6 sm:py-10 mb-20",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"inline-block p-2.5 rounded-full bg-orange-100 text-orange-600 text-2xl mb-3",children:"ü¶∫"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-0.5",children:a==="en"?e.jsxs(e.Fragment,{children:["Safety ",e.jsx("span",{className:"text-orange-600",children:"Hub"})]}):e.jsx(e.Fragment,{children:y.title})})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:["protocols","training","my_ppe","report"].map(t=>e.jsx("button",{onClick:()=>m(t),className:`px-5 py-2.5 rounded-xl text-xs font-bold transition-all ${c===t?"bg-orange-600 text-white shadow-lg shadow-orange-500/20":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 border border-slate-200 dark:border-slate-700"}`,children:y.tabs[t]},t))}),j&&e.jsxs("div",{className:"max-w-md mx-auto mb-8 p-6 bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-800 rounded-2xl text-center animate-fade-in",children:[e.jsx("div",{className:"text-3xl mb-3",children:"üì°"}),e.jsx("h3",{className:"text-red-800 dark:text-red-400 font-bold mb-2",children:a==="en"?"Connection Error":"‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶è‡¶∞‡¶∞"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-500 mb-4",children:a==="en"?"Unable to load safety data. Please check your internet connection.":"‡¶∏‡ßá‡¶´‡¶ü‡¶ø ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-all shadow-lg shadow-red-600/20",children:a==="en"?"Retry":"‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®"})]}),e.jsxs("div",{className:"animate-slide-down",children:[c==="protocols"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-br from-orange-50 to-orange-100/50 dark:from-orange-900/10 dark:to-orange-900/5 rounded-2xl p-6 border border-orange-100 dark:border-orange-800/50 shadow-sm min-h-[220px] flex flex-col justify-center relative overflow-hidden group touch-pan-y",onTouchStart:t=>{const s=t.touches[0];t.currentTarget.dataset.touchStartX=s.clientX},onTouchEnd:t=>{const s=t.changedTouches[0],r=parseFloat(t.currentTarget.dataset.touchStartX),l=s.clientX;r-l>50&&ie(),l-r>50&&ce()},children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-200/20 dark:bg-orange-600/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-orange-200/20 dark:bg-orange-600/10 rounded-full blur-xl -ml-8 -mb-8 pointer-events-none"}),e.jsx("button",{onClick:ce,className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/80 dark:bg-slate-800/80 hover:bg-white dark:hover:bg-slate-700 flex items-center justify-center border border-white/50 dark:border-slate-700 shadow-sm backdrop-blur-sm transition-all active:scale-95 z-20 opacity-60 hover:opacity-100 sm:opacity-0 sm:group-hover:opacity-100","aria-label":"Previous rule",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:ie,className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/80 dark:bg-slate-800/80 hover:bg-white dark:hover:bg-slate-700 flex items-center justify-center border border-white/50 dark:border-slate-700 shadow-sm backdrop-blur-sm transition-all active:scale-95 z-20 opacity-60 hover:opacity-100 sm:opacity-0 sm:group-hover:opacity-100","aria-label":"Next rule",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center h-full px-8 sm:px-12 py-2",children:e.jsxs("div",{className:"max-w-xl text-center animate-fade-in-up",children:[e.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-900/30 text-2xl shadow-inner",children:"üí°"}),e.jsx("p",{className:"text-slate-800 dark:text-slate-100 text-base sm:text-xl font-bold leading-relaxed tracking-tight",children:z[q]})]},q)}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 z-20",children:z.map((t,s)=>e.jsx("button",{onClick:()=>F(s),className:`h-1.5 rounded-full transition-all duration-300 ${s===q?"w-6 bg-orange-500 shadow-sm":"w-1.5 bg-orange-200 dark:bg-orange-800/50 hover:bg-orange-300"}`,"aria-label":`Go to rule ${s+1}`},s))})]}),B==null?void 0:B.levels.map((t,s)=>e.jsx(Re,{level:t,index:s,onClick:I},s))]}),c==="training"&&e.jsx("div",{children:Pe?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-orange-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-slate-500",children:"Loading training content..."})]}):!_&&!b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:oe.map(t=>e.jsx(qe,{chapter:t,completedLessons:$,language:a,onClick:Te},t.number))}),e.jsx("div",{className:"mt-12 flex justify-center pb-8",children:e.jsxs("button",{onClick:()=>de(!0),className:"group relative inline-flex items-center justify-center px-8 py-4 font-bold text-white transition-all duration-200 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-600 hover:from-blue-700 hover:to-indigo-700 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[e.jsx("span",{className:"absolute inset-0 w-full h-full -mt-1 rounded-full opacity-30 bg-gradient-to-b from-transparent via-transparent to-black"}),e.jsxs("span",{className:"relative flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl animate-bounce",children:"üéì"}),e.jsx("span",{className:"text-lg",children:"My Certificate"})]}),e.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-blue-400 opacity-20 group-hover:opacity-40"})]})})]}):_&&!b?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ee(null),className:"mb-6 flex items-center gap-2 text-orange-600 hover:text-orange-700 font-bold",children:["‚Üê ",a==="en"?"Back to Chapters":"‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®"]}),_.isFAQ?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-100 to-fuchsia-100 dark:from-violet-900/30 dark:to-fuchsia-900/30 p-6 rounded-2xl mb-6 border border-violet-200 dark:border-violet-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-violet-900 dark:text-violet-100 mb-2",children:_.content.title}),e.jsx("p",{className:"text-violet-700 dark:text-violet-300 mb-4",children:_.content.subtitle}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:a==="en"?"Search questions, answers, or tags...":"‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®, ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¨‡¶æ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®...",value:G,onChange:t=>Le(t.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-violet-200 dark:border-violet-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-violet-500 focus:border-transparent outline-none shadow-sm"}),e.jsx("div",{className:"absolute left-3 top-3.5 text-violet-400",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),_.content.questions.filter(t=>{if(!G)return!0;const s=G.toLowerCase();return t.question.toLowerCase().includes(s)||t.answer.toLowerCase().includes(s)||t.tags.some(r=>r.toLowerCase().includes(s))}).map((t,s)=>e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-all",children:e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between p-4 cursor-pointer list-none",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-violet-100 dark:bg-violet-900/50 text-violet-600 dark:text-violet-400 flex items-center justify-center font-bold text-sm shrink-0",children:s+1}),e.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:t.question})]}),e.jsx("span",{className:"transition group-open:rotate-180",children:e.jsx("svg",{fill:"none",height:"24",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",width:"24",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),e.jsxs("div",{className:"px-4 pb-4 pl-[3.25rem] text-slate-600 dark:text-slate-400 text-sm leading-relaxed border-t border-slate-100 dark:border-slate-700 pt-4 bg-slate-50/50 dark:bg-slate-900/30",children:[t.answer,e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t.tags.map(r=>e.jsxs("span",{className:"px-2 py-1 rounded-md bg-slate-200 dark:bg-slate-700 text-xs text-slate-600 dark:text-slate-400 font-medium",children:["#",r]},r))})]})]})},t.id)),_.content.questions.filter(t=>{if(!G)return!0;const s=G.toLowerCase();return t.question.toLowerCase().includes(s)||t.answer.toLowerCase().includes(s)||t.tags.some(r=>r.toLowerCase().includes(s))}).length===0&&e.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[e.jsx("div",{className:"text-4xl mb-3",children:"üîç"}),e.jsx("p",{children:a==="en"?"No results found":"‡¶ï‡ßã‡¶® ‡¶´‡¶≤‡¶æ‡¶´‡¶≤ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø"})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.subchapters.map((t,s)=>{const r=Me(t.chapterNum,t.subchapterNum),l=$.includes(t.level_id);return e.jsxs("div",{onClick:()=>{if(!o){x("login");return}r&&te(t)},className:`bg-white dark:bg-slate-800 p-3 rounded-lg border transition-all flex items-center gap-3 ${r?"border-slate-200 dark:border-slate-700 hover:border-orange-400 dark:hover:border-orange-600 hover:shadow-sm cursor-pointer":"border-slate-100 dark:border-slate-800 opacity-60 cursor-not-allowed"} ${l?"bg-emerald-50/30 dark:bg-emerald-900/10":""} group`,children:[e.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center text-sm font-bold flex-shrink-0 border ${l?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800":r?"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-900/30":"bg-slate-50 dark:bg-slate-800/50 text-slate-400 border-slate-100 dark:border-slate-700"}`,children:t.level_id}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider",children:t.badge_name}),l&&e.jsx("span",{className:"w-4 h-4 rounded-full bg-emerald-500 text-white flex items-center justify-center text-[10px]",children:"‚úì"}),!r&&e.jsx("span",{className:"text-[10px] text-slate-400",children:"üîí"})]}),e.jsx("h4",{className:`font-bold text-sm truncate ${r?"text-slate-900 dark:text-slate-100":"text-slate-400"}`,children:t.level_title})]}),r&&e.jsx("div",{className:"text-slate-300 dark:text-slate-600 group-hover:text-orange-500 transition-colors",children:"‚Üí"})]},t.level_id)})})]}):b?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>{te(null),window.scrollTo({top:0,behavior:"smooth"})},className:"mb-6 flex items-center gap-2 text-orange-600 hover:text-orange-700 font-bold",children:["‚Üê ",a==="en"?"Back to Lessons":"‡¶™‡¶æ‡¶†‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®"]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white mb-6 shadow-lg",children:[e.jsx("div",{className:"inline-block px-3 py-1 rounded-lg bg-white/20 backdrop-blur-sm text-sm font-bold mb-3",children:b.badge_name}),e.jsx("h2",{className:"text-2xl font-bold mb-2 reading-content",children:b.level_title}),e.jsxs("p",{className:"text-sm opacity-90",children:["Level ",b.level_id]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-5 rounded-r-xl mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üéØ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100 mb-2",children:a==="en"?"Mission Briefing":"‡¶Æ‡¶ø‡¶∂‡¶® ‡¶¨‡ßç‡¶∞‡¶ø‡¶´‡¶ø‡¶Ç"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 reading-content leading-relaxed",children:b.mission_briefing})]})]})}),(me=b.sections)==null?void 0:me.map((t,s)=>{var r;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 mb-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-4 reading-content",children:t.title}),e.jsx("div",{className:"space-y-6",children:(r=t.points)==null?void 0:r.map((l,i)=>e.jsxs("div",{className:"border-l-2 border-orange-200 dark:border-orange-800 pl-4",children:[e.jsx("h4",{className:"font-bold text-orange-600 dark:text-orange-400 mb-2 reading-content",children:l.item_name}),l.specifications&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-sm",children:"üìã"}),e.jsx("p",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider",children:a==="en"?"Details":"‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 reading-content leading-relaxed pl-8",children:l.specifications})]}),l.importance&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-sm",children:"üí°"}),e.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wider",children:a==="en"?"Key Point":"‡¶Æ‡ßÇ‡¶≤ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 reading-content leading-relaxed pl-8",children:l.importance})]}),l.daily_check&&e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 p-3 rounded-lg border border-emerald-100 dark:border-emerald-900/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-sm",children:"‚úì"}),e.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:a==="en"?"Quick Tip":"‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 reading-content leading-relaxed pl-8",children:l.daily_check})]})]},i))})]},s)}),b.pro_tip&&e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-6 mb-6 border border-emerald-200 dark:border-emerald-800",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"üí°"}),e.jsx("h3",{className:"text-lg font-bold text-emerald-700 dark:text-emerald-400 reading-content",children:b.pro_tip.title})]}),e.jsx("ul",{className:"space-y-2",children:(he=b.pro_tip.content)==null?void 0:he.map((t,s)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700 dark:text-slate-300 reading-content leading-relaxed",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-bold",children:"‚úì"}),t]},s))})]}),b.myth_buster&&e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-xl p-6 mb-6 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsx("h3",{className:"text-lg font-bold text-red-700 dark:text-red-400 reading-content",children:b.myth_buster.title})]}),e.jsx("div",{className:"space-y-4",children:(be=b.myth_buster.myths)==null?void 0:be.map((t,s)=>e.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase mb-1",children:a==="en"?"Myth":"‡¶Æ‡¶ø‡¶•"}),e.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300 italic reading-content leading-relaxed",children:['"',t.myth,'"']})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase mb-1",children:a==="en"?"Reality":"‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶§‡¶æ"}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 reading-content leading-relaxed",children:t.reality||t.fact})]})]},s))})]}),b.advanced_section&&e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-6 mb-6 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"üî¨"}),e.jsx("h3",{className:"text-lg font-bold text-indigo-700 dark:text-indigo-400 reading-content",children:b.advanced_section.title})]}),e.jsx("div",{className:"space-y-4",children:(ue=b.advanced_section.facts)==null?void 0:ue.map((t,s)=>e.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-indigo-600 dark:text-indigo-400 mb-2 reading-content",children:t.title}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 reading-content leading-relaxed",children:t.content})]},s))})]}),e.jsx("div",{className:"space-y-4 mt-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:$.includes(b.level_id)?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"w-full px-5 py-3 rounded-lg font-bold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 flex items-center justify-center gap-2",children:[e.jsx("span",{children:"‚úì"}),a==="en"?"Lesson Completed!":"‡¶™‡¶æ‡¶† ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!"]}),e.jsxs("button",{onClick:()=>{te(null),window.scrollTo({top:0,behavior:"smooth"})},className:"w-full px-5 py-3 rounded-lg font-bold transition-all bg-orange-600 text-white hover:bg-orange-700 flex items-center justify-center gap-2",children:["‚Üê ",a==="en"?"Back to Lessons":"‡¶™‡¶æ‡¶†‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®"]})]}):e.jsxs("button",{onClick:()=>$e(b.level_id),className:"w-full px-5 py-3 rounded-lg font-bold transition-all bg-emerald-600 text-white hover:bg-emerald-700 flex items-center justify-center gap-2",children:[e.jsx("span",{children:"‚úì"}),a==="en"?"Mark as Complete":"‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶ö‡¶ø‡¶π‡ßç‡¶®‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®"]})})]}):null}),c==="my_ppe"&&e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 sm:p-6 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50",children:e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:y.my_ppe.title})}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:L?e.jsx("div",{className:"p-8 text-center text-slate-400",children:"Loading PPE list..."}):D.map((t,s)=>e.jsx("div",{className:`p-3 sm:p-4 transition-colors ${t.available?"bg-orange-50/30 dark:bg-orange-900/10":""}`,children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:t.available,onChange:r=>U(s,"available",r.target.checked),className:"w-5 h-5 rounded border-slate-300 text-orange-600 focus:ring-orange-500"})}),e.jsxs("div",{className:"flex items-center gap-2 min-w-[140px] flex-1",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsx("span",{className:`text-sm font-bold ${t.available?"text-slate-900 dark:text-slate-100":"text-slate-400"}`,children:t.name})]}),t.available&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto mt-2 sm:mt-0 ml-8 sm:ml-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:t.count,onChange:r=>U(s,"count",r.target.value),className:"w-12 px-1 py-1 text-xs border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900"})]}),e.jsxs("select",{value:t.condition,onChange:r=>U(s,"condition",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Damaged",children:"Damaged"})]}),e.jsxs("select",{value:t.age,onChange:r=>U(s,"age",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"<6m",children:"<6m"}),e.jsx("option",{value:"6-12m",children:"6-12m"}),e.jsx("option",{value:"1-2y",children:"1-2y"}),e.jsx("option",{value:">2y",children:">2y"})]}),e.jsxs("select",{value:t.usage,onChange:r=>U(s,"usage",r.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"Personal",children:"Personal"}),e.jsx("option",{value:"Shared",children:"Shared"})]})]})]})},t.name))}),e.jsx("div",{className:"p-4 sm:p-6 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-100 dark:border-slate-700 flex justify-center",children:e.jsx("button",{onClick:Fe,disabled:R,className:`px-10 py-3 rounded-xl font-bold text-white shadow-lg transition-all transform active:scale-95 ${R?"bg-slate-400 cursor-not-allowed":"bg-orange-600 hover:bg-orange-700 shadow-orange-200 dark:shadow-none"}`,children:R?"Saving...":"Update PPE Status"})})]})}),c==="report"&&e.jsxs("div",{className:"max-w-2xl mx-auto bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-600 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center text-3xl mx-auto mb-4",children:"‚ö†Ô∏è"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:y.report.title})]}),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:y.report.form.location}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 focus:outline-none focus:border-orange-500",placeholder:"e.g. Sector 5, Pole 24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:y.report.form.type}),e.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 focus:outline-none focus:border-orange-500 bg-white dark:bg-slate-800",children:[e.jsx("option",{children:"Damaged Pole"}),e.jsx("option",{children:"Loose Wire"}),e.jsx("option",{children:"Sparking"}),e.jsx("option",{children:"Tree Branch"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:y.report.form.desc}),e.jsx("textarea",{rows:"4",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 focus:outline-none focus:border-orange-500",placeholder:"Describe the issue..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:y.report.form.photo}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:bg-slate-50 transition-all cursor-pointer",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üì∑"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Click to upload or take photo"})]})]}),e.jsx("button",{type:"button",className:"w-full py-4 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-all shadow-md",children:y.report.form.submit})]})]})]}),e.jsx(Be,{level:h,onClose:()=>I(null),language:a}),e.jsx(De,{isOpen:we,onClose:()=>Z(!1),onComplete:ze,questions:Ne,language:a}),e.jsx(ke,{isOpen:Ee,onClose:()=>de(!1),userName:((pe=o==null?void 0:o.user_metadata)==null?void 0:pe.full_name)||((ge=o==null?void 0:o.email)==null?void 0:ge.split("@")[0]),level:(o==null?void 0:o.training_level)||1,badgeName:(fe=je((o==null?void 0:o.training_level)||1))==null?void 0:fe[a==="en"?"en":"bn"],date:new Date().toLocaleDateString()})]})}const Be=({level:a,onClose:o,language:x})=>{var g,c,m;return a?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fade-in",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-slate-100 dark:border-slate-700 animate-scale-in",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 p-4 sm:p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 flex items-center justify-center text-xl font-bold",children:a.level_number}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100 leading-tight",children:a.level_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.focus})]})]}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/30",children:e.jsx("p",{className:`reading-content font-medium ${x==="bn"?"font-bengali":""}`,children:a.content.summary})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üí°"})," ",x==="en"?"Practical Tips":"‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ø‡¶ï ‡¶ü‡¶ø‡¶™‡¶∏"]}),e.jsx("div",{className:"space-y-3",children:a.content.practical_tips.map((u,p)=>e.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 dark:bg-slate-900/30 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("span",{className:"text-orange-500 font-bold",children:"‚Ä¢"}),e.jsx("p",{className:`reading-content text-sm ${x==="bn"?"font-bengali":""}`,children:u})]},p))})]}),a.content.myths_vs_facts&&a.content.myths_vs_facts.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"‚öñÔ∏è"})," ",x==="en"?"Myths vs Facts":"‡¶≠‡ßÅ‡¶≤ ‡¶ß‡¶æ‡¶∞‡¶£‡¶æ ‡¶¨‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶§‡¶æ"]}),e.jsx("div",{className:"space-y-4",children:a.content.myths_vs_facts.map((u,p)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/20",children:[e.jsx("span",{className:"text-[10px] font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Myth"}),e.jsx("p",{className:`reading-content text-xs ${x==="bn"?"font-bengali":""}`,children:u.myth})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/10 rounded-lg border border-green-100 dark:border-green-900/20",children:[e.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-green-400 uppercase tracking-wider block mb-1",children:"Fact"}),e.jsx("p",{className:`reading-content text-xs font-medium ${x==="bn"?"font-bengali":""}`,children:u.fact})]})]},p))})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:e.jsx("button",{onClick:o,className:"w-full py-3 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-xl font-bold hover:bg-slate-800 dark:hover:bg-white transition-colors",children:x==="en"?"Got it":"‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø"})})]}),e.jsx(ke,{isOpen:showCertificateModal,onClose:()=>setShowCertificateModal(!1),userName:(userProfile==null?void 0:userProfile.full_name)||((g=user==null?void 0:user.user_metadata)==null?void 0:g.full_name)||((c=user==null?void 0:user.email)==null?void 0:c.split("@")[0]),level:(user==null?void 0:user.training_level)||1,badgeName:(m=je((user==null?void 0:user.training_level)||1))==null?void 0:m[x==="en"?"en":"bn"],date:new Date().toLocaleDateString()})]}):null};export{He as default};
