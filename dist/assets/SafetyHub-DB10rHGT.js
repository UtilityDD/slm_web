import{r as n,j as e,s as X,R as me,c as _e}from"./index-OD7DQE6u.js";import{c as te}from"./cacheHelper-BlUM2QW1.js";const Pe=({isOpen:r,onClose:i,onComplete:m,questions:g=[],language:c="en"})=>{const[u,N]=n.useState(0),[j,T]=n.useState({}),[_,G]=n.useState(!1),[O,U]=n.useState(0),p={en:{title:"Chapter Quiz",question:"Question",result:"Quiz Result",completed:"Quiz Completed!",failed:"Pass Mark Not Reached",score:"You scored",outOf:"out of",required:"90% correct answers required to pass.",continue:"Continue to Next Lesson",tryAgain:"Try Again",readAgain:"Read Again",submit:"Submit Quiz",next:"Next Question"},bn:{title:"‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶ï‡ßÅ‡¶á‡¶ú",question:"‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®",result:"‡¶ï‡ßÅ‡¶á‡¶ú ‡¶´‡¶≤‡¶æ‡¶´‡¶≤",completed:"‡¶ï‡ßÅ‡¶á‡¶ú ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!",failed:"‡¶™‡¶æ‡¶∏ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶Ö‡¶∞‡ßç‡¶ú‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø",score:"‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞",outOf:"‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá",required:"‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡ßØ‡ß¶% ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§",continue:"‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶™‡¶æ‡¶†‡ßá ‡¶Ø‡¶æ‡¶®",tryAgain:"‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®",readAgain:"‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶™‡ßú‡ßÅ‡¶®",submit:"‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®",next:"‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®"}}[c]||{},[A,J]=n.useState([]);if(n.useEffect(()=>{if(r&&g.length>0){const b=g.map(x=>{const P=[...x.options.map((f,$)=>({text:f,isCorrect:$===x.correctAnswerIndex}))].sort(()=>.5-Math.random()),E=P.findIndex(f=>f.isCorrect);return{...x,options:P.map(f=>f.text),correctAnswerIndex:E}});J(b),N(0),T({}),G(!1),U(0)}},[r,g]),!r||A.length===0)return null;const v=A[u],C=A.length,F=Math.ceil(C*.9),k=O>=F,I=b=>{T(x=>({...x,[u]:b}))},Q=()=>{u<C-1?N(b=>b+1):R()},R=()=>{let b=0;A.forEach((x,D)=>{j[D]===x.correctAnswerIndex&&b++}),U(b),G(!0)},K=()=>{k&&m(O)},Y=()=>{const b=A.map(x=>{const P=[...x.options.map((f,$)=>({text:f,isCorrect:$===x.correctAnswerIndex}))].sort(()=>.5-Math.random()),E=P.findIndex(f=>f.isCorrect);return{...x,options:P.map(f=>f.text),correctAnswerIndex:E}});J(b),N(0),T({}),G(!1),U(0)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border border-slate-200 dark:border-slate-700 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:_?p.result:`${p.question} ${u+1}/${C}`}),!_&&e.jsx("button",{onClick:i,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-4xl ${k?"bg-green-100 dark:bg-green-900/30 text-green-600":"bg-amber-100 dark:bg-amber-900/30 text-amber-600"}`,children:k?"üèÜ":"‚ö†Ô∏è"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2",children:k?p.completed:p.failed}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:[p.score," ",e.jsx("span",{className:`font-bold text-xl ${k?"text-green-600":"text-amber-600"}`,children:O})," ",p.outOf," ",C]}),!k&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:p.required}),e.jsx("div",{className:"space-y-3 mt-6",children:k?e.jsx("button",{onClick:K,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-green-600/20",children:p.continue}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Y,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-600/20",children:p.tryAgain}),e.jsx("button",{onClick:i,className:"w-full py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl transition-all hover:bg-slate-200 dark:hover:bg-slate-600",children:p.readAgain})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 leading-relaxed",children:v==null?void 0:v.questionText}),e.jsx("div",{className:"space-y-3",children:v==null?void 0:v.options.map((b,x)=>e.jsx("button",{onClick:()=>I(x),className:`w-full p-4 rounded-xl text-left transition-all border-2 ${j[u]===x?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-slate-100 dark:border-slate-700 hover:border-blue-200 dark:hover:border-blue-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 text-slate-600 dark:text-slate-400"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${j[u]===x?"border-blue-500 bg-blue-500 text-white":"border-slate-300 dark:border-slate-600"}`,children:j[u]===x&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{children:b})]})},x))})]})}),!_&&e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:e.jsx("button",{onClick:Q,disabled:j[u]===void 0,className:`w-full py-3 rounded-xl font-bold transition-all ${j[u]!==void 0?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-600/20":"bg-slate-200 dark:bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:u===C-1?p.submit:p.next})})]})})},Ee=me.memo(({level:r,index:i,onClick:m})=>e.jsxs("div",{onClick:()=>m(r),className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 hover:border-orange-300 dark:hover:border-orange-700 hover:shadow-md transition-all cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-600 text-white flex items-center justify-center text-lg font-bold shadow-md shadow-orange-500/20 group-hover:scale-110 transition-transform",children:i+1}),e.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"‚Üí"})]}),e.jsx("h3",{className:"font-bold text-base text-slate-900 dark:text-slate-100 mb-0.5",children:r.level_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:r.focus})]})),$e=me.memo(({chapter:r,completedLessons:i,language:m,onClick:g})=>{const c=r.number===10,u=i.filter(j=>j&&j.toString().startsWith(`${r.number}.`)).length,N=r.count>0?Math.min(100,Math.round(u/r.count*100)):0;return e.jsxs("div",{onClick:()=>g(r),className:`p-5 rounded-xl border transition-all cursor-pointer group relative overflow-hidden ${c?"bg-gradient-to-br from-violet-50 to-fuchsia-50 dark:from-violet-900/20 dark:to-fuchsia-900/20 border-violet-200 dark:border-violet-700 hover:border-violet-400 dark:hover:border-violet-500 shadow-sm hover:shadow-md":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-orange-400 dark:hover:border-orange-600 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg font-bold border ${c?"bg-violet-100 dark:bg-violet-900/40 text-violet-600 dark:text-violet-300 border-violet-200 dark:border-violet-800":"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-900/50"}`,children:c?"?":r.number}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold leading-tight transition-colors ${c?"text-violet-900 dark:text-violet-100 group-hover:text-violet-700 dark:group-hover:text-violet-300":"text-slate-900 dark:text-slate-100 group-hover:text-orange-600 dark:group-hover:text-orange-400"}`,children:r.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:c?m==="en"?"Always Unlocked":"‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶®‡ßç‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§":`${r.count} ${m==="en"?"Lessons":"‡¶™‡¶æ‡¶†"}`})]})]}),!c&&N===100&&e.jsx("div",{className:"text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider",children:m==="en"?"Done":"‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®"}),c&&e.jsx("div",{className:"text-violet-500 bg-violet-50 dark:bg-violet-900/20 px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider",children:"FAQ"})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${N===100?"bg-emerald-500":"bg-orange-500"}`,style:{width:`${N}%`}})}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5 text-right",children:[N,"% ",m==="en"?"Complete":"‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®"]})]}),c&&e.jsx("p",{className:"text-[10px] text-violet-400 dark:text-violet-500 mt-2 italic",children:m==="en"?"Reference Guide":"‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶ó‡¶æ‡¶á‡¶°"})]})});function Te({language:r="en",user:i,setCurrentView:m,onProgressUpdate:g}){var de,ie,ce,xe;const[c,u]=n.useState("protocols"),[N,j]=n.useState([]),[T,_]=n.useState(!1),[G,O]=n.useState(!1),[U,p]=n.useState(null),[A,J]=n.useState({name:"",age_months:"",condition:"Good",details:"",count:1}),[v,C]=n.useState([]),[F,k]=n.useState(!1),[I,Q]=n.useState(0),[R,K]=n.useState(null),[Y,b]=n.useState(null),[x,D]=n.useState(null),[P,E]=n.useState(!1),[f,$]=n.useState(!1),[he,be]=n.useState([]),[se,re]=n.useState(null),[ue,ge]=n.useState({}),[pe,fe]=n.useState([]),[L,V]=n.useState(null),[Me,ze]=n.useState(null),[h,Z]=n.useState(null),[je,B]=n.useState(!1),[M,ae]=n.useState([]);n.useEffect(()=>{if(i){const t=localStorage.getItem(`training_progress_${i.id}`);t&&ae(JSON.parse(t))}},[i]);const ve=(t,s)=>{if(s===1)return!0;const l=`${t}.${s-1}`;return M.includes(l)},H=t=>{if(!M.includes(t)){const s=[...M,t];if(ae(s),i){localStorage.setItem(`training_progress_${i.id}`,JSON.stringify(s));const l=_e(s);X.from("profiles").update({training_level:l}).eq("id",i.id).then(({error:a})=>{a&&console.error("Error syncing training level:",a)})}g&&g(s)}$(!1),re(null)},ke=async t=>{if(M.includes(t))return;const s=`questions_${t.replace(".","_")}.json`;try{const l=await fetch(`/quizzes/${s}`);if(!l.ok){H(t);return}const a=await l.json();if(a&&a.length>0){const d=ue[t]||[],o=a.filter(y=>!d.includes(y.questionText)),W=a.filter(y=>d.includes(y.questionText));let S=[];if(o.length>=8){const y=[...o].sort(()=>.5-Math.random()),ee=[...W].sort(()=>.5-Math.random());S=[...y.slice(0,8),...ee.slice(0,2)]}else{const y=[...W].sort(()=>.5-Math.random());S=[...o,...y.slice(0,Math.max(0,10-o.length))]}S=S.sort(()=>.5-Math.random()).slice(0,10),ge(y=>({...y,[t]:S.map(ee=>ee.questionText)})),be(S),re(t),$(!0)}else H(t)}catch(l){console.error("Error loading quiz:",l),H(t)}},Ne=t=>{se&&H(se)},we=[{rule:r==="en"?"Min. Ground Clearance for LT line is 15 ft./ 4.6 meter.":"‡¶è‡¶≤‡¶ü‡¶ø ‡¶≤‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡ßç‡¶Ø‡ßÇ‡¶®‡¶§‡¶Æ ‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡ßç‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶∏ ‡¶π‡¶≤ ‡ßß‡ß´ ‡¶´‡ßÅ‡¶ü/ ‡ß™.‡ß¨ ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞‡•§",icon:"üìè",color:"from-blue-600 to-indigo-600"},{rule:r==="en"?"Wear PPE -> Shut down -> Earthing -> Discharge -> Work.":"‡¶™‡¶ø‡¶™‡¶ø‡¶á ‡¶™‡¶∞‡ßÅ‡¶® -> ‡¶∂‡¶æ‡¶ü ‡¶°‡¶æ‡¶â‡¶® -> ‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶Ç -> ‡¶°‡¶ø‡¶∏‡¶ö‡¶æ‡¶∞‡ßç‡¶ú -> ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",icon:"‚ö°",color:"from-orange-600 to-red-600"},{rule:r==="en"?"Always use a safety belt and helmet while working at height.":"‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ‡¶Ø‡¶º ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡¶∞‡ßç‡¶¨‡¶¶‡¶æ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶¨‡ßá‡¶≤‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶π‡ßá‡¶≤‡¶Æ‡ßá‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",icon:"üßó",color:"from-emerald-600 to-teal-600"},{rule:r==="en"?"Check tools for damage before starting any maintenance work.":"‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡¶æ‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá ‡¶∏‡¶∞‡¶û‡ßç‡¶ú‡¶æ‡¶Æ‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶ï‡ßç‡¶∑‡¶§‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",icon:"üîß",color:"from-slate-700 to-slate-900"}],z=(x==null?void 0:x.rules)||we.map(t=>t.rule);n.useEffect(()=>{const t=setInterval(()=>{Q(s=>(s+1)%z.length)},5e3);return()=>clearInterval(t)},[z.length]),n.useEffect(()=>{const t=async()=>{E(!1);try{const d=await fetch(`/quizzes/${r==="en"?"protocol_en.json":"protocol.json"}`);if(!d.ok)throw new Error("Failed to fetch protocols");const o=await d.json();K(o)}catch(a){console.error("Error fetching protocols:",a),E(!0)}},s=async()=>{try{const d=await fetch(`/quizzes/${r==="en"?"carousol_en.json":"carousol.json"}`);if(!d.ok)throw new Error("Failed to fetch carousel");const o=await d.json();D(o)}catch(a){console.error("Error fetching carousel data:",a)}},l=async()=>{try{B(!0);const a=await fetch("/quizzes/training_manifest.json");if(a.ok){const d=await a.json();fe(d)}else throw new Error("Manifest not found")}catch(a){console.error("Error fetching training chapters:",a),E(!0)}finally{B(!1)}};t(),s(),l()},[r]);const ye=async t=>{if(B(!0),t.number===10){try{const s=await fetch("/quizzes/chapter_10_qa.json");if(s.ok){const l=await s.json();V({...t,isFAQ:!0,content:l})}}catch(s){console.error("Error loading FAQ chapter:",s)}finally{B(!1)}return}try{const s=[];for(let d=1;d<=t.count;d++)s.push(fetch(`/quizzes/chapter_${t.number}_${d}.json`).then(o=>o.ok?o.json():null).catch(()=>null));const a=(await Promise.all(s)).map((d,o)=>d?{...d,chapterNum:t.number,subchapterNum:o+1}:null).filter(Boolean);V({...t,subchapters:a})}catch(s){console.error("Error loading chapter:",s)}finally{B(!1)}},le=()=>{Q(t=>(t+1)%z.length)},oe=()=>{Q(t=>(t-1+z.length)%z.length)},Ce=[{name:"Safety Helmet",icon:"ü™ñ"},{name:"Safety Shoes/Boots",icon:"ü•æ"},{name:"Insulated Gloves",icon:"üß§"},{name:"Reflective Jacket",icon:"ü¶∫"},{name:"Safety Belt",icon:"üßó"},{name:"Full Body Harness",icon:"üßó‚Äç‚ôÇÔ∏è"},{name:"Voltage Detector",icon:"üîå"},{name:"Discharge Rod",icon:"ü¶Ø"},{name:"Safety Goggles",icon:"ü•Ω"},{name:"Raincoat",icon:"üß•"},{name:"Torch/Emergency Light",icon:"üî¶"}];n.useEffect(()=>{c==="my_ppe"&&i&&ne()},[c,i]);const ne=async()=>{if(!i)return;const t=`user_ppe_${i.id}`;let l=te.get(t);if(!l){_(!0);try{const{data:d,error:o}=await X.from("user_ppe").select("*").order("created_at",{ascending:!1});if(o)throw o;l=d||[],te.set(t,l,10)}catch(d){console.error("Error fetching PPE:",d),l=[]}finally{_(!1)}}j(l);const a=Ce.map(d=>{var W;const o=l.find(S=>S.name===d.name);return{...d,available:!!o,id:(o==null?void 0:o.id)||null,count:(o==null?void 0:o.count)||1,condition:(o==null?void 0:o.condition)||"Good",age:o!=null&&o.age_months?o.age_months<=6?"<6m":o.age_months<=12?"6-12m":o.age_months<=24?"1-2y":">2y":"<6m",usage:(W=o==null?void 0:o.details)!=null&&W.includes("Usage:")?o.details.split("Usage:")[1].trim():"Personal"}});C(a)},Se=async()=>{if(!i){m("login");return}k(!0);try{const t=[],s=[];for(const a of v){const d=a.age==="<6m"?3:a.age==="6-12m"?9:a.age==="1-2y"?18:36,o=`Usage: ${a.usage}`;a.available?t.push({id:a.id||void 0,user_id:i.id,name:a.name,count:parseInt(a.count),condition:a.condition,age_months:d,details:o}):a.id&&s.push(a.id)}const l=[];t.length>0&&l.push(X.from("user_ppe").upsert(t,{onConflict:"id",ignoreDuplicates:!1})),s.length>0&&l.push(X.from("user_ppe").delete().in("id",s)),await Promise.all(l),te.clear(`user_ppe_${i.id}`),await ne(),alert("PPE Status updated successfully!")}catch(t){console.error("Error saving PPE:",t),alert("Failed to save PPE status")}finally{k(!1)}},q=(t,s,l)=>{const a=[...v];a[t]={...a[t],[s]:l},C(a)},w={en:{title:"Safety Hub",tabs:{protocols:"Protocols",training:"90 Days Training",my_ppe:"My PPE",report:"Report Incident"},protocols:{title:"Standard Operating Procedures",categories:["High Voltage","Maintenance","Storm Safety","First Aid"]},training:{title:"90 Days Training Program",watch:"Watch Now"},my_ppe:{title:"My Personal Protective Equipment",addBtn:"Add New PPE",editBtn:"Edit PPE",empty:"No PPE items added yet.",fields:{name:"Item Name",count:"Quantity",age:"Age (Months)",condition:"Condition",details:"Details / Specs"},conditions:{Good:"Good",Fair:"Fair",Damaged:"Damaged",Expired:"Expired"}},report:{title:"Report a Hazard",form:{location:"Location",type:"Hazard Type",desc:"Description",photo:"Upload Photo",submit:"Submit Report"}}},bn:{title:"‡¶∏‡ßá‡¶´‡¶ü‡¶ø ‡¶π‡¶æ‡¶¨",tabs:{protocols:"‡¶™‡ßç‡¶∞‡ßã‡¶ü‡ßã‡¶ï‡¶≤",training:"‡ßØ‡ß¶ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶£",my_ppe:"‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡¶ø‡¶™‡¶ø‡¶á",report:"‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®"},protocols:{title:"‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶° ‡¶Ö‡¶™‡¶æ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶™‡ßç‡¶∞‡¶∏‡¶ø‡¶°‡¶ø‡¶â‡¶∞ (SOP)",categories:["‡¶â‡¶ö‡ßç‡¶ö ‡¶≠‡ßã‡¶≤‡ßç‡¶ü‡ßá‡¶ú","‡¶∞‡¶ï‡ßç‡¶∑‡¶£‡¶æ‡¶¨‡ßá‡¶ï‡ßç‡¶∑‡¶£","‡¶ù‡¶°‡¶º ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ","‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ"]},training:{title:"‡ßØ‡ß¶ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßç‡¶Æ‡¶∏‡ßÇ‡¶ö‡¶ø",watch:"‡¶è‡¶ñ‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®"},my_ppe:{title:"‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶ï‡ßç‡¶§‡¶ø‡¶ó‡¶§ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶∏‡¶∞‡¶û‡ßç‡¶ú‡¶æ‡¶Æ",addBtn:"‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶ø‡¶™‡¶ø‡¶á ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®",editBtn:"‡¶™‡¶ø‡¶™‡¶ø‡¶á ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®",empty:"‡¶è‡¶ñ‡¶®‡¶ì ‡¶ï‡ßã‡¶® ‡¶™‡¶ø‡¶™‡¶ø‡¶á ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§",fields:{name:"‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ",count:"‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£",age:"‡¶¨‡¶Ø‡¶º‡¶∏ (‡¶Æ‡¶æ‡¶∏)",condition:"‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ",details:"‡¶¨‡¶ø‡¶¨‡¶∞‡¶£"},conditions:{Good:"‡¶≠‡¶æ‡¶≤‡ßã",Fair:"‡¶Æ‡ßã‡¶ü‡¶æ‡¶Æ‡ßÅ‡¶ü‡¶ø",Damaged:"‡¶ï‡ßç‡¶∑‡¶§‡¶ø‡¶ó‡ßç‡¶∞‡¶∏‡ßç‡¶§",Expired:"‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£"}},report:{title:"‡¶¨‡¶ø‡¶™‡¶¶ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®",form:{location:"‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®",type:"‡¶¨‡¶ø‡¶™‡¶¶‡ßá‡¶∞ ‡¶ß‡¶∞‡¶®",desc:"‡¶¨‡¶ø‡¶¨‡¶∞‡¶£",photo:"‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®",submit:"‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®"}}}}[r];return e.jsxs("div",{className:"compact-container py-6 sm:py-10 mb-20",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"inline-block p-2.5 rounded-full bg-orange-100 text-orange-600 text-2xl mb-3",children:"ü¶∫"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-0.5",children:r==="en"?e.jsxs(e.Fragment,{children:["Safety ",e.jsx("span",{className:"text-orange-600",children:"Hub"})]}):e.jsx(e.Fragment,{children:w.title})})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:["protocols","training","my_ppe","report"].map(t=>e.jsx("button",{onClick:()=>u(t),className:`px-5 py-2.5 rounded-xl text-xs font-bold transition-all ${c===t?"bg-orange-600 text-white shadow-lg shadow-orange-500/20":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 border border-slate-200 dark:border-slate-700"}`,children:w.tabs[t]},t))}),P&&e.jsxs("div",{className:"max-w-md mx-auto mb-8 p-6 bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-800 rounded-2xl text-center animate-fade-in",children:[e.jsx("div",{className:"text-3xl mb-3",children:"üì°"}),e.jsx("h3",{className:"text-red-800 dark:text-red-400 font-bold mb-2",children:r==="en"?"Connection Error":"‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶è‡¶∞‡¶∞"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-500 mb-4",children:r==="en"?"Unable to load safety data. Please check your internet connection.":"‡¶∏‡ßá‡¶´‡¶ü‡¶ø ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-all shadow-lg shadow-red-600/20",children:r==="en"?"Retry":"‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®"})]}),e.jsxs("div",{className:"animate-slide-down",children:[c==="protocols"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-gradient-to-br from-orange-50 to-orange-100/50 dark:from-orange-900/10 dark:to-orange-900/5 rounded-2xl p-6 border border-orange-100 dark:border-orange-800/50 shadow-sm min-h-[220px] flex flex-col justify-center relative overflow-hidden group touch-pan-y",onTouchStart:t=>{const s=t.touches[0];t.currentTarget.dataset.touchStartX=s.clientX},onTouchEnd:t=>{const s=t.changedTouches[0],l=parseFloat(t.currentTarget.dataset.touchStartX),a=s.clientX;l-a>50&&le(),a-l>50&&oe()},children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-orange-200/20 dark:bg-orange-600/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-orange-200/20 dark:bg-orange-600/10 rounded-full blur-xl -ml-8 -mb-8 pointer-events-none"}),e.jsx("button",{onClick:oe,className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/80 dark:bg-slate-800/80 hover:bg-white dark:hover:bg-slate-700 flex items-center justify-center border border-white/50 dark:border-slate-700 shadow-sm backdrop-blur-sm transition-all active:scale-95 z-20 opacity-60 hover:opacity-100 sm:opacity-0 sm:group-hover:opacity-100","aria-label":"Previous rule",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:le,className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/80 dark:bg-slate-800/80 hover:bg-white dark:hover:bg-slate-700 flex items-center justify-center border border-white/50 dark:border-slate-700 shadow-sm backdrop-blur-sm transition-all active:scale-95 z-20 opacity-60 hover:opacity-100 sm:opacity-0 sm:group-hover:opacity-100","aria-label":"Next rule",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center h-full px-8 sm:px-12 py-2",children:e.jsxs("div",{className:"max-w-xl text-center animate-fade-in-up",children:[e.jsx("div",{className:"mb-4 inline-flex items-center justify-center w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-900/30 text-2xl shadow-inner",children:"üí°"}),e.jsx("p",{className:"text-slate-800 dark:text-slate-100 text-base sm:text-xl font-bold leading-relaxed tracking-tight",children:z[I]})]},I)}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-1.5 z-20",children:z.map((t,s)=>e.jsx("button",{onClick:()=>Q(s),className:`h-1.5 rounded-full transition-all duration-300 ${s===I?"w-6 bg-orange-500 shadow-sm":"w-1.5 bg-orange-200 dark:bg-orange-800/50 hover:bg-orange-300"}`,"aria-label":`Go to rule ${s+1}`},s))})]}),R==null?void 0:R.levels.map((t,s)=>e.jsx(Ee,{level:t,index:s,onClick:b},s))]}),c==="training"&&e.jsx("div",{children:je?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-orange-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-slate-500",children:"Loading training content..."})]}):!L&&!h?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:pe.map(t=>e.jsx($e,{chapter:t,completedLessons:M,language:r,onClick:ye},t.number))}):L&&!h?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>V(null),className:"mb-6 flex items-center gap-2 text-orange-600 hover:text-orange-700 font-bold",children:["‚Üê ",r==="en"?"Back to Chapters":"‡¶Ö‡¶ß‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®"]}),L.isFAQ?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-violet-100 to-fuchsia-100 dark:from-violet-900/30 dark:to-fuchsia-900/30 p-6 rounded-2xl mb-6 border border-violet-200 dark:border-violet-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-violet-900 dark:text-violet-100 mb-2",children:L.content.title}),e.jsx("p",{className:"text-violet-700 dark:text-violet-300",children:L.content.subtitle})]}),L.content.questions.map((t,s)=>e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-all",children:e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between p-4 cursor-pointer list-none",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-violet-100 dark:bg-violet-900/50 text-violet-600 dark:text-violet-400 flex items-center justify-center font-bold text-sm shrink-0",children:s+1}),e.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:t.question})]}),e.jsx("span",{className:"transition group-open:rotate-180",children:e.jsx("svg",{fill:"none",height:"24",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",width:"24",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),e.jsxs("div",{className:"px-4 pb-4 pl-[3.25rem] text-slate-600 dark:text-slate-400 text-sm leading-relaxed border-t border-slate-100 dark:border-slate-700 pt-4 bg-slate-50/50 dark:bg-slate-900/30",children:[t.answer,e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t.tags.map(l=>e.jsxs("span",{className:"px-2 py-1 rounded-md bg-slate-200 dark:bg-slate-700 text-xs text-slate-600 dark:text-slate-400 font-medium",children:["#",l]},l))})]})]})},t.id))]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.subchapters.map((t,s)=>{const l=ve(t.chapterNum,t.subchapterNum),a=M.includes(t.level_id);return e.jsxs("div",{onClick:()=>{if(!i){m("login");return}l&&Z(t)},className:`bg-white dark:bg-slate-800 p-3 rounded-lg border transition-all flex items-center gap-3 ${l?"border-slate-200 dark:border-slate-700 hover:border-orange-400 dark:hover:border-orange-600 hover:shadow-sm cursor-pointer":"border-slate-100 dark:border-slate-800 opacity-60 cursor-not-allowed"} ${a?"bg-emerald-50/30 dark:bg-emerald-900/10":""} group`,children:[e.jsx("div",{className:`w-10 h-10 rounded-md flex items-center justify-center text-sm font-bold flex-shrink-0 border ${a?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800":l?"bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 border-orange-100 dark:border-orange-900/30":"bg-slate-50 dark:bg-slate-800/50 text-slate-400 border-slate-100 dark:border-slate-700"}`,children:t.level_id}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider",children:t.badge_name}),a&&e.jsx("span",{className:"w-4 h-4 rounded-full bg-emerald-500 text-white flex items-center justify-center text-[10px]",children:"‚úì"}),!l&&e.jsx("span",{className:"text-[10px] text-slate-400",children:"üîí"})]}),e.jsx("h4",{className:`font-bold text-sm truncate ${l?"text-slate-900 dark:text-slate-100":"text-slate-400"}`,children:t.level_title})]}),l&&e.jsx("div",{className:"text-slate-300 dark:text-slate-600 group-hover:text-orange-500 transition-colors",children:"‚Üí"})]},t.level_id)})})]}):h?e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>{Z(null),window.scrollTo({top:0,behavior:"smooth"})},className:"mb-6 flex items-center gap-2 text-orange-600 hover:text-orange-700 font-bold",children:["‚Üê ",r==="en"?"Back to Lessons":"‡¶™‡¶æ‡¶†‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®"]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white mb-6 shadow-lg",children:[e.jsx("div",{className:"inline-block px-3 py-1 rounded-lg bg-white/20 backdrop-blur-sm text-sm font-bold mb-3",children:h.badge_name}),e.jsx("h2",{className:"text-2xl font-bold mb-2 reading-content",children:h.level_title}),e.jsxs("p",{className:"text-sm opacity-90",children:["Level ",h.level_id]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-5 rounded-r-xl mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üéØ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100 mb-2",children:r==="en"?"Mission Briefing":"‡¶Æ‡¶ø‡¶∂‡¶® ‡¶¨‡ßç‡¶∞‡¶ø‡¶´‡¶ø‡¶Ç"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-300 reading-content leading-relaxed",children:h.mission_briefing})]})]})}),(de=h.sections)==null?void 0:de.map((t,s)=>{var l;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 mb-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-4 reading-content",children:t.title}),e.jsx("div",{className:"space-y-6",children:(l=t.points)==null?void 0:l.map((a,d)=>e.jsxs("div",{className:"border-l-2 border-orange-200 dark:border-orange-800 pl-4",children:[e.jsx("h4",{className:"font-bold text-orange-600 dark:text-orange-400 mb-2 reading-content",children:a.item_name}),a.specifications&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-sm",children:"üìã"}),e.jsx("p",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider",children:r==="en"?"Details":"‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 reading-content leading-relaxed pl-8",children:a.specifications})]}),a.importance&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-sm",children:"üí°"}),e.jsx("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wider",children:r==="en"?"Key Point":"‡¶Æ‡ßÇ‡¶≤ ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 reading-content leading-relaxed pl-8",children:a.importance})]}),a.daily_check&&e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 p-3 rounded-lg border border-emerald-100 dark:border-emerald-900/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-sm",children:"‚úì"}),e.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:r==="en"?"Quick Tip":"‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 reading-content leading-relaxed pl-8",children:a.daily_check})]})]},d))})]},s)}),h.pro_tip&&e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-6 mb-6 border border-emerald-200 dark:border-emerald-800",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"üí°"}),e.jsx("h3",{className:"text-lg font-bold text-emerald-700 dark:text-emerald-400 reading-content",children:h.pro_tip.title})]}),e.jsx("ul",{className:"space-y-2",children:(ie=h.pro_tip.content)==null?void 0:ie.map((t,s)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700 dark:text-slate-300 reading-content leading-relaxed",children:[e.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-bold",children:"‚úì"}),t]},s))})]}),h.myth_buster&&e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-xl p-6 mb-6 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsx("h3",{className:"text-lg font-bold text-red-700 dark:text-red-400 reading-content",children:h.myth_buster.title})]}),e.jsx("div",{className:"space-y-4",children:(ce=h.myth_buster.myths)==null?void 0:ce.map((t,s)=>e.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-bold text-red-600 dark:text-red-400 uppercase mb-1",children:r==="en"?"Myth":"‡¶Æ‡¶ø‡¶•"}),e.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300 italic reading-content leading-relaxed",children:['"',t.myth,'"']})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-600 dark:text-emerald-400 uppercase mb-1",children:r==="en"?"Reality":"‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶§‡¶æ"}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 reading-content leading-relaxed",children:t.reality||t.fact})]})]},s))})]}),h.advanced_section&&e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-6 mb-6 border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"üî¨"}),e.jsx("h3",{className:"text-lg font-bold text-indigo-700 dark:text-indigo-400 reading-content",children:h.advanced_section.title})]}),e.jsx("div",{className:"space-y-4",children:(xe=h.advanced_section.facts)==null?void 0:xe.map((t,s)=>e.jsxs("div",{className:"bg-white/50 dark:bg-slate-800/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-indigo-600 dark:text-indigo-400 mb-2 reading-content",children:t.title}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 reading-content leading-relaxed",children:t.content})]},s))})]}),e.jsx("div",{className:"space-y-4 mt-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:M.includes(h.level_id)?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"w-full px-5 py-3 rounded-lg font-bold bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 flex items-center justify-center gap-2",children:[e.jsx("span",{children:"‚úì"}),r==="en"?"Lesson Completed!":"‡¶™‡¶æ‡¶† ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!"]}),e.jsxs("button",{onClick:()=>{Z(null),window.scrollTo({top:0,behavior:"smooth"})},className:"w-full px-5 py-3 rounded-lg font-bold transition-all bg-orange-600 text-white hover:bg-orange-700 flex items-center justify-center gap-2",children:["‚Üê ",r==="en"?"Back to Lessons":"‡¶™‡¶æ‡¶†‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®"]})]}):e.jsxs("button",{onClick:()=>ke(h.level_id),className:"w-full px-5 py-3 rounded-lg font-bold transition-all bg-emerald-600 text-white hover:bg-emerald-700 flex items-center justify-center gap-2",children:[e.jsx("span",{children:"‚úì"}),r==="en"?"Mark as Complete":"‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨‡ßá ‡¶ö‡¶ø‡¶π‡ßç‡¶®‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®"]})})]}):null}),c==="my_ppe"&&e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 sm:p-6 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50",children:e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:w.my_ppe.title})}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:T?e.jsx("div",{className:"p-8 text-center text-slate-400",children:"Loading PPE list..."}):v.map((t,s)=>e.jsx("div",{className:`p-3 sm:p-4 transition-colors ${t.available?"bg-orange-50/30 dark:bg-orange-900/10":""}`,children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:t.available,onChange:l=>q(s,"available",l.target.checked),className:"w-5 h-5 rounded border-slate-300 text-orange-600 focus:ring-orange-500"})}),e.jsxs("div",{className:"flex items-center gap-2 min-w-[140px] flex-1",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsx("span",{className:`text-sm font-bold ${t.available?"text-slate-900 dark:text-slate-100":"text-slate-400"}`,children:t.name})]}),t.available&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto mt-2 sm:mt-0 ml-8 sm:ml-0",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Qty"}),e.jsx("input",{type:"number",min:"1",value:t.count,onChange:l=>q(s,"count",l.target.value),className:"w-12 px-1 py-1 text-xs border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900"})]}),e.jsxs("select",{value:t.condition,onChange:l=>q(s,"condition",l.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Damaged",children:"Damaged"})]}),e.jsxs("select",{value:t.age,onChange:l=>q(s,"age",l.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"<6m",children:"<6m"}),e.jsx("option",{value:"6-12m",children:"6-12m"}),e.jsx("option",{value:"1-2y",children:"1-2y"}),e.jsx("option",{value:">2y",children:">2y"})]}),e.jsxs("select",{value:t.usage,onChange:l=>q(s,"usage",l.target.value),className:"text-xs px-1 py-1 border border-slate-200 dark:border-slate-600 rounded bg-white dark:bg-slate-900",children:[e.jsx("option",{value:"Personal",children:"Personal"}),e.jsx("option",{value:"Shared",children:"Shared"})]})]})]})},t.name))}),e.jsx("div",{className:"p-4 sm:p-6 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-100 dark:border-slate-700 flex justify-center",children:e.jsx("button",{onClick:Se,disabled:F,className:`px-10 py-3 rounded-xl font-bold text-white shadow-lg transition-all transform active:scale-95 ${F?"bg-slate-400 cursor-not-allowed":"bg-orange-600 hover:bg-orange-700 shadow-orange-200 dark:shadow-none"}`,children:F?"Saving...":"Update PPE Status"})})]})}),c==="report"&&e.jsxs("div",{className:"max-w-2xl mx-auto bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-600 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center text-3xl mx-auto mb-4",children:"‚ö†Ô∏è"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:w.report.title})]}),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:w.report.form.location}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 focus:outline-none focus:border-orange-500",placeholder:"e.g. Sector 5, Pole 24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:w.report.form.type}),e.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 focus:outline-none focus:border-orange-500 bg-white dark:bg-slate-800",children:[e.jsx("option",{children:"Damaged Pole"}),e.jsx("option",{children:"Loose Wire"}),e.jsx("option",{children:"Sparking"}),e.jsx("option",{children:"Tree Branch"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:w.report.form.desc}),e.jsx("textarea",{rows:"4",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 focus:outline-none focus:border-orange-500",placeholder:"Describe the issue..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:w.report.form.photo}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:bg-slate-50 transition-all cursor-pointer",children:[e.jsx("span",{className:"text-2xl block mb-2",children:"üì∑"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Click to upload or take photo"})]})]}),e.jsx("button",{type:"button",className:"w-full py-4 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition-all shadow-md",children:w.report.form.submit})]})]})]}),e.jsx(Le,{level:Y,onClose:()=>b(null),language:r}),e.jsx(Pe,{isOpen:f,onClose:()=>$(!1),onComplete:Ne,questions:he,language:r})]})}const Le=({level:r,onClose:i,language:m})=>r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-slate-100 dark:border-slate-700 animate-scale-in",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 p-4 sm:p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 flex items-center justify-center text-xl font-bold",children:r.level_number}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100 leading-tight",children:r.level_name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:r.focus})]})]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/10 p-4 rounded-xl border border-orange-100 dark:border-orange-900/30",children:e.jsx("p",{className:`reading-content font-medium ${m==="bn"?"font-bengali":""}`,children:r.content.summary})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üí°"})," ",m==="en"?"Practical Tips":"‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ø‡¶ï ‡¶ü‡¶ø‡¶™‡¶∏"]}),e.jsx("div",{className:"space-y-3",children:r.content.practical_tips.map((g,c)=>e.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 dark:bg-slate-900/30 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("span",{className:"text-orange-500 font-bold",children:"‚Ä¢"}),e.jsx("p",{className:`reading-content text-sm ${m==="bn"?"font-bengali":""}`,children:g})]},c))})]}),r.content.myths_vs_facts&&r.content.myths_vs_facts.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"‚öñÔ∏è"})," ",m==="en"?"Myths vs Facts":"‡¶≠‡ßÅ‡¶≤ ‡¶ß‡¶æ‡¶∞‡¶£‡¶æ ‡¶¨‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡¶§‡¶æ"]}),e.jsx("div",{className:"space-y-4",children:r.content.myths_vs_facts.map((g,c)=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/20",children:[e.jsx("span",{className:"text-[10px] font-bold text-red-600 dark:text-red-400 uppercase tracking-wider block mb-1",children:"Myth"}),e.jsx("p",{className:`reading-content text-xs ${m==="bn"?"font-bengali":""}`,children:g.myth})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/10 rounded-lg border border-green-100 dark:border-green-900/20",children:[e.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-green-400 uppercase tracking-wider block mb-1",children:"Fact"}),e.jsx("p",{className:`reading-content text-xs font-medium ${m==="bn"?"font-bengali":""}`,children:g.fact})]})]},c))})]})]}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:e.jsx("button",{onClick:i,className:"w-full py-3 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-xl font-bold hover:bg-slate-800 dark:hover:bg-white transition-colors",children:m==="en"?"Got it":"‡¶¨‡ßÅ‡¶ù‡ßá‡¶õ‡¶ø"})})]})}):null;export{Te as default};
